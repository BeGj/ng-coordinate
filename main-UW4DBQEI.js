import{a as M,b as Ee,c as sS,d as hv,e as wh}from"./chunk-5FZOKLP6.js";var ty=sS((Jm,ey)=>{"use strict";(function(t,e){typeof Jm=="object"&&typeof ey<"u"?ey.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self).RBush=e()})(Jm,function(){"use strict";function t(p,m,_,C,v){(function E(w,x,D,I,N){for(;I>D;){if(I-D>600){var T=I-D+1,O=x-D+1,ee=Math.log(T),Ie=.5*Math.exp(2*ee/3),F=.5*Math.sqrt(ee*Ie*(T-Ie)/T)*(O-T/2<0?-1:1),L=Math.max(D,Math.floor(x-O*Ie/T+F)),P=Math.min(I,Math.floor(x+(T-O)*Ie/T+F));E(w,x,L,P,N)}var G=w[x],de=D,z=I;for(e(w,D,x),N(w[I],G)>0&&e(w,D,I);de<z;){for(e(w,de,z),de++,z--;N(w[de],G)<0;)de++;for(;N(w[z],G)>0;)z--}N(w[D],G)===0?e(w,D,z):e(w,++z,I),z<=x&&(D=z+1),x<=z&&(I=z-1)}})(p,m,_||0,C||p.length-1,v||n)}function e(p,m,_){var C=p[m];p[m]=p[_],p[_]=C}function n(p,m){return p<m?-1:p>m?1:0}var r=function(p){p===void 0&&(p=9),this._maxEntries=Math.max(4,p),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(p,m,_){if(!_)return m.indexOf(p);for(var C=0;C<m.length;C++)if(_(p,m[C]))return C;return-1}function o(p,m){s(p,0,p.children.length,m,p)}function s(p,m,_,C,v){v||(v=g(null)),v.minX=1/0,v.minY=1/0,v.maxX=-1/0,v.maxY=-1/0;for(var E=m;E<_;E++){var w=p.children[E];a(v,p.leaf?C(w):w)}return v}function a(p,m){return p.minX=Math.min(p.minX,m.minX),p.minY=Math.min(p.minY,m.minY),p.maxX=Math.max(p.maxX,m.maxX),p.maxY=Math.max(p.maxY,m.maxY),p}function l(p,m){return p.minX-m.minX}function u(p,m){return p.minY-m.minY}function c(p){return(p.maxX-p.minX)*(p.maxY-p.minY)}function d(p){return p.maxX-p.minX+(p.maxY-p.minY)}function h(p,m){return p.minX<=m.minX&&p.minY<=m.minY&&m.maxX<=p.maxX&&m.maxY<=p.maxY}function f(p,m){return m.minX<=p.maxX&&m.minY<=p.maxY&&m.maxX>=p.minX&&m.maxY>=p.minY}function g(p){return{children:p,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(p,m,_,C,v){for(var E=[m,_];E.length;)if(!((_=E.pop())-(m=E.pop())<=C)){var w=m+Math.ceil((_-m)/C/2)*C;t(p,w,m,_,v),E.push(m,w,w,_)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(p){var m=this.data,_=[];if(!f(p,m))return _;for(var C=this.toBBox,v=[];m;){for(var E=0;E<m.children.length;E++){var w=m.children[E],x=m.leaf?C(w):w;f(p,x)&&(m.leaf?_.push(w):h(p,x)?this._all(w,_):v.push(w))}m=v.pop()}return _},r.prototype.collides=function(p){var m=this.data;if(!f(p,m))return!1;for(var _=[];m;){for(var C=0;C<m.children.length;C++){var v=m.children[C],E=m.leaf?this.toBBox(v):v;if(f(p,E)){if(m.leaf||h(p,E))return!0;_.push(v)}}m=_.pop()}return!1},r.prototype.load=function(p){if(!p||!p.length)return this;if(p.length<this._minEntries){for(var m=0;m<p.length;m++)this.insert(p[m]);return this}var _=this._build(p.slice(),0,p.length-1,0);if(this.data.children.length)if(this.data.height===_.height)this._splitRoot(this.data,_);else{if(this.data.height<_.height){var C=this.data;this.data=_,_=C}this._insert(_,this.data.height-_.height-1,!0)}else this.data=_;return this},r.prototype.insert=function(p){return p&&this._insert(p,this.data.height-1),this},r.prototype.clear=function(){return this.data=g([]),this},r.prototype.remove=function(p,m){if(!p)return this;for(var _,C,v,E=this.data,w=this.toBBox(p),x=[],D=[];E||x.length;){if(E||(E=x.pop(),C=x[x.length-1],_=D.pop(),v=!0),E.leaf){var I=i(p,E.children,m);if(I!==-1)return E.children.splice(I,1),x.push(E),this._condense(x),this}v||E.leaf||!h(E,w)?C?(_++,E=C.children[_],v=!1):E=null:(x.push(E),D.push(_),_=0,C=E,E=E.children[0])}return this},r.prototype.toBBox=function(p){return p},r.prototype.compareMinX=function(p,m){return p.minX-m.minX},r.prototype.compareMinY=function(p,m){return p.minY-m.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(p){return this.data=p,this},r.prototype._all=function(p,m){for(var _=[];p;)p.leaf?m.push.apply(m,p.children):_.push.apply(_,p.children),p=_.pop();return m},r.prototype._build=function(p,m,_,C){var v,E=_-m+1,w=this._maxEntries;if(E<=w)return o(v=g(p.slice(m,_+1)),this.toBBox),v;C||(C=Math.ceil(Math.log(E)/Math.log(w)),w=Math.ceil(E/Math.pow(w,C-1))),(v=g([])).leaf=!1,v.height=C;var x=Math.ceil(E/w),D=x*Math.ceil(Math.sqrt(w));y(p,m,_,D,this.compareMinX);for(var I=m;I<=_;I+=D){var N=Math.min(I+D-1,_);y(p,I,N,x,this.compareMinY);for(var T=I;T<=N;T+=x){var O=Math.min(T+x-1,N);v.children.push(this._build(p,T,O,C-1))}}return o(v,this.toBBox),v},r.prototype._chooseSubtree=function(p,m,_,C){for(;C.push(m),!m.leaf&&C.length-1!==_;){for(var v=1/0,E=1/0,w=void 0,x=0;x<m.children.length;x++){var D=m.children[x],I=c(D),N=(T=p,O=D,(Math.max(O.maxX,T.maxX)-Math.min(O.minX,T.minX))*(Math.max(O.maxY,T.maxY)-Math.min(O.minY,T.minY))-I);N<E?(E=N,v=I<v?I:v,w=D):N===E&&I<v&&(v=I,w=D)}m=w||m.children[0]}var T,O;return m},r.prototype._insert=function(p,m,_){var C=_?p:this.toBBox(p),v=[],E=this._chooseSubtree(C,this.data,m,v);for(E.children.push(p),a(E,C);m>=0&&v[m].children.length>this._maxEntries;)this._split(v,m),m--;this._adjustParentBBoxes(C,v,m)},r.prototype._split=function(p,m){var _=p[m],C=_.children.length,v=this._minEntries;this._chooseSplitAxis(_,v,C);var E=this._chooseSplitIndex(_,v,C),w=g(_.children.splice(E,_.children.length-E));w.height=_.height,w.leaf=_.leaf,o(_,this.toBBox),o(w,this.toBBox),m?p[m-1].children.push(w):this._splitRoot(_,w)},r.prototype._splitRoot=function(p,m){this.data=g([p,m]),this.data.height=p.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(p,m,_){for(var C,v,E,w,x,D,I,N=1/0,T=1/0,O=m;O<=_-m;O++){var ee=s(p,0,O,this.toBBox),Ie=s(p,O,_,this.toBBox),F=(v=ee,E=Ie,w=void 0,x=void 0,D=void 0,I=void 0,w=Math.max(v.minX,E.minX),x=Math.max(v.minY,E.minY),D=Math.min(v.maxX,E.maxX),I=Math.min(v.maxY,E.maxY),Math.max(0,D-w)*Math.max(0,I-x)),L=c(ee)+c(Ie);F<N?(N=F,C=O,T=L<T?L:T):F===N&&L<T&&(T=L,C=O)}return C||_-m},r.prototype._chooseSplitAxis=function(p,m,_){var C=p.leaf?this.compareMinX:l,v=p.leaf?this.compareMinY:u;this._allDistMargin(p,m,_,C)<this._allDistMargin(p,m,_,v)&&p.children.sort(C)},r.prototype._allDistMargin=function(p,m,_,C){p.children.sort(C);for(var v=this.toBBox,E=s(p,0,m,v),w=s(p,_-m,_,v),x=d(E)+d(w),D=m;D<_-m;D++){var I=p.children[D];a(E,p.leaf?v(I):I),x+=d(E)}for(var N=_-m-1;N>=m;N--){var T=p.children[N];a(w,p.leaf?v(T):T),x+=d(w)}return x},r.prototype._adjustParentBBoxes=function(p,m,_){for(var C=_;C>=0;C--)a(m[C],p)},r.prototype._condense=function(p){for(var m=p.length-1,_=void 0;m>=0;m--)p[m].children.length===0?m>0?(_=p[m-1].children).splice(_.indexOf(p[m]),1):this.clear():o(p[m],this.toBBox)},r})});function fv(t,e){return Object.is(t,e)}var nt=null,ra=!1,ou=1,Yn=Symbol("SIGNAL");function me(t){let e=nt;return nt=t,e}function aS(){return ra}var oa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function bh(t){if(ra)throw new Error("");if(nt===null)return;nt.consumerOnSignalRead(t);let e=nt.nextProducerIndex++;if(Ro(nt),e<nt.producerNode.length&&nt.producerNode[e]!==t&&ia(nt)){let n=nt.producerNode[e];cu(n,nt.producerIndexOfThis[e])}nt.producerNode[e]!==t&&(nt.producerNode[e]=t,nt.producerIndexOfThis[e]=ia(nt)?_v(t,nt,e):0),nt.producerLastReadVersion[e]=t.version}function lS(){ou++}function pv(t){if(!(ia(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ou)){if(!t.producerMustRecompute(t)&&!uu(t)){t.dirty=!1,t.lastCleanEpoch=ou;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ou}}function gv(t){if(t.liveConsumerNode===void 0)return;let e=ra;ra=!0;try{for(let n of t.liveConsumerNode)n.dirty||yv(n)}finally{ra=e}}function mv(){return nt?.consumerAllowSignalWrites!==!1}function yv(t){t.dirty=!0,gv(t),t.consumerMarkedDirty?.(t)}function au(t){return t&&(t.nextProducerIndex=0),me(t)}function lu(t,e){if(me(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ia(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)cu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function uu(t){Ro(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(pv(n),r!==n.version))return!0}return!1}function Sh(t){if(Ro(t),ia(t))for(let e=0;e<t.producerNode.length;e++)cu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function _v(t,e,n){if(vv(t),Ro(t),t.liveConsumerNode.length===0)for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=_v(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function cu(t,e){if(vv(t),Ro(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)cu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ro(i),i.producerIndexOfThis[r]=e}}function ia(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ro(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function vv(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Cv(t){let e=Object.create(uS);e.computation=t;let n=()=>{if(pv(e),bh(e),e.value===su)throw e.error;return e.value};return n[Yn]=e,n}var Dh=Symbol("UNSET"),xh=Symbol("COMPUTING"),su=Symbol("ERRORED"),uS=Ee(M({},oa),{value:Dh,dirty:!0,error:null,equal:fv,producerMustRecompute(t){return t.value===Dh||t.value===xh},producerRecomputeValue(t){if(t.value===xh)throw new Error("Detected cycle in computations.");let e=t.value;t.value=xh;let n=au(t),r;try{r=t.computation()}catch(i){r=su,t.error=i}finally{lu(t,n)}if(e!==Dh&&e!==su&&r!==su&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function cS(){throw new Error}var Ev=cS;function wv(){Ev()}function Dv(t){Ev=t}var dS=null;function xv(t){let e=Object.create(bv);e.value=t;let n=()=>(bh(e),e.value);return n[Yn]=e,n}function Th(t,e){mv()||wv(),t.equal(t.value,e)||(t.value=e,hS(t))}function Iv(t,e){mv()||wv(),Th(t,e(t.value))}var bv=Ee(M({},oa),{equal:fv,value:void 0});function hS(t){t.version++,lS(),gv(t),dS?.()}function Sv(t,e,n){let r=Object.create(fS);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=l=>{r.cleanupFn=l};function o(l){return l.fn===null&&l.schedule===null}function s(l){o(l)||(Sh(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=Ih)}let a=()=>{if(r.fn===null)return;if(aS())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!uu(r))return;r.hasRun=!0;let l=au(r);try{r.cleanupFn(),r.cleanupFn=Ih,r.fn(i)}finally{lu(r,l)}};return r.ref={notify:()=>yv(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[Yn]:r},r.ref}var Ih=()=>{},fS=Ee(M({},oa),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:Ih});function Z(t){return typeof t=="function"}function No(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var du=No(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function sa(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ke=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(o){e=o instanceof du?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Tv(o)}catch(s){e=e??[],s instanceof du?e=[...e,...s.errors]:e.push(s)}}if(e)throw new du(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Tv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&sa(n,e)}remove(e){let{_finalizers:n}=this;n&&sa(n,e),e instanceof t&&e._removeParent(this)}};Ke.EMPTY=(()=>{let t=new Ke;return t.closed=!0,t})();var Mh=Ke.EMPTY;function hu(t){return t instanceof Ke||t&&"closed"in t&&Z(t.remove)&&Z(t.add)&&Z(t.unsubscribe)}function Tv(t){Z(t)?t():t.unsubscribe()}var xn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Oo={setTimeout(t,e,...n){let{delegate:r}=Oo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Oo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function fu(t){Oo.setTimeout(()=>{let{onUnhandledError:e}=xn;if(e)e(t);else throw t})}function aa(){}var Mv=Ah("C",void 0,void 0);function Av(t){return Ah("E",void 0,t)}function Rv(t){return Ah("N",t,void 0)}function Ah(t,e,n){return{kind:t,value:e,error:n}}var Ri=null;function Po(t){if(xn.useDeprecatedSynchronousErrorHandling){let e=!Ri;if(e&&(Ri={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ri;if(Ri=null,n)throw r}}else t()}function Nv(t){xn.useDeprecatedSynchronousErrorHandling&&Ri&&(Ri.errorThrown=!0,Ri.error=t)}var Ni=class extends Ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hu(e)&&e.add(this)):this.destination=mS}static create(e,n,r){return new Lo(e,n,r)}next(e){this.isStopped?Nh(Rv(e),this):this._next(e)}error(e){this.isStopped?Nh(Av(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nh(Mv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pS=Function.prototype.bind;function Rh(t,e){return pS.call(t,e)}var Oh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){pu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){pu(r)}else pu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){pu(n)}}},Lo=class extends Ni{constructor(e,n,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&xn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rh(e.next,o),error:e.error&&Rh(e.error,o),complete:e.complete&&Rh(e.complete,o)}):i=e}this.destination=new Oh(i)}};function pu(t){xn.useDeprecatedSynchronousErrorHandling?Nv(t):fu(t)}function gS(t){throw t}function Nh(t,e){let{onStoppedNotification:n}=xn;n&&Oo.setTimeout(()=>n(t,e))}var mS={closed:!0,next:aa,error:gS,complete:aa};var Fo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yt(t){return t}function Ph(...t){return Lh(t)}function Lh(t){return t.length===0?Yt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var we=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=_S(n)?n:new Lo(n,r,i);return Po(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Ov(r),new r((i,o)=>{let s=new Lo({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Fo](){return this}pipe(...n){return Lh(n)(this)}toPromise(n){return n=Ov(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Ov(t){var e;return(e=t??xn.Promise)!==null&&e!==void 0?e:Promise}function yS(t){return t&&Z(t.next)&&Z(t.error)&&Z(t.complete)}function _S(t){return t&&t instanceof Ni||yS(t)&&hu(t)}function Fh(t){return Z(t?.lift)}function he(t){return e=>{if(Fh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new kh(t,e,n,r,i)}var kh=class extends Ni{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ko(){return he((t,e)=>{let n=null;t._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Vo=class extends we{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Fh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ke;let n=this.getSubject();e.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ke.EMPTY)}return e}refCount(){return ko()(this)}};var Pv=No(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var wt=(()=>{class t extends we{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new gu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Pv}next(n){Po(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Po(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Po(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Mh:(this.currentObservers=null,o.push(n),new Ke(()=>{this.currentObservers=null,sa(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new we;return n.source=this,n}}return t.create=(e,n)=>new gu(e,n),t})(),gu=class extends wt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Mh}};var st=class extends wt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Xt=new we(t=>t.complete());function Lv(t){return t&&Z(t.schedule)}function Fv(t){return t[t.length-1]}function mu(t){return Z(Fv(t))?t.pop():void 0}function Kr(t){return Lv(Fv(t))?t.pop():void 0}function Vv(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(d){s(d)}}function l(c){try{u(r.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function kv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oi(t){return this instanceof Oi?(this.v=t,this):new Oi(t)}function jv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(f){return new Promise(function(g,y){o.push([h,f,g,y])>1||a(h,f)})})}function a(h,f){try{l(r[h](f))}catch(g){d(o[0][3],g)}}function l(h){h.value instanceof Oi?Promise.resolve(h.value.v).then(u,c):d(o[0][2],h)}function u(h){a("next",h)}function c(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Uv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof kv=="function"?kv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var yu=t=>t&&typeof t.length=="number"&&typeof t!="function";function _u(t){return Z(t?.then)}function vu(t){return Z(t[Fo])}function Cu(t){return Symbol.asyncIterator&&Z(t?.[Symbol.asyncIterator])}function Eu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wu=vS();function Du(t){return Z(t?.[wu])}function xu(t){return jv(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Oi(n.read());if(i)return yield Oi(void 0);yield yield Oi(r)}}finally{n.releaseLock()}})}function Iu(t){return Z(t?.getReader)}function He(t){if(t instanceof we)return t;if(t!=null){if(vu(t))return CS(t);if(yu(t))return ES(t);if(_u(t))return wS(t);if(Cu(t))return Bv(t);if(Du(t))return DS(t);if(Iu(t))return xS(t)}throw Eu(t)}function CS(t){return new we(e=>{let n=t[Fo]();if(Z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ES(t){return new we(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function wS(t){return new we(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,fu)})}function DS(t){return new we(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Bv(t){return new we(e=>{IS(t,e).catch(n=>e.error(n))})}function xS(t){return Bv(xu(t))}function IS(t,e){var n,r,i,o;return Vv(this,void 0,void 0,function*(){try{for(n=Uv(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Mt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function bu(t,e=0){return he((n,r)=>{n.subscribe(ae(r,i=>Mt(r,t,()=>r.next(i),e),()=>Mt(r,t,()=>r.complete(),e),i=>Mt(r,t,()=>r.error(i),e)))})}function Su(t,e=0){return he((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Gv(t,e){return He(t).pipe(Su(e),bu(e))}function Hv(t,e){return He(t).pipe(Su(e),bu(e))}function $v(t,e){return new we(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function zv(t,e){return new we(n=>{let r;return Mt(n,e,()=>{r=t[wu](),Mt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function Tu(t,e){if(!t)throw new Error("Iterable cannot be null");return new we(n=>{Mt(n,e,()=>{let r=t[Symbol.asyncIterator]();Mt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Wv(t,e){return Tu(xu(t),e)}function qv(t,e){if(t!=null){if(vu(t))return Gv(t,e);if(yu(t))return $v(t,e);if(_u(t))return Hv(t,e);if(Cu(t))return Tu(t,e);if(Du(t))return zv(t,e);if(Iu(t))return Wv(t,e)}throw Eu(t)}function Be(t,e){return e?qv(t,e):He(t)}function K(...t){let e=Kr(t);return Be(t,e)}function jo(t,e){let n=Z(t)?t:()=>t,r=i=>i.error(n());return new we(e?i=>e.schedule(r,0,i):r)}function Vh(t){return!!t&&(t instanceof we||Z(t.lift)&&Z(t.subscribe))}var Ir=No(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function le(t,e){return he((n,r)=>{let i=0;n.subscribe(ae(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:bS}=Array;function SS(t,e){return bS(e)?t(...e):t(e)}function Mu(t){return le(e=>SS(t,e))}var{isArray:TS}=Array,{getPrototypeOf:MS,prototype:AS,keys:RS}=Object;function Au(t){if(t.length===1){let e=t[0];if(TS(e))return{args:e,keys:null};if(NS(e)){let n=RS(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function NS(t){return t&&typeof t=="object"&&MS(t)===AS}function Ru(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Nu(...t){let e=Kr(t),n=mu(t),{args:r,keys:i}=Au(t);if(r.length===0)return Be([],e);let o=new we(OS(r,e,i?s=>Ru(i,s):Yt));return n?o.pipe(Mu(n)):o}function OS(t,e,n=Yt){return r=>{Yv(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)Yv(e,()=>{let u=Be(t[l],e),c=!1;u.subscribe(ae(r,d=>{o[l]=d,c||(c=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Yv(t,e,n){t?Mt(n,t,e):e()}function Xv(t,e,n,r,i,o,s,a){let l=[],u=0,c=0,d=!1,h=()=>{d&&!l.length&&!u&&e.complete()},f=y=>u<r?g(y):l.push(y),g=y=>{o&&e.next(y),u++;let p=!1;He(n(y,c++)).subscribe(ae(e,m=>{i?.(m),o?f(m):e.next(m)},()=>{p=!0},void 0,()=>{if(p)try{for(u--;l.length&&u<r;){let m=l.shift();s?Mt(e,s,()=>g(m)):g(m)}h()}catch(m){e.error(m)}}))};return t.subscribe(ae(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Qe(t,e,n=1/0){return Z(e)?Qe((r,i)=>le((o,s)=>e(r,o,i,s))(He(t(r,i))),n):(typeof e=="number"&&(n=e),he((r,i)=>Xv(r,i,t,n)))}function jh(t=1/0){return Qe(Yt,t)}function Zv(){return jh(1)}function Uo(...t){return Zv()(Be(t,Kr(t)))}function Ou(t){return new we(e=>{He(t()).subscribe(e)})}function Uh(...t){let e=mu(t),{args:n,keys:r}=Au(t),i=new we(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let c=0;c<s;c++){let d=!1;He(n[c]).subscribe(ae(o,h=>{d||(d=!0,u--),a[c]=h},()=>l--,void 0,()=>{(!l||!d)&&(u||o.next(r?Ru(r,a):a),o.complete())}))}});return e?i.pipe(Mu(e)):i}function In(t,e){return he((n,r)=>{let i=0;n.subscribe(ae(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Qr(t){return he((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ae(n,void 0,void 0,s=>{o=He(t(s,Qr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Kv(t,e,n,r,i){return(o,s)=>{let a=n,l=e,u=0;o.subscribe(ae(s,c=>{let d=u++;l=a?t(l,c,d):(a=!0,c),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Bo(t,e){return Z(e)?Qe(t,e,1):Qe(t,1)}function Jr(t){return he((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function br(t){return t<=0?()=>Xt:he((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Bh(t){return le(()=>t)}function Pu(t=PS){return he((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function PS(){return new Ir}function la(t){return he((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Xn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?In((i,o)=>t(i,o,r)):Yt,br(1),n?Jr(e):Pu(()=>new Ir))}function Go(t){return t<=0?()=>Xt:he((e,n)=>{let r=[];e.subscribe(ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Gh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?In((i,o)=>t(i,o,r)):Yt,Go(1),n?Jr(e):Pu(()=>new Ir))}function Hh(t,e){return he(Kv(t,e,arguments.length>=2,!0))}function $h(...t){let e=Kr(t);return he((n,r)=>{(e?Uo(t,n,e):Uo(t,n)).subscribe(r)})}function bn(t,e){return he((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ae(r,l=>{i?.unsubscribe();let u=0,c=o++;He(t(l,c)).subscribe(i=ae(r,d=>r.next(e?e(l,d,c,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function zh(t){return he((e,n)=>{He(t).subscribe(ae(n,()=>n.complete(),aa)),!n.closed&&e.subscribe(n)})}function at(t,e,n){let r=Z(t)||e||n?{next:t,error:e,complete:n}:t;return r?he((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ae(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Yt}var LS="https://g.co/ng/security#xss",B=class extends Error{constructor(e,n){super(Qf(e,n)),this.code=e}};function Qf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function sc(t){return{toString:t}.toString()}var ua=globalThis;function be(t){for(let e in t)if(t[e]===be)return e;throw Error("Could not find renamed property on target object.")}function FS(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function At(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(At).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Qv(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var kS=be({__forward_ref__:be});function zi(t){return t.__forward_ref__=zi,t.toString=function(){return At(this())},t}function Dt(t){return L0(t)?t():t}function L0(t){return typeof t=="function"&&t.hasOwnProperty(kS)&&t.__forward_ref__===zi}function q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Wi(t){return{providers:t.providers||[],imports:t.imports||[]}}function ac(t){return Jv(t,k0)||Jv(t,V0)}function F0(t){return ac(t)!==null}function Jv(t,e){return t.hasOwnProperty(e)?t[e]:null}function VS(t){let e=t&&(t[k0]||t[V0]);return e||null}function e0(t){return t&&(t.hasOwnProperty(t0)||t.hasOwnProperty(jS))?t[t0]:null}var k0=be({\u0275prov:be}),t0=be({\u0275inj:be}),V0=be({ngInjectableDef:be}),jS=be({ngInjectorDef:be}),Q=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function j0(t){return t&&!!t.\u0275providers}var US=be({\u0275cmp:be}),BS=be({\u0275dir:be}),GS=be({\u0275pipe:be}),HS=be({\u0275mod:be}),$u=be({\u0275fac:be}),ca=be({__NG_ELEMENT_ID__:be}),n0=be({__NG_ENV_ID__:be});function U0(t){return typeof t=="string"?t:t==null?"":String(t)}function $S(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():U0(t)}function zS(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new B(-200,t)}function Jf(t,e){throw new B(-201,!1)}var oe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(oe||{}),af;function B0(){return af}function un(t){let e=af;return af=t,e}function G0(t,e,n){let r=ac(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&oe.Optional)return null;if(e!==void 0)return e;Jf(t,"Injector")}var WS={},da=WS,qS="__NG_DI_FLAG__",zu="ngTempTokenPath",YS="ngTokenPath",XS=/\n/gm,ZS="\u0275",r0="__source",Wo;function KS(){return Wo}function ei(t){let e=Wo;return Wo=t,e}function QS(t,e=oe.Default){if(Wo===void 0)throw new B(-203,!1);return Wo===null?G0(t,void 0,e):Wo.get(t,e&oe.Optional?null:void 0,e)}function fe(t,e=oe.Default){return(B0()||QS)(Dt(t),e)}function R(t,e=oe.Default){return fe(t,lc(e))}function lc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function lf(t){let e=[];for(let n=0;n<t.length;n++){let r=Dt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,o=oe.Default;for(let s=0;s<r.length;s++){let a=r[s],l=JS(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(fe(i,o))}else e.push(fe(r))}return e}function JS(t){return t[qS]}function eT(t,e,n,r){let i=t[zu];throw e[r0]&&i.unshift(e[r0]),t.message=tT(`
`+t.message,i,n,r),t[YS]=i,t[zu]=null,t}function tT(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==ZS?t.slice(2):t;let i=At(e);if(Array.isArray(e))i=e.map(At).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):At(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(XS,`
  `)}`}function Yo(t,e){let n=t.hasOwnProperty($u);return n?t[$u]:null}function nT(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function rT(t){return t.flat(Number.POSITIVE_INFINITY)}function ep(t,e){t.forEach(n=>Array.isArray(n)?ep(n,e):e(n))}function H0(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Wu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function iT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function oT(t,e,n){let r=xa(t,e);return r>=0?t[r|1]=n:(r=~r,iT(t,r,e,n)),r}function Wh(t,e){let n=xa(t,e);if(n>=0)return t[n|1]}function xa(t,e){return sT(t,e,1)}function sT(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Xo={},Zt=[],Zo=new Q(""),$0=new Q("",-1),z0=new Q(""),qu=class{get(e,n=da){if(n===da){let r=new Error(`NullInjectorError: No provider for ${At(e)}!`);throw r.name="NullInjectorError",r}return n}},W0=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(W0||{}),Qn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Qn||{}),Rt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Rt||{});function aT(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function uf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];uT(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function lT(t){return t===3||t===4||t===6}function uT(t){return t.charCodeAt(0)===64}function ha(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?i0(t,n,i,null,e[++r]):i0(t,n,i,null,null))}}return t}function i0(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var q0="ng-template";function cT(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&aT(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(tp(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function tp(t){return t.type===4&&t.value!==q0}function dT(t,e,n){let r=t.type===4&&!n?q0:t.value;return e===r}function hT(t,e,n){let r=4,i=t.attrs,o=i!==null?gT(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Sn(r)&&!Sn(l))return!1;if(s&&Sn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!dT(t,l,n)||l===""&&e.length===1){if(Sn(r))return!1;s=!0}}else if(r&8){if(i===null||!cT(t,i,l,n)){if(Sn(r))return!1;s=!0}}else{let u=e[++a],c=fT(l,i,tp(t),n);if(c===-1){if(Sn(r))return!1;s=!0;continue}if(u!==""){let d;if(c>o?d="":d=i[c+1].toLowerCase(),r&2&&u!==d){if(Sn(r))return!1;s=!0}}}}return Sn(r)||s}function Sn(t){return(t&1)===0}function fT(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return mT(e,t)}function pT(t,e,n=!1){for(let r=0;r<e.length;r++)if(hT(t,e[r],n))return!0;return!1}function gT(t){for(let e=0;e<t.length;e++){let n=t[e];if(lT(n))return e}return t.length}function mT(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function o0(t,e){return t?":not("+e.trim()+")":e}function yT(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Sn(s)&&(e+=o0(o,i),i=""),r=s,o=o||!Sn(r);n++}return i!==""&&(e+=o0(o,i)),e}function _T(t){return t.map(yT).join(",")}function vT(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Sn(i))break;i=o}r++}return{attrs:e,classes:n}}function uc(t){return sc(()=>{let e=Q0(t),n=Ee(M({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===W0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Qn.Emulated,styles:t.styles||Zt,_:null,schemas:t.schemas||null,tView:null,id:""});J0(n);let r=t.dependencies;return n.directiveDefs=a0(r,!1),n.pipeDefs=a0(r,!0),n.id=wT(n),n})}function CT(t){return Fi(t)||Y0(t)}function ET(t){return t!==null}function qi(t){return sc(()=>({type:t.type,bootstrap:t.bootstrap||Zt,declarations:t.declarations||Zt,imports:t.imports||Zt,exports:t.exports||Zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function s0(t,e){if(t==null)return Xo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Rt.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Rt.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Nt(t){return sc(()=>{let e=Q0(t);return J0(e),e})}function Fi(t){return t[US]||null}function Y0(t){return t[BS]||null}function X0(t){return t[GS]||null}function Z0(t){let e=Fi(t)||Y0(t)||X0(t);return e!==null?e.standalone:!1}function K0(t,e){let n=t[HS]||null;if(!n&&e===!0)throw new Error(`Type ${At(t)} does not have '\u0275mod' property.`);return n}function Q0(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Xo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:s0(t.inputs,e),outputs:s0(t.outputs),debugInfo:null}}function J0(t){t.features?.forEach(e=>e(t))}function a0(t,e){if(!t)return null;let n=e?X0:CT;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(ET)}function wT(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function cc(t){return{\u0275providers:t}}function DT(...t){return{\u0275providers:eC(!0,t),\u0275fromNgModule:!0}}function eC(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return ep(e,s=>{let a=s;cf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&tC(i,o),n}function tC(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];np(i,o=>{e(o,r)})}}function cf(t,e,n,r){if(t=Dt(t),!t)return!1;let i=null,o=e0(t),s=!o&&Fi(t);if(!o&&!s){let l=t.ngModule;if(o=e0(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)cf(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{ep(o.imports,c=>{cf(c,e,n,r)&&(u||=[],u.push(c))})}finally{}u!==void 0&&tC(u,e)}if(!a){let u=Yo(i)||(()=>new i);e({provide:i,useFactory:u,deps:Zt},i),e({provide:z0,useValue:i,multi:!0},i),e({provide:Zo,useValue:()=>fe(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=t;np(l,c=>{e(c,u)})}}else return!1;return i!==t&&t.providers!==void 0}function np(t,e){for(let n of t)j0(n)&&(n=n.\u0275providers),Array.isArray(n)?np(n,e):e(n)}var xT=be({provide:String,useValue:be});function nC(t){return t!==null&&typeof t=="object"&&xT in t}function IT(t){return!!(t&&t.useExisting)}function bT(t){return!!(t&&t.useFactory)}function Ko(t){return typeof t=="function"}function ST(t){return!!t.useClass}var dc=new Q(""),ku={},TT={},qh;function rp(){return qh===void 0&&(qh=new qu),qh}var cn=class{},fa=class extends cn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hf(e,s=>this.processProvider(s)),this.records.set($0,Ho(void 0,this)),i.has("environment")&&this.records.set(cn,Ho(void 0,this));let o=this.records.get(dc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(z0,Zt,oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ei(this),r=un(void 0),i;try{return e()}finally{ei(n),un(r)}}get(e,n=da,r=oe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(n0))return e[n0](this);r=lc(r);let i,o=ei(this),s=un(void 0);try{if(!(r&oe.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=OT(e)&&ac(e);u&&this.injectableDefInScope(u)?l=Ho(df(e),ku):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&oe.Self?rp():this.parent;return n=r&oe.Optional&&n===da?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[zu]=a[zu]||[]).unshift(At(e)),o)throw a;return eT(a,e,"R3InjectorError",this.source)}else throw a}finally{un(s),ei(o)}}resolveInjectorInitializers(){let e=me(null),n=ei(this),r=un(void 0),i;try{let o=this.get(Zo,Zt,oe.Self);for(let s of o)s()}finally{ei(n),un(r),me(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(At(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){e=Dt(e);let n=Ko(e)?e:Dt(e&&e.provide),r=AT(e);if(!Ko(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ho(void 0,ku,!0),i.factory=()=>lf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=me(null);try{return n.value===ku&&(n.value=TT,n.value=n.factory()),typeof n.value=="object"&&n.value&&NT(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Dt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function df(t){let e=ac(t),n=e!==null?e.factory:Yo(t);if(n!==null)return n;if(t instanceof Q)throw new B(204,!1);if(t instanceof Function)return MT(t);throw new B(204,!1)}function MT(t){if(t.length>0)throw new B(204,!1);let n=VS(t);return n!==null?()=>n.factory(t):()=>new t}function AT(t){if(nC(t))return Ho(void 0,t.useValue);{let e=rC(t);return Ho(e,ku)}}function rC(t,e,n){let r;if(Ko(t)){let i=Dt(t);return Yo(i)||df(i)}else if(nC(t))r=()=>Dt(t.useValue);else if(bT(t))r=()=>t.useFactory(...lf(t.deps||[]));else if(IT(t))r=()=>fe(Dt(t.useExisting));else{let i=Dt(t&&(t.useClass||t.provide));if(RT(t))r=()=>new i(...lf(t.deps));else return Yo(i)||df(i)}return r}function Ho(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function RT(t){return!!t.deps}function NT(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function OT(t){return typeof t=="function"||typeof t=="object"&&t instanceof Q}function hf(t,e){for(let n of t)Array.isArray(n)?hf(n,e):n&&j0(n)?hf(n.\u0275providers,e):e(n)}function Yi(t,e){t instanceof fa&&t.assertNotDestroyed();let n,r=ei(t),i=un(void 0);try{return e()}finally{ei(r),un(i)}}function iC(){return B0()!==void 0||KS()!=null}function PT(t){if(!iC())throw new B(-203,!1)}function LT(t){return typeof t=="function"}var Mr=0,re=1,H=2,ut=3,Tn=4,Mn=5,Yu=6,pa=7,Jn=8,Qo=9,er=10,xt=11,ga=12,l0=13,Ia=14,tr=15,ba=16,$o=17,Sr=18,hc=19,oC=20,ti=21,Vu=22,ki=23,Vi=25,sC=1;var ji=7,Xu=8,Jo=9,Kt=10,ip=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ip||{});function Pi(t){return Array.isArray(t)&&typeof t[sC]=="object"}function Ar(t){return Array.isArray(t)&&t[sC]===!0}function aC(t){return(t.flags&4)!==0}function fc(t){return t.componentOffset>-1}function lC(t){return(t.flags&1)===1}function ni(t){return!!t.template}function FT(t){return(t[H]&512)!==0}var ff=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function uC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Xi(){return cC}function cC(t){return t.type.prototype.ngOnChanges&&(t.setInput=VT),kT}Xi.ngInherit=!0;function kT(){let t=hC(this),e=t?.current;if(e){let n=t.previous;if(n===Xo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function VT(t,e,n,r,i){let o=this.declaredInputs[r],s=hC(t)||jT(t,{previous:Xo,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new ff(u&&u.currentValue,n,l===Xo),uC(t,e,i,n)}var dC="__ngSimpleChanges__";function hC(t){return t[dC]||null}function jT(t,e){return t[dC]=e}var u0=null;var Zn=function(t,e,n){u0?.(t,e,n)},UT="svg",BT="math",GT=!1;function HT(){return GT}function nr(t){for(;Array.isArray(t);)t=t[Mr];return t}function fC(t,e){return nr(e[t])}function An(t,e){return nr(e[t.index])}function pC(t,e){return t.data[e]}function ii(t,e){let n=e[t];return Pi(n)?n:n[Mr]}function op(t){return(t[H]&128)===128}function $T(t){return Ar(t[ut])}function c0(t,e){return e==null?null:t[e]}function gC(t){t[$o]=0}function zT(t){t[H]&1024||(t[H]|=1024,op(t)&&ma(t))}function sp(t){return!!(t[H]&9216||t[ki]?.dirty)}function pf(t){t[er].changeDetectionScheduler?.notify(1),sp(t)?ma(t):t[H]&64&&(HT()?(t[H]|=1024,ma(t)):t[er].changeDetectionScheduler?.notify())}function ma(t){t[er].changeDetectionScheduler?.notify();let e=ya(t);for(;e!==null&&!(e[H]&8192||(e[H]|=8192,!op(e)));)e=ya(e)}function mC(t,e){if((t[H]&256)===256)throw new B(911,!1);t[ti]===null&&(t[ti]=[]),t[ti].push(e)}function WT(t,e){if(t[ti]===null)return;let n=t[ti].indexOf(e);n!==-1&&t[ti].splice(n,1)}function ya(t){let e=t[ut];return Ar(e)?e[ut]:e}var ue={lFrame:DC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function qT(){return ue.lFrame.elementDepthCount}function YT(){ue.lFrame.elementDepthCount++}function XT(){ue.lFrame.elementDepthCount--}function yC(){return ue.bindingsEnabled}function ZT(){return ue.skipHydrationRootTNode!==null}function KT(t){return ue.skipHydrationRootTNode===t}function QT(){ue.skipHydrationRootTNode=null}function Le(){return ue.lFrame.lView}function ir(){return ue.lFrame.tView}function Sa(t){return ue.lFrame.contextLView=t,t[Jn]}function Ta(t){return ue.lFrame.contextLView=null,t}function dn(){let t=_C();for(;t!==null&&t.type===64;)t=t.parent;return t}function _C(){return ue.lFrame.currentTNode}function JT(){let t=ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function pc(t,e){let n=ue.lFrame;n.currentTNode=t,n.isParent=e}function vC(){return ue.lFrame.isParent}function eM(){ue.lFrame.isParent=!1}function tM(){let t=ue.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function nM(t){return ue.lFrame.bindingIndex=t}function CC(){return ue.lFrame.bindingIndex++}function rM(t){let e=ue.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function iM(){return ue.lFrame.inI18n}function oM(t,e){let n=ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,gf(e)}function sM(){return ue.lFrame.currentDirectiveIndex}function gf(t){ue.lFrame.currentDirectiveIndex=t}function aM(t){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function lM(){return ue.lFrame.currentQueryIndex}function ap(t){ue.lFrame.currentQueryIndex=t}function uM(t){let e=t[re];return e.type===2?e.declTNode:e.type===1?t[Mn]:null}function EC(t,e,n){if(n&oe.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&oe.Host);)if(i=uM(o),i===null||(o=o[Ia],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ue.lFrame=wC();return r.currentTNode=e,r.lView=t,!0}function lp(t){let e=wC(),n=t[re];ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function wC(){let t=ue.lFrame,e=t===null?null:t.child;return e===null?DC(t):e}function DC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function xC(){let t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var IC=xC;function up(){let t=xC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ns(){return ue.lFrame.selectedIndex}function Ui(t){ue.lFrame.selectedIndex=t}function cM(){let t=ue.lFrame;return pC(t.tView,t.selectedIndex)}function dM(){return ue.lFrame.currentNamespace}var bC=!0;function SC(){return bC}function TC(t){bC=t}function hM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=cC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function MC(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),c!=null&&(t.destroyHooks??=[]).push(n,c)}}function ju(t,e,n){AC(t,e,3,n)}function Uu(t,e,n,r){(t[H]&3)===n&&AC(t,e,n,r)}function Yh(t,e){let n=t[H];(n&3)===e&&(n&=16383,n+=1,t[H]=n)}function AC(t,e,n,r){let i=r!==void 0?t[$o]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[$o]+=65536),(a<o||o==-1)&&(fM(t,n,e,l),t[$o]=(t[$o]&4294901760)+l+2),l++}function d0(t,e){Zn(4,t,e);let n=me(null);try{e.call(t)}finally{me(n),Zn(5,t,e)}}function fM(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[H]>>14<t[$o]>>16&&(t[H]&3)===e&&(t[H]+=16384,d0(a,o)):d0(a,o)}var qo=-1,Bi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function pM(t){return t instanceof Bi}function gM(t){return(t.flags&8)!==0}function mM(t){return(t.flags&16)!==0}function RC(t){return t!==qo}function Zu(t){return t&32767}function yM(t){return t>>16}function Ku(t,e){let n=yM(t),r=e;for(;n>0;)r=r[Ia],n--;return r}var mf=!0;function h0(t){let e=mf;return mf=t,e}var _M=256,NC=_M-1,OC=5,vM=0,Kn={};function CM(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ca)&&(r=n[ca]),r==null&&(r=n[ca]=vM++);let i=r&NC,o=1<<i;e.data[t+(i>>OC)]|=o}function Qu(t,e){let n=PC(t,e);if(n!==-1)return n;let r=e[re];r.firstCreatePass&&(t.injectorIndex=e.length,Xh(r.data,t),Xh(e,null),Xh(r.blueprint,null));let i=cp(t,e),o=t.injectorIndex;if(RC(i)){let s=Zu(i),a=Ku(i,e),l=a[re].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function Xh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function PC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function cp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=jC(i),r===null)return qo;if(n++,i=i[Ia],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return qo}function yf(t,e,n){CM(t,e,n)}function LC(t,e,n){if(n&oe.Optional||t!==void 0)return t;Jf(e,"NodeInjector")}function FC(t,e,n,r){if(n&oe.Optional&&r===void 0&&(r=null),!(n&(oe.Self|oe.Host))){let i=t[Qo],o=un(void 0);try{return i?i.get(e,r,n&oe.Optional):G0(e,r,n&oe.Optional)}finally{un(o)}}return LC(r,e,n)}function kC(t,e,n,r=oe.Default,i){if(t!==null){if(e[H]&2048&&!(r&oe.Self)){let s=xM(t,e,n,r,Kn);if(s!==Kn)return s}let o=VC(t,e,n,r,Kn);if(o!==Kn)return o}return FC(e,n,r,i)}function VC(t,e,n,r,i){let o=wM(n);if(typeof o=="function"){if(!EC(e,t,r))return r&oe.Host?LC(i,n,r):FC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&oe.Optional))Jf(n);else return s}finally{IC()}}else if(typeof o=="number"){let s=null,a=PC(t,e),l=qo,u=r&oe.Host?e[tr][Mn]:null;for((a===-1||r&oe.SkipSelf)&&(l=a===-1?cp(t,e):e[a+8],l===qo||!p0(r,!1)?a=-1:(s=e[re],a=Zu(l),e=Ku(l,e)));a!==-1;){let c=e[re];if(f0(o,a,c.data)){let d=EM(a,e,n,s,r,u);if(d!==Kn)return d}l=e[a+8],l!==qo&&p0(r,e[re].data[a+8]===u)&&f0(o,a,e)?(s=c,a=Zu(l),e=Ku(l,e)):a=-1}}return i}function EM(t,e,n,r,i,o){let s=e[re],a=s.data[t+8],l=r==null?fc(a)&&mf:r!=s&&(a.type&3)!==0,u=i&oe.Host&&o===a,c=Bu(a,s,n,l,u);return c!==null?Gi(e,s,c,a):Kn}function Bu(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,u=t.directiveEnd,c=o>>20,d=r?a:a+c,h=i?a+c:u;for(let f=d;f<h;f++){let g=s[f];if(f<l&&n===g||f>=l&&g.type===n)return f}if(i){let f=s[l];if(f&&ni(f)&&f.type===n)return l}return null}function Gi(t,e,n,r){let i=t[n],o=e.data;if(pM(i)){let s=i;s.resolving&&zS($S(o[n]));let a=h0(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?un(s.injectImpl):null,c=EC(t,r,oe.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&hM(n,o[n],e)}finally{u!==null&&un(u),h0(a),s.resolving=!1,IC()}}return i}function wM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ca)?t[ca]:void 0;return typeof e=="number"?e>=0?e&NC:DM:e}function f0(t,e,n){let r=1<<t;return!!(n[e+(t>>OC)]&r)}function p0(t,e){return!(t&oe.Self)&&!(t&oe.Host&&e)}var Li=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return kC(this._tNode,this._lView,e,lc(r),n)}};function DM(){return new Li(dn(),Le())}function rs(t){return sc(()=>{let e=t.prototype.constructor,n=e[$u]||_f(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[$u]||_f(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function _f(t){return L0(t)?()=>{let e=_f(Dt(t));return e&&e()}:Yo(t)}function xM(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[H]&2048&&!(s[H]&512);){let a=VC(o,s,n,r|oe.Self,Kn);if(a!==Kn)return a;let l=o.parent;if(!l){let u=s[oC];if(u){let c=u.get(n,Kn,r);if(c!==Kn)return c}l=jC(s),s=s[Ia]}o=l}return i}function jC(t){let e=t[re],n=e.type;return n===2?e.declTNode:n===1?t[Mn]:null}function g0(t,e=null,n=null,r){let i=UC(t,e,n,r);return i.resolveInjectorInitializers(),i}function UC(t,e=null,n=null,r,i=new Set){let o=[n||Zt,DT(t)];return r=r||(typeof t=="object"?void 0:At(t)),new fa(o,e||rp(),r||null,i)}var Zi=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return g0({name:""},i,r,"");{let o=r.name??"";return g0({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=da,e.NULL=new qu,e.\u0275prov=q({token:e,providedIn:"any",factory:()=>fe($0)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var IM="ngOriginalError";function Zh(t){return t[IM]}var rr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Zh(e);for(;n&&Zh(n);)n=Zh(n);return n||null}},BC=new Q("",{providedIn:"root",factory:()=>R(rr).handleError.bind(void 0)}),dp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=bM,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),vf=class extends dp{constructor(e){super(),this._lView=e}onDestroy(e){return mC(this._lView,e),()=>WT(this._lView,e)}};function bM(){return new vf(Le())}function SM(){return is(dn(),Le())}function is(t,e){return new Rn(An(t,e))}var Rn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=SM;let t=e;return t})();function TM(t){return t instanceof Rn?t.nativeElement:t}var Cf=class extends wt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,iC()&&(this.destroyRef=R(dp,{optional:!0})??void 0)}emit(e){let n=me(null);try{super.next(e)}finally{me(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=Kh(o),i&&(i=Kh(i)),s&&(s=Kh(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ke&&e.add(a),a}};function Kh(t){return e=>{setTimeout(t,void 0,e)}}var lt=Cf;function MM(){return this._results[Symbol.iterator]()}var Ef=class t{get changes(){return this._changes??=new lt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=MM)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=rT(e);(this._changesDetected=!nT(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function GC(t){return(t.flags&128)===128}var HC=new Map,AM=0;function RM(){return AM++}function NM(t){HC.set(t[hc],t)}function OM(t){HC.delete(t[hc])}var m0="__ngContext__";function es(t,e){Pi(e)?(t[m0]=e[hc],NM(e)):t[m0]=e}function $C(t){return WC(t[ga])}function zC(t){return WC(t[Tn])}function WC(t){for(;t!==null&&!Ar(t);)t=t[Tn];return t}var wf;function qC(t){wf=t}function PM(){if(wf!==void 0)return wf;if(typeof document<"u")return document;throw new B(210,!1)}var hp=new Q("",{providedIn:"root",factory:()=>LM}),LM="ng",fp=new Q(""),os=new Q("",{providedIn:"platform",factory:()=>"unknown"});var pp=new Q("",{providedIn:"root",factory:()=>PM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var FM="h",kM="b";var VM=()=>null;function gp(t,e,n=!1){return VM(t,e,n)}var YC=!1,jM=new Q("",{providedIn:"root",factory:()=>YC});var Df=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${LS})`}};function mp(t){return t instanceof Df?t.changingThisBreaksApplicationSecurity:t}function XC(t){return t instanceof Function?t():t}var Tr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Tr||{}),UM;function yp(t,e){return UM(t,e)}function zo(t,e,n,r,i){if(r!=null){let o,s=!1;Ar(r)?o=r:Pi(r)&&(s=!0,r=r[Mr]);let a=nr(r);t===0&&n!==null?i==null?eE(e,n,a):Ju(e,n,a,i||null,!0):t===1&&n!==null?Ju(e,n,a,i||null,!0):t===2?r1(e,a,s):t===3&&e.destroyNode(a),o!=null&&o1(e,t,o,n,i)}}function BM(t,e){return t.createText(e)}function GM(t,e,n){t.setValue(e,n)}function ZC(t,e,n){return t.createElement(e,n)}function HM(t,e){KC(t,e),e[Mr]=null,e[Mn]=null}function $M(t,e,n,r,i,o){r[Mr]=i,r[Mn]=e,gc(t,r,n,1,i,o)}function KC(t,e){e[er].changeDetectionScheduler?.notify(1),gc(t,e,e[xt],2,null,null)}function zM(t){let e=t[ga];if(!e)return Qh(t[re],t);for(;e;){let n=null;if(Pi(e))n=e[ga];else{let r=e[Kt];r&&(n=r)}if(!n){for(;e&&!e[Tn]&&e!==t;)Pi(e)&&Qh(e[re],e),e=e[ut];e===null&&(e=t),Pi(e)&&Qh(e[re],e),n=e&&e[Tn]}e=n}}function WM(t,e,n,r){let i=Kt+r,o=n.length;r>0&&(n[i-1][Tn]=e),r<o-Kt?(e[Tn]=n[i],H0(n,Kt+r,e)):(n.push(e),e[Tn]=null),e[ut]=n;let s=e[ba];s!==null&&n!==s&&qM(s,e);let a=e[Sr];a!==null&&a.insertView(t),pf(e),e[H]|=128}function qM(t,e){let n=t[Jo],i=e[ut][ut][tr];e[tr]!==i&&(t[H]|=ip.HasTransplantedViews),n===null?t[Jo]=[e]:n.push(e)}function QC(t,e){let n=t[Jo],r=n.indexOf(e);n.splice(r,1)}function xf(t,e){if(t.length<=Kt)return;let n=Kt+e,r=t[n];if(r){let i=r[ba];i!==null&&i!==t&&QC(i,r),e>0&&(t[n-1][Tn]=r[Tn]);let o=Wu(t,Kt+e);HM(r[re],r);let s=o[Sr];s!==null&&s.detachView(o[re]),r[ut]=null,r[Tn]=null,r[H]&=-129}return r}function JC(t,e){if(!(e[H]&256)){let n=e[xt];n.destroyNode&&gc(t,e,n,3,null,null),zM(e)}}function Qh(t,e){if(e[H]&256)return;let n=me(null);try{e[H]&=-129,e[H]|=256,e[ki]&&Sh(e[ki]),XM(t,e),YM(t,e),e[re].type===1&&e[xt].destroy();let r=e[ba];if(r!==null&&Ar(e[ut])){r!==e[ut]&&QC(r,e);let i=e[Sr];i!==null&&i.detachView(t)}OM(e)}finally{me(n)}}function YM(t,e){let n=t.cleanup,r=e[pa];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[pa]=null);let i=e[ti];if(i!==null){e[ti]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function XM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Bi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Zn(4,a,l);try{l.call(a)}finally{Zn(5,a,l)}}else{Zn(4,i,o);try{o.call(i)}finally{Zn(5,i,o)}}}}}function ZM(t,e,n){return KM(t,e.parent,n)}function KM(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Mr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Qn.None||o===Qn.Emulated)return null}return An(r,n)}}function Ju(t,e,n,r,i){t.insertBefore(e,n,r,i)}function eE(t,e,n){t.appendChild(e,n)}function y0(t,e,n,r,i){r!==null?Ju(t,e,n,r,i):eE(t,e,n)}function QM(t,e,n,r){t.removeChild(e,n,r)}function _p(t,e){return t.parentNode(e)}function JM(t,e){return t.nextSibling(e)}function e1(t,e,n){return n1(t,e,n)}function t1(t,e,n){return t.type&40?An(t,n):null}var n1=t1,_0;function tE(t,e,n,r){let i=ZM(t,r,e),o=e[xt],s=r.parent||e[Mn],a=e1(s,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)y0(o,i,n[l],a,!1);else y0(o,i,n,a,!1);_0!==void 0&&_0(o,r,e,n,i)}function Gu(t,e){if(e!==null){let n=e.type;if(n&3)return An(e,t);if(n&4)return If(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Gu(t,r);{let i=t[e.index];return Ar(i)?If(-1,i):nr(i)}}else{if(n&32)return yp(e,t)()||nr(t[e.index]);{let r=nE(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ya(t[tr]);return Gu(i,r)}else return Gu(t,e.next)}}}return null}function nE(t,e){if(e!==null){let r=t[tr][Mn],i=e.projection;return r.projection[i]}return null}function If(t,e){let n=Kt+t+1;if(n<e.length){let r=e[n],i=r[re].firstChild;if(i!==null)return Gu(r,i)}return e[ji]}function r1(t,e,n){let r=_p(t,e);r&&QM(t,r,e,n)}function vp(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],l=n.type;if(s&&e===0&&(a&&es(nr(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)vp(t,e,n.child,r,i,o,!1),zo(e,t,i,a,o);else if(l&32){let u=yp(n,r),c;for(;c=u();)zo(e,t,i,c,o);zo(e,t,i,a,o)}else l&16?i1(t,e,r,n,i,o):zo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function gc(t,e,n,r,i,o){vp(n,r,t.firstChild,e,i,o,!1)}function i1(t,e,n,r,i,o){let s=n[tr],l=s[Mn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let c=l[u];zo(e,t,i,c,o)}else{let u=l,c=s[ut];GC(r)&&(u.flags|=128),vp(t,e,u,c,i,o,!0)}}function o1(t,e,n,r,i){let o=n[ji],s=nr(n);o!==s&&zo(e,t,r,o,i);for(let a=Kt;a<n.length;a++){let l=n[a];gc(l[re],l,t,e,r,o)}}function s1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Tr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Tr.Important),t.setStyle(n,r,i,o))}}function a1(t,e,n){t.setAttribute(e,"style",n)}function rE(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function iE(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&uf(t,e,r),i!==null&&rE(t,e,i),o!==null&&a1(t,e,o)}var Ki={};function Nn(t=1){oE(ir(),Le(),ns()+t,!1)}function oE(t,e,n,r){if(!r)if((e[H]&3)===3){let o=t.preOrderCheckHooks;o!==null&&ju(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Uu(e,o,0,n)}Ui(n)}function Fe(t,e=oe.Default){let n=Le();if(n===null)return fe(t,e);let r=dn();return kC(r,n,Dt(t),e)}function sE(t,e,n,r,i,o){let s=me(null);try{let a=null;i&Rt.SignalBased&&(a=e[r][Yn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Rt.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):uC(e,a,r,o)}finally{me(s)}}function l1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ui(~i);else{let o=i,s=n[++r],a=n[++r];oM(s,o);let l=e[o];a(2,l)}}}finally{Ui(-1)}}function mc(t,e,n,r,i,o,s,a,l,u,c){let d=e.blueprint.slice();return d[Mr]=i,d[H]=r|4|128|8|64,(u!==null||t&&t[H]&2048)&&(d[H]|=2048),gC(d),d[ut]=d[Ia]=t,d[Jn]=n,d[er]=s||t&&t[er],d[xt]=a||t&&t[xt],d[Qo]=l||t&&t[Qo]||null,d[Mn]=o,d[hc]=RM(),d[Yu]=c,d[oC]=u,d[tr]=e.type==2?t[tr]:d,d}function Cp(t,e,n,r,i){let o=t.data[e];if(o===null)o=u1(t,e,n,r,i),iM()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=JT();o.injectorIndex=s===null?-1:s.injectorIndex}return pc(o,!0),o}function u1(t,e,n,r,i){let o=_C(),s=vC(),a=s?o:o&&o.parent,l=t.data[e]=y1(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function aE(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function lE(t,e,n,r,i){let o=ns(),s=r&2;try{Ui(-1),s&&e.length>Vi&&oE(t,e,Vi,!1),Zn(s?2:0,i),n(r,i)}finally{Ui(o),Zn(s?3:1,i)}}function uE(t,e,n){if(aC(e)){let r=me(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{me(r)}}}function c1(t,e,n){yC()&&(I1(t,e,n,An(n,e)),(n.flags&64)===64&&fE(t,e,n))}function d1(t,e,n=An){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function cE(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=dE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function dE(t,e,n,r,i,o,s,a,l,u,c){let d=Vi+r,h=d+i,f=h1(d,h),g=typeof u=="function"?u():u;return f[re]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:c}}function h1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ki);return n}function f1(t,e,n,r){let o=r.get(jM,YC)||n===Qn.ShadowDom,s=t.selectRootElement(e,o);return p1(s),s}function p1(t){g1(t)}var g1=()=>null;function m1(t,e,n,r){let i=gE(e);i.push(n),t.firstCreatePass&&mE(t).push(r,i.length-1)}function y1(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return ZT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function v0(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=Rt.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?C0(r,n,u,a,l):C0(r,n,u,a)}return r}function C0(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function _1(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],l=null,u=null;for(let c=r;c<i;c++){let d=o[c],h=n?n.get(d):null,f=h?h.inputs:null,g=h?h.outputs:null;l=v0(0,d.inputs,c,l,f),u=v0(1,d.outputs,c,u,g);let y=l!==null&&s!==null&&!tp(e)?P1(l,c,s):null;a.push(y)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function v1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function C1(t,e,n,r,i,o,s,a){let l=An(e,n),u=e.inputs,c;!a&&u!=null&&(c=u[r])?(wp(t,n,c,r,i),fc(e)&&E1(n,e.index)):e.type&3?(r=v1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function E1(t,e){let n=ii(e,t);n[H]&16||(n[H]|=64)}function w1(t,e,n,r){if(yC()){let i=r===null?null:{"":-1},o=S1(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&hE(t,e,n,s,i,a),i&&T1(n,r,i)}n.mergedAttrs=ha(n.mergedAttrs,n.attrs)}function hE(t,e,n,r,i,o){for(let u=0;u<r.length;u++)yf(Qu(n,e),t,r[u].type);A1(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let c=r[u];c.providersResolver&&c.providersResolver(c)}let s=!1,a=!1,l=aE(t,e,r.length,null);for(let u=0;u<r.length;u++){let c=r[u];n.mergedAttrs=ha(n.mergedAttrs,c.hostAttrs),R1(t,n,e,l,c),M1(l,c,i),c.contentQueries!==null&&(n.flags|=4),(c.hostBindings!==null||c.hostAttrs!==null||c.hostVars!==0)&&(n.flags|=64);let d=c.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}_1(t,n,o)}function D1(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;x1(s)!=a&&s.push(a),s.push(n,r,o)}}function x1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function I1(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;fc(n)&&N1(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Qu(n,e),es(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let l=t.data[a],u=Gi(e,t,a,n);if(es(u,e),s!==null&&O1(e,a-i,u,l,n,s),ni(l)){let c=ii(n.index,e);c[Jn]=Gi(e,t,a,n)}}}function fE(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=sM();try{Ui(o);for(let a=r;a<i;a++){let l=t.data[a],u=e[a];gf(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&b1(l,u)}}finally{Ui(-1),gf(s)}}function b1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function S1(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(pT(e,s.selectors,!1))if(r||(r=[]),ni(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;bf(t,e,l)}else r.unshift(s),bf(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function bf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function T1(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new B(-301,!1);r.push(e[i],o)}}}function M1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ni(e)&&(n[""]=t)}}function A1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function R1(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Yo(i.type,!0)),s=new Bi(o,ni(i),Fe);t.blueprint[r]=s,n[r]=s,D1(t,e,r,aE(t,n,i.hostVars,Ki),i)}function N1(t,e,n){let r=An(e,t),i=cE(n),o=t[er].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Ep(t,mc(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function O1(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],c=s[a++],d=s[a++];sE(r,n,l,u,c,d)}}function P1(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function L1(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function pE(t,e){let n=t.contentQueries;if(n!==null){let r=me(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];ap(o),a.contentQueries(2,e[s],s)}}}finally{me(r)}}}function Ep(t,e){return t[ga]?t[l0][Tn]=e:t[ga]=e,t[l0]=e,e}function Sf(t,e,n){ap(0);let r=me(null);try{e(t,n)}finally{me(r)}}function gE(t){return t[pa]||(t[pa]=[])}function mE(t){return t.cleanup||(t.cleanup=[])}function yE(t,e){let n=t[Qo],r=n?n.get(rr,null):null;r&&r.handleError(e)}function wp(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],u=e[s],c=t.data[s];sE(c,u,r,a,l,i)}}function F1(t,e,n){let r=fC(e,t);GM(t[xt],r,n)}function k1(t,e){let n=ii(e,t),r=n[re];V1(r,n);let i=n[Mr];i!==null&&n[Yu]===null&&(n[Yu]=gp(i,n[Qo])),Dp(r,n,n[Jn])}function V1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Dp(t,e,n){lp(e);try{let r=t.viewQuery;r!==null&&Sf(1,r,n);let i=t.template;i!==null&&lE(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Sr]?.finishViewCreation(t),t.staticContentQueries&&pE(t,e),t.staticViewQueries&&Sf(2,t.viewQuery,n);let o=t.components;o!==null&&j1(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[H]&=-5,up()}}function j1(t,e){for(let n=0;n<e.length;n++)k1(t,e[n])}function U1(t,e,n,r){let i=me(null);try{let o=e.tView,a=t[H]&4096?4096:16,l=mc(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];l[ba]=u;let c=t[Sr];return c!==null&&(l[Sr]=c.createEmbeddedView(o)),Dp(o,l,n),l}finally{me(i)}}function E0(t,e){return!e||e.firstChild===null||GC(t)}function B1(t,e,n,r=!0){let i=e[re];if(WM(i,e,t,n),r){let s=If(n,t),a=e[xt],l=_p(a,t[ji]);l!==null&&$M(i,t[Mn],a,e,l,s)}let o=e[Yu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ec(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(nr(o)),Ar(o)&&G1(o,r);let s=n.type;if(s&8)ec(t,e,n.child,r);else if(s&32){let a=yp(n,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=nE(e,n);if(Array.isArray(a))r.push(...a);else{let l=ya(e[tr]);ec(l[re],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function G1(t,e){for(let n=Kt;n<t.length;n++){let r=t[n],i=r[re].firstChild;i!==null&&ec(r[re],r,i,e)}t[ji]!==t[Mr]&&e.push(t[ji])}var _E=[];function H1(t){return t[ki]??$1(t)}function $1(t){let e=_E.pop()??Object.create(W1);return e.lView=t,e}function z1(t){t.lView[ki]!==t&&(t.lView=null,_E.push(t))}var W1=Ee(M({},oa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ma(t.lView)},consumerOnSignalRead(){this.lView[ki]=this}}),vE=100;function CE(t,e=!0,n=0){let r=t[er],i=r.rendererFactory,o=!1;o||i.begin?.();try{q1(t,n)}catch(s){throw e&&yE(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function q1(t,e){Tf(t,e);let n=0;for(;sp(t);){if(n===vE)throw new B(103,!1);n++,Tf(t,1)}}function Y1(t,e,n,r){let i=e[H];if((i&256)===256)return;let o=!1;!o&&e[er].inlineEffectRunner?.flush(),lp(e);let s=null,a=null;!o&&X1(t)&&(a=H1(e),s=au(a));try{gC(e),nM(t.bindingStartIndex),n!==null&&lE(t,e,n,2,r);let l=(i&3)===3;if(!o)if(l){let d=t.preOrderCheckHooks;d!==null&&ju(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Uu(e,d,0,null),Yh(e,0)}if(Z1(e),EE(e,0),t.contentQueries!==null&&pE(t,e),!o)if(l){let d=t.contentCheckHooks;d!==null&&ju(e,d)}else{let d=t.contentHooks;d!==null&&Uu(e,d,1),Yh(e,1)}l1(t,e);let u=t.components;u!==null&&DE(e,u,0);let c=t.viewQuery;if(c!==null&&Sf(2,c,r),!o)if(l){let d=t.viewCheckHooks;d!==null&&ju(e,d)}else{let d=t.viewHooks;d!==null&&Uu(e,d,2),Yh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Vu]){for(let d of e[Vu])d();e[Vu]=null}o||(e[H]&=-73)}catch(l){throw ma(e),l}finally{a!==null&&(lu(a,s),z1(a)),up()}}function X1(t){return t.type!==2}function EE(t,e){for(let n=$C(t);n!==null;n=zC(n))for(let r=Kt;r<n.length;r++){let i=n[r];wE(i,e)}}function Z1(t){for(let e=$C(t);e!==null;e=zC(e)){if(!(e[H]&ip.HasTransplantedViews))continue;let n=e[Jo];for(let r=0;r<n.length;r++){let i=n[r],o=i[ut];zT(i)}}}function K1(t,e,n){let r=ii(e,t);wE(r,n)}function wE(t,e){op(t)&&Tf(t,e)}function Tf(t,e){let r=t[re],i=t[H],o=t[ki],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&uu(o)),o&&(o.dirty=!1),t[H]&=-9217,s)Y1(r,t,r.template,t[Jn]);else if(i&8192){EE(t,1);let a=r.components;a!==null&&DE(t,a,1)}}function DE(t,e,n){for(let r=0;r<e.length;r++)K1(t,e[r],n)}function xp(t){for(t[er].changeDetectionScheduler?.notify();t;){t[H]|=64;let e=ya(t);if(FT(t)&&!e)return t;t=e}return null}var Hi=class{get rootNodes(){let e=this._lView,n=e[re];return ec(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jn]}set context(e){this._lView[Jn]=e}get destroyed(){return(this._lView[H]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ut];if(Ar(e)){let n=e[Xu],r=n?n.indexOf(this):-1;r>-1&&(xf(e,r),Wu(n,r))}this._attachedToViewContainer=!1}JC(this._lView[re],this._lView)}onDestroy(e){mC(this._lView,e)}markForCheck(){xp(this._cdRefInjectingView||this._lView)}detach(){this._lView[H]&=-129}reattach(){pf(this._lView),this._lView[H]|=128}detectChanges(){this._lView[H]|=1024,CE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,KC(this._lView[re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e,pf(this._lView)}},_a=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=eA;let t=e;return t})(),Q1=_a,J1=class extends Q1{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=U1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Hi(i)}};function eA(){return Ip(dn(),Le())}function Ip(t,e){return t.type&4?new J1(e,t,is(t,e)):null}var W3=new RegExp(`^(\\d+)*(${kM}|${FM})*(.*)`);var tA=()=>null;function w0(t,e){return tA(t,e)}var Mf=class{},Af=class{},tc=class{};function nA(t){let e=Error(`No component factory found for ${At(t)}.`);return e[rA]=t,e}var rA="ngComponent";var Rf=class{resolveComponentFactory(e){throw nA(e)}},yc=(()=>{let e=class e{};e.NULL=new Rf;let t=e;return t})(),va=class{},Qi=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>iA();let t=e;return t})();function iA(){let t=Le(),e=dn(),n=ii(e.index,t);return(Pi(n)?n:t)[xt]}var oA=(()=>{let e=class e{};e.\u0275prov=q({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Jh={};var D0=new Set;function _c(t){D0.has(t)||(D0.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function x0(...t){}function sA(){let t=typeof ua.requestAnimationFrame=="function",e=ua[t?"requestAnimationFrame":"setTimeout"],n=ua[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var $e=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lt(!1),this.onMicrotaskEmpty=new lt(!1),this.onStable=new lt(!1),this.onError=new lt(!1),typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=sA().nativeRequestAnimationFrame,uA(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new B(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,aA,x0,x0);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},aA={};function bp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function lA(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ua,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Nf(t),t.isCheckStableRunning=!0,bp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Nf(t))}function uA(t){let e=()=>{lA(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(cA(a))return n.invokeTask(i,o,s,a);try{return I0(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),b0(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return I0(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),b0(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Nf(t),bp(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Nf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function I0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function b0(t){t._nesting--,bp(t)}function cA(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var xE=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=q({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Of(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Qv(i,a);else if(o==2){let l=a,u=e[++s];r=Qv(r,l+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var nc=class extends yc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Fi(e);return new Ca(n,this.ngModule)}};function S0(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function dA(t){let e=t.toLowerCase();return e==="svg"?UT:e==="math"?BT:null}var Pf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=lc(r);let i=this.injector.get(e,Jh,r);return i!==Jh||n===Jh?i:this.parentInjector.get(e,n,r)}},Ca=class extends tc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=S0(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return S0(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=_T(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=me(null);try{i=i||this.ngModule;let s=i instanceof cn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Pf(e,s):e,l=a.get(va,null);if(l===null)throw new B(407,!1);let u=a.get(oA,null),c=a.get(xE,null),d=a.get(Mf,null),h={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:d},f=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",y=r?f1(f,r,this.componentDef.encapsulation,a):ZC(f,g,dA(g)),p=512;this.componentDef.signals?p|=4096:this.componentDef.onPush||(p|=16);let m=null;y!==null&&(m=gp(y,a,!0));let _=dE(0,null,null,1,0,null,null,null,null,null,null),C=mc(null,_,null,p,null,null,h,f,a,null,m);lp(C);let v,E;try{let w=this.componentDef,x,D=null;w.findHostDirectiveDefs?(x=[],D=new Map,w.findHostDirectiveDefs(w,x,D),x.push(w)):x=[w];let I=hA(C,y),N=fA(I,y,w,x,C,h,f);E=pC(_,Vi),y&&mA(f,w,y,r),n!==void 0&&yA(E,this.ngContentSelectors,n),v=gA(N,w,x,D,C,[_A]),Dp(_,C,null)}finally{up()}return new Lf(this.componentType,v,is(E,C),C,E)}finally{me(o)}}},Lf=class extends Af{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Hi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;wp(o[re],o,i,e,n),this.previousInputValues.set(e,n);let s=ii(this._tNode.index,o);xp(s)}}get injector(){return new Li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function hA(t,e){let n=t[re],r=Vi;return t[r]=e,Cp(n,r,2,"#host",null)}function fA(t,e,n,r,i,o,s){let a=i[re];pA(r,t,e,s);let l=null;e!==null&&(l=gp(e,i[Qo]));let u=o.rendererFactory.createRenderer(e,n),c=16;n.signals?c=4096:n.onPush&&(c=64);let d=mc(i,cE(n),null,c,i[t.index],t,o,u,null,null,l);return a.firstCreatePass&&bf(a,t,r.length-1),Ep(i,d),i[t.index]=d}function pA(t,e,n,r){for(let i of t)e.mergedAttrs=ha(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Of(e,e.mergedAttrs,!0),n!==null&&iE(r,n,e))}function gA(t,e,n,r,i,o){let s=dn(),a=i[re],l=An(s,i);hE(a,i,s,n,null,r);for(let c=0;c<n.length;c++){let d=s.directiveStart+c,h=Gi(i,a,d,s);es(h,i)}fE(a,i,s),l&&es(l,i);let u=Gi(i,a,s.directiveStart+s.componentOffset,s);if(t[Jn]=i[Jn]=u,o!==null)for(let c of o)c(u,e);return uE(a,s,i),u}function mA(t,e,n,r){if(r)uf(t,n,["ng-version","17.3.1"]);else{let{attrs:i,classes:o}=vT(e.selectors[0]);i&&uf(t,n,i),o&&o.length>0&&rE(t,n,o.join(" "))}}function yA(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function _A(){let t=dn();MC(Le()[re],t)}var ss=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=vA;let t=e;return t})();function vA(){let t=dn();return bE(t,Le())}var CA=ss,IE=class extends CA{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return is(this._hostTNode,this._hostLView)}get injector(){return new Li(this._hostTNode,this._hostLView)}get parentInjector(){let e=cp(this._hostTNode,this._hostLView);if(RC(e)){let n=Ku(e,this._hostLView),r=Zu(e),i=n[re].data[r+8];return new Li(i,n)}else return new Li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=T0(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Kt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=w0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,E0(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!LT(e),a;if(s)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let l=s?e:new Ca(Fi(e)),u=r||this.parentInjector;if(!o&&l.ngModule==null){let y=(s?u:this.parentInjector).get(cn,null);y&&(o=y)}let c=Fi(l.componentType??{}),d=w0(this._lContainer,c?.id??null),h=d?.firstChild??null,f=l.create(u,i,h,o);return this.insertImpl(f.hostView,a,E0(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if($T(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ut],u=new IE(l,l[Mn],l[ut]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return B1(s,i,o,r),e.attachToViewContainerRef(),H0(ef(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=T0(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=xf(this._lContainer,n);r&&(Wu(ef(this._lContainer),n),JC(r[re],r))}detach(e){let n=this._adjustIndex(e,-1),r=xf(this._lContainer,n);return r&&Wu(ef(this._lContainer),n)!=null?new Hi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function T0(t){return t[Xu]}function ef(t){return t[Xu]||(t[Xu]=[])}function bE(t,e){let n,r=e[t.index];return Ar(r)?n=r:(n=L1(r,e,null,t),e[t.index]=n,Ep(e,n)),wA(n,e,t,r),new IE(n,t,e)}function EA(t,e){let n=t[xt],r=n.createComment(""),i=An(e,t),o=_p(n,i);return Ju(n,o,r,JM(n,i),!1),r}var wA=DA;function DA(t,e,n,r){if(t[ji])return;let i;n.type&8?i=nr(r):i=EA(e,n),t[ji]=i}var Ff=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},kf=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)ME(e,n).matches!==null&&this.queries[n].setDirty()}},Vf=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=AA(e):this.predicate=e}},jf=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Uf=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,xA(n,o)),this.matchTNodeWithReadOption(e,n,Bu(n,e,o,!1,!1))}else r===_a?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Bu(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Rn||i===ss||i===_a&&n.type&4)this.addMatch(n.index,-2);else{let o=Bu(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function xA(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function IA(t,e){return t.type&11?is(t,e):t.type&4?Ip(t,e):null}function bA(t,e,n,r){return n===-1?IA(e,t):n===-2?SA(t,e,r):Gi(t,t[re],n,e)}function SA(t,e,n){if(n===Rn)return is(e,t);if(n===_a)return Ip(e,t);if(n===ss)return bE(e,t)}function SE(t,e,n,r){let i=e[Sr].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let c=o[u];a.push(bA(e,c,s[l+1],n.metadata.read))}}i.matches=a}return i.matches}function Bf(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=SE(t,e,i,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let u=o[a+1],c=e[-l];for(let d=Kt;d<c.length;d++){let h=c[d];h[ba]===h[ut]&&Bf(h[re],h,u,r)}if(c[Jo]!==null){let d=c[Jo];for(let h=0;h<d.length;h++){let f=d[h];Bf(f[re],f,u,r)}}}}}return r}function TE(t,e){return t[Sr].queries[e].queryList}function TA(t,e,n){let r=new Ef((n&4)===4);return m1(t,e,r,r.destroy),(e[Sr]??=new kf).queries.push(new Ff(r))-1}function MA(t,e,n){let r=ir();return r.firstCreatePass&&(RA(r,new Vf(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),TA(r,Le(),e)}function AA(t){return t.split(",").map(e=>e.trim())}function RA(t,e,n){t.queries===null&&(t.queries=new jf),t.queries.track(new Uf(e,n))}function ME(t,e){return t.queries.getByIndex(e)}function NA(t,e){let n=t[re],r=ME(n,e);return r.crossesNgTemplate?Bf(n,t,e,[]):SE(n,t,r,e)}function Sp(t,e){_c("NgSignals");let n=xv(t),r=n[Yn];return e?.equal&&(r.equal=e.equal),n.set=i=>Th(r,i),n.update=i=>Iv(r,i),n.asReadonly=OA.bind(n),n}function OA(){let t=this[Yn];if(t.readonlyFn===void 0){let e=()=>this();e[Yn]=t,t.readonlyFn=e}return t.readonlyFn}function AE(t,e){let n,r=Cv(()=>{n._dirtyCounter();let i=kA(n,t);if(e&&i===void 0)throw new B(-951,!1);return i});return n=r[Yn],n._dirtyCounter=Sp(0),n._flatValue=void 0,r}function PA(){return AE(!0,!1)}function LA(){return AE(!0,!0)}function FA(t,e){let n=t[Yn];n._lView=Le(),n._queryIndex=e,n._queryList=TE(n._lView,e),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function kA(t,e){let n=t._lView,r=t._queryIndex;if(n===void 0||r===void 0||n[H]&4)return e?void 0:Zt;let i=TE(n,r),o=NA(n,r);return i.reset(o,TM),e?i.first:i._changesDetected||t._flatValue===void 0?t._flatValue=i.toArray():t._flatValue}function M0(t,e){return PA()}function VA(t,e){return LA()}var RE=(M0.required=VA,M0);function jA(t){return Object.getPrototypeOf(t.prototype).constructor}function Rr(t){let e=jA(t.type),n=!0,r=[t];for(;e;){let i;if(ni(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Lu(t.inputs),s.inputTransforms=Lu(t.inputTransforms),s.declaredInputs=Lu(t.declaredInputs),s.outputs=Lu(t.outputs);let a=i.hostBindings;a&&$A(t,a);let l=i.viewQuery,u=i.contentQueries;if(l&&GA(t,l),u&&HA(t,u),UA(t,i),FS(t.outputs,i.outputs),ni(i)&&i.data.animation){let c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Rr&&(n=!1)}}e=Object.getPrototypeOf(e)}BA(r)}function UA(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function BA(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ha(i.hostAttrs,n=ha(n,i.hostAttrs))}}function Lu(t){return t===Xo?{}:t===Zt?[]:t}function GA(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function HA(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function $A(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var ri=class{},Ea=class{};var Gf=class extends ri{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new nc(this);let i=K0(e);this._bootstrapComponents=XC(i.bootstrap),this._r3Injector=UC(e,n,[{provide:ri,useValue:this},{provide:yc,useValue:this.componentFactoryResolver},...r],At(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Hf=class extends Ea{constructor(e){super(),this.moduleType=e}create(e){return new Gf(this.moduleType,e,[])}};var rc=class extends ri{constructor(e){super(),this.componentFactoryResolver=new nc(this),this.instance=null;let n=new fa([...e.providers,{provide:ri,useValue:this},{provide:yc,useValue:this.componentFactoryResolver}],e.parent||rp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Tp(t,e,n=null){return new rc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ma=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new st(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zA(t,e,n){return t[e]=n}function wa(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function WA(t,e,n,r){let i=wa(t,e,n);return wa(t,e+1,r)||i}function qA(t){return(t.flags&32)===32}function YA(t,e,n,r){return wa(t,CC(),n)?e+U0(n)+r:Ki}function Fu(t,e){return t<<17|e<<2}function $i(t){return t>>17&32767}function XA(t){return(t&2)==2}function ZA(t,e){return t&131071|e<<17}function $f(t){return t|2}function ts(t){return(t&131068)>>2}function tf(t,e){return t&-131069|e<<2}function KA(t){return(t&1)===1}function zf(t){return t|1}function QA(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=$i(s),l=ts(s);t[r]=n;let u=!1,c;if(Array.isArray(n)){let d=n;c=d[1],(c===null||xa(d,c)>0)&&(u=!0)}else c=n;if(i)if(l!==0){let h=$i(t[a+1]);t[r+1]=Fu(h,a),h!==0&&(t[h+1]=tf(t[h+1],r)),t[a+1]=ZA(t[a+1],r)}else t[r+1]=Fu(a,0),a!==0&&(t[a+1]=tf(t[a+1],r)),a=r;else t[r+1]=Fu(l,0),a===0?a=r:t[l+1]=tf(t[l+1],r),l=r;u&&(t[r+1]=$f(t[r+1])),A0(t,c,r,!0),A0(t,c,r,!1),JA(e,c,t,r,o),s=Fu(a,l),o?e.classBindings=s:e.styleBindings=s}function JA(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&xa(o,e)>=0&&(n[r+1]=zf(n[r+1]))}function A0(t,e,n,r){let i=t[n+1],o=e===null,s=r?$i(i):ts(i),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],u=t[s+1];eR(l,e)&&(a=!0,t[s+1]=r?zf(u):$f(u)),s=r?$i(u):ts(u)}a&&(t[n+1]=r?$f(i):zf(i))}function eR(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?xa(t,e)>=0:!1}function Ji(t,e,n){let r=Le(),i=CC();if(wa(r,i,e)){let o=ir(),s=cM();C1(o,s,r,t,e,r[xt],n,!1)}return Ji}function R0(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";wp(t,n,o[s],s,r)}function vc(t,e){return tR(t,e,null,!0),vc}function tR(t,e,n,r){let i=Le(),o=ir(),s=rM(2);if(o.firstUpdatePass&&rR(o,t,s,r),e!==Ki&&wa(i,s,e)){let a=o.data[ns()];lR(o,a,i,i[xt],t,i[s+1]=uR(e,n),r,s)}}function nR(t,e){return e>=t.expandoStartIndex}function rR(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[ns()],s=nR(t,n);cR(o,r)&&e===null&&!s&&(e=!1),e=iR(i,o,e,r),QA(i,o,e,n,s,r)}}function iR(t,e,n,r){let i=aM(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=nf(null,t,e,n,r),n=Da(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=nf(i,t,e,n,r),o===null){let l=oR(t,e,r);l!==void 0&&Array.isArray(l)&&(l=nf(null,t,e,l[1],r),l=Da(l,e.attrs,r),sR(t,e,r,l))}else o=aR(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function oR(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ts(r)!==0)return t[$i(r)]}function sR(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[$i(i)]=r}function aR(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Da(r,s,n)}return Da(r,e.attrs,n)}function nf(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Da(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Da(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),oT(t,s,n?!0:e[++o]))}return t===void 0?null:t}function lR(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let l=t.data,u=l[a+1],c=KA(u)?N0(l,e,n,i,ts(u),s):void 0;if(!ic(c)){ic(o)||XA(u)&&(o=N0(l,null,n,i,a,s));let d=fC(ns(),n);s1(r,s,d,i,o)}}function N0(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let l=t[i],u=Array.isArray(l),c=u?l[1]:l,d=c===null,h=n[i+1];h===Ki&&(h=d?Zt:void 0);let f=d?Wh(h,r):c===r?h:void 0;if(u&&!ic(f)&&(f=Wh(l,r)),ic(f)&&(a=f,s))return a;let g=t[i+1];i=s?$i(g):ts(g)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Wh(l,r))}return a}function ic(t){return t!==void 0}function uR(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=At(mp(t)))),t}function cR(t,e){return(t.flags&(e?8:16))!==0}function dR(t,e,n,r,i,o){let s=e.consts,a=c0(s,i),l=Cp(e,t,2,r,a);return w1(e,n,l,c0(s,o)),l.attrs!==null&&Of(l,l.attrs,!1),l.mergedAttrs!==null&&Of(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function Se(t,e,n,r){let i=Le(),o=ir(),s=Vi+t,a=i[xt],l=o.firstCreatePass?dR(s,o,i,e,n,r):o.data[s],u=hR(o,i,l,a,e,t);i[s]=u;let c=lC(l);return pc(l,!0),iE(a,u,l),!qA(l)&&SC()&&tE(o,i,u,l),qT()===0&&es(u,i),YT(),c&&(c1(o,i,l),uE(o,l,i)),r!==null&&d1(i,l),Se}function Me(){let t=dn();vC()?eM():(t=t.parent,pc(t,!1));let e=t;KT(e)&&QT(),XT();let n=ir();return n.firstCreatePass&&(MC(n,t),aC(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&gM(e)&&R0(n,e,Le(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&mM(e)&&R0(n,e,Le(),e.stylesWithoutHost,!1),Me}function or(t,e,n,r){return Se(t,e,n,r),Me(),or}var hR=(t,e,n,r,i,o)=>(TC(!0),ZC(r,i,dM()));function NE(){return Le()}var oc="en-US";var fR=oc;function pR(t){typeof t=="string"&&(fR=t.toLowerCase().replace(/_/g,"-"))}function On(t,e,n,r){let i=Le(),o=ir(),s=dn();return mR(o,i,i[xt],s,t,e,r),On}function gR(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[pa],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function mR(t,e,n,r,i,o,s){let a=lC(r),u=t.firstCreatePass&&mE(t),c=e[Jn],d=gE(e),h=!0;if(r.type&3||s){let y=An(r,e),p=s?s(y):y,m=d.length,_=s?v=>s(nr(v[r.index])):r.index,C=null;if(!s&&a&&(C=gR(t,e,i,r.index)),C!==null){let v=C.__ngLastListenerFn__||C;v.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,h=!1}else{o=P0(r,e,c,o,!1);let v=n.listen(p,i,o);d.push(o,v),u&&u.push(i,_,m,m+1)}}else o=P0(r,e,c,o,!1);let f=r.outputs,g;if(h&&f!==null&&(g=f[i])){let y=g.length;if(y)for(let p=0;p<y;p+=2){let m=g[p],_=g[p+1],E=e[m][_].subscribe(o),w=d.length;d.push(o,E),u&&u.push(i,r.index,w,-(w+1))}}}function O0(t,e,n,r){let i=me(null);try{return Zn(6,e,n),n(r)!==!1}catch(o){return yE(t,o),!1}finally{Zn(7,e,n),me(i)}}function P0(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?ii(t.index,e):e;xp(a);let l=O0(e,n,r,s),u=o.__ngNextListenerFn__;for(;u;)l=O0(e,n,u,s)&&l,u=u.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function OE(t,e,n,r){FA(t,MA(e,n,r))}function PE(t=1){ap(lM()+t)}function Re(t,e=""){let n=Le(),r=ir(),i=t+Vi,o=r.firstCreatePass?Cp(r,i,1,e,null):r.data[i],s=yR(r,n,o,e,t);n[i]=s,SC()&&tE(r,n,s,o),pc(o,!1)}var yR=(t,e,n,r,i)=>(TC(!0),BM(e[xt],r));function eo(t){return LE("",t,""),eo}function LE(t,e,n){let r=Le(),i=YA(r,t,e,n);return i!==Ki&&F1(r,ns(),i),LE}function _R(t,e,n){let r=ir();if(r.firstCreatePass){let i=ni(t);Wf(n,r.data,r.blueprint,i,!0),Wf(e,r.data,r.blueprint,i,!1)}}function Wf(t,e,n,r,i){if(t=Dt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Wf(t[o],e,n,r,i);else{let o=ir(),s=Le(),a=dn(),l=Ko(t)?t:Dt(t.provide),u=rC(t),c=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Ko(t)||!t.multi){let f=new Bi(u,i,Fe),g=of(l,e,i?c:c+h,d);g===-1?(yf(Qu(a,s),o,l),rf(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[g]=f,s[g]=f)}else{let f=of(l,e,c+h,d),g=of(l,e,c,c+h),y=f>=0&&n[f],p=g>=0&&n[g];if(i&&!p||!i&&!y){yf(Qu(a,s),o,l);let m=ER(i?CR:vR,n.length,i,r,u);!i&&p&&(n[g].providerFactory=m),rf(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(m),s.push(m)}else{let m=FE(n[i?g:f],u,!i&&r);rf(o,t,f>-1?f:g,m)}!i&&r&&p&&n[g].componentProviders++}}}function rf(t,e,n,r){let i=Ko(e),o=ST(e);if(i||o){let l=(o?Dt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let c=u.indexOf(n);c===-1?u.push(n,[r,l]):u[c+1].push(r,l)}else u.push(n,l)}}}function FE(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function of(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function vR(t,e,n,r){return qf(this.multi,[])}function CR(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Gi(n,n[re],this.providerFactory.index,r);o=a.slice(0,s),qf(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],qf(i,o);return o}function qf(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function ER(t,e,n,r,i){let o=new Bi(t,n,Fe);return o.multi=[],o.index=e,o.componentProviders=0,FE(o,i,r&&!n),o}function Aa(t,e=[]){return n=>{n.providersResolver=(r,i)=>_R(r,i?i(t):t,e)}}var wR=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=eC(!1,r.type),o=i.length>0?Tp([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=q({token:e,providedIn:"environment",factory:()=>new e(fe(cn))});let t=e;return t})();function Cc(t){_c("NgStandalone"),t.getStandaloneInjector=e=>e.get(wR).getOrCreateStandaloneInjector(t)}function kE(t,e,n,r,i){return xR(Le(),tM(),t,e,n,r,i)}function DR(t,e){let n=t[e];return n===Ki?void 0:n}function xR(t,e,n,r,i,o,s){let a=e+n;return WA(t,a,i,o)?zA(t,a+2,s?r.call(s,i,o):r(i,o)):DR(t,a+2)}var Ec=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var VE=new Q("");function to(t){return!!t&&typeof t.then=="function"}function jE(t){return!!t&&typeof t.subscribe=="function"}var UE=new Q(""),BE=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=R(UE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(to(s))r.push(s);else if(jE(s)){let a=new Promise((l,u)=>{s.subscribe({complete:l,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Mp=new Q("");function IR(){Dv(()=>{throw new B(600,!1)})}function bR(t){return t.isBoundToModule}function SR(t,e,n){try{let r=n();return to(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ra=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=R(BC),this.afterRenderEffectManager=R(xE),this.externalTestViews=new Set,this.beforeRender=new wt,this.afterTick=new wt,this.componentTypes=[],this.components=[],this.isStable=R(Ma).hasPendingTasks.pipe(le(r=>!r)),this._injector=R(cn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof tc;if(!this._injector.get(BE).done){let f=!o&&Z0(r),g=!1;throw new B(405,g)}let a;o?a=r:a=this._injector.get(yc).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=bR(a)?void 0:this._injector.get(ri),u=i||a.selector,c=a.create(Zi.NULL,[],u,l),d=c.location.nativeElement,h=c.injector.get(VE,null);return h?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),sf(this.components,c),h?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new B(101,!1);let i=me(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,me(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===vE)throw new B(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:l}of this._views)TR(a,s,l)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Yf(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Yf(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;sf(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Mp,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>sf(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new B(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sf(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function TR(t,e,n){!e&&!Yf(t)||MR(t,n,e)}function Yf(t){return sp(t)}function MR(t,e,n){let r;n?(r=0,t[H]|=1024):t[H]&64?r=0:r=1,CE(t,e,r)}var Xf=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ap=(()=>{let e=class e{compileModuleSync(r){return new Hf(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=K0(r),s=XC(o.declarations).reduce((a,l)=>{let u=Fi(l);return u&&a.push(new Ca(u)),a},[]);return new Xf(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var AR=(()=>{let e=class e{constructor(){this.zone=R($e),this.applicationRef=R(Ra)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function RR(t){return[{provide:$e,useFactory:t},{provide:Zo,multi:!0,useFactory:()=>{let e=R(AR,{optional:!0});return()=>e.initialize()}},{provide:Zo,multi:!0,useFactory:()=>{let e=R(LR);return()=>{e.initialize()}}},{provide:BC,useFactory:NR}]}function NR(){let t=R($e),e=R(rr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function OR(t){let e=RR(()=>new $e(PR(t)));return cc([[],e])}function PR(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var LR=(()=>{let e=class e{constructor(){this.subscription=new Ke,this.initialized=!1,this.zone=R($e),this.pendingTasks=R(Ma)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{$e.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function FR(){return typeof $localize<"u"&&$localize.locale||oc}var Rp=new Q("",{providedIn:"root",factory:()=>R(Rp,oe.Optional|oe.SkipSelf)||FR()});var GE=new Q("");var Hu=null;function kR(t=[],e){return Zi.create({name:e,providers:[{provide:dc,useValue:"platform"},{provide:GE,useValue:new Set([()=>Hu=null])},...t]})}function VR(t=[]){if(Hu)return Hu;let e=kR(t);return Hu=e,IR(),jR(e),e}function jR(t){t.get(fp,null)?.forEach(n=>n())}var no=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=UR;let t=e;return t})();function UR(t){return BR(dn(),Le(),(t&16)===16)}function BR(t,e,n){if(fc(t)&&!n){let r=ii(t.index,e);return new Hi(r,r)}else if(t.type&47){let r=e[tr];return new Hi(r,e)}return null}function HE(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=VR(r),o=[OR(),...n||[]],a=new rc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get($e);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(rr,null),c;l.runOutsideAngular(()=>{c=l.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get(GE);return h.add(d),a.onDestroy(()=>{c.unsubscribe(),h.delete(d)}),SR(u,l,()=>{let f=a.get(BE);return f.runInitializers(),f.donePromise.then(()=>{let g=a.get(Rp,oc);pR(g||oc);let y=a.get(Ra);return e!==void 0&&y.bootstrap(e),y})})})}catch(e){return Promise.reject(e)}}var GR=new Q("",{providedIn:"root",factory:()=>R(HR)}),HR=(()=>{let e=class e{};e.\u0275prov=q({token:e,providedIn:"root",factory:()=>new Zf});let t=e;return t})(),Zf=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=R(Ma),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},Kf=class{constructor(e,n,r,i,o,s){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=o,this.watcher=Sv(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(rr,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Np(t,e){_c("NgSignals"),!e?.injector&&PT(Np);let n=e?.injector??R(Zi),r=e?.manualCleanup!==!0?n.get(dp):null,i=new Kf(n.get(GR),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),o=n.get(no,null,{optional:!0});return!o||!(o._lView[H]&8)?i.watcher.notify():(o._lView[Vu]??=[]).push(i.watcher.notify),i}var YE=null;function Nr(){return YE}function XE(t){YE??=t}var wc=class{};var hn=new Q(""),ZE=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>R(WR),providedIn:"platform"});let t=e;return t})();var WR=(()=>{let e=class e extends ZE{constructor(){super(),this._doc=R(hn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nr().getBaseHref(this._doc)}onPopState(r){let i=Nr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Nr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function KE(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function $E(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function ro(t){return t&&t[0]!=="?"?"?"+t:t}var xc=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>R(QE),providedIn:"root"});let t=e;return t})(),qR=new Q(""),QE=(()=>{let e=class e extends xc{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??R(hn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return KE(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+ro(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+ro(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+ro(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(fe(ZE),fe(qR,8))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Na=(()=>{let e=class e{constructor(r){this._subject=new lt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=ZR($E(zE(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ro(i))}normalize(r){return e.stripTrailingSlash(XR(this._basePath,zE(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ro(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ro(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=ro,e.joinWithSlash=KE,e.stripTrailingSlash=$E,e.\u0275fac=function(i){return new(i||e)(fe(xc))},e.\u0275prov=q({token:e,factory:()=>YR(),providedIn:"root"});let t=e;return t})();function YR(){return new Na(fe(xc))}function XR(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function zE(t){return t.replace(/\/index.html$/,"")}function ZR(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function JE(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Op=/\s+/,WE=[],ew=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=WE,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Op):WE}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Op):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Op).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(Fe(Rn),Fe(Qi))},e.\u0275dir=Nt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Rt.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Lp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=qi({type:e}),e.\u0275inj=Wi({});let t=e;return t})(),tw="browser",KR="server";function Fp(t){return t===KR}var Dc=class{};var jp=class extends wc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Up=class t extends jp{static makeCurrent(){XE(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=eN();return n==null?null:tN(n)}resetBaseElement(){Oa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return JE(document.cookie,e)}},Oa=null;function eN(){return Oa=Oa||document.querySelector("base"),Oa?Oa.getAttribute("href"):null}function tN(t){return new URL(t,document.baseURI).pathname}var nN=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Bp=new Q(""),ow=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new B(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(fe(Bp),fe($e))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Ic=class{constructor(e){this._doc=e}},kp="ng-app-id",sw=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Fp(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${kp}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(kp),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(kp,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(fe(hn),fe(hp),fe(pp,8),fe(os))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Vp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hp=/%COMP%/g,aw="%COMP%",rN=`_nghost-${aw}`,iN=`_ngcontent-${aw}`,oN=!0,sN=new Q("",{providedIn:"root",factory:()=>oN});function aN(t){return iN.replace(Hp,t)}function lN(t){return rN.replace(Hp,t)}function lw(t,e){return e.map(n=>n.replace(Hp,t))}var nw=(()=>{let e=class e{constructor(r,i,o,s,a,l,u,c=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Fp(l),this.defaultRenderer=new Pa(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Qn.ShadowDom&&(i=Ee(M({},i),{encapsulation:Qn.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof bc?o.applyToHost(r):o instanceof La&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,l=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Qn.Emulated:s=new bc(u,c,i,this.appId,d,a,l,h);break;case Qn.ShadowDom:return new Gp(u,c,r,i,a,l,this.nonce,h);default:s=new La(u,c,i,d,a,l,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(fe(ow),fe(sw),fe(hp),fe(sN),fe(hn),fe(os),fe($e),fe(pp))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Pa=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Vp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(rw(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(rw(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Vp[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Vp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Tr.DashCase|Tr.Important)?e.style.setProperty(n,r,i&Tr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Tr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Nr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function rw(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Gp=class extends Pa{constructor(e,n,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=lw(i.id,i.styles);for(let c of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},La=class extends Pa{constructor(e,n,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?lw(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},bc=class extends La{constructor(e,n,r,i,o,s,a,l){let u=i+"-"+r.id;super(e,n,r,o,s,a,l,u),this.contentAttr=aN(u),this.hostAttr=lN(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},uN=(()=>{let e=class e extends Ic{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(fe(hn))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),iw=["alt","control","meta","shift"],cN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dN={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},hN=(()=>{let e=class e extends Ic{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nr().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),iw.forEach(c=>{let d=i.indexOf(c);d>-1&&(i.splice(d,1),a+=c+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=cN[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),iw.forEach(a=>{if(a!==o){let l=dN[a];l(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(fe(hn))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})();function uw(t,e){return HE(M({rootComponent:t},fN(e)))}function fN(t){return{appProviders:[..._N,...t?.providers??[]],platformProviders:yN}}function pN(){Up.makeCurrent()}function gN(){return new rr}function mN(){return qC(document),document}var yN=[{provide:os,useValue:tw},{provide:fp,useValue:pN,multi:!0},{provide:hn,useFactory:mN,deps:[]}];var _N=[{provide:dc,useValue:"root"},{provide:rr,useFactory:gN,deps:[]},{provide:Bp,useClass:uN,multi:!0,deps:[hn,$e,os]},{provide:Bp,useClass:hN,multi:!0,deps:[hn]},nw,sw,ow,{provide:va,useExisting:nw},{provide:Dc,useClass:nN,deps:[]},[]];var cw=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(fe(hn))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var te="primary",Za=Symbol("RouteTitle"),Yp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function hs(t){return new Yp(t)}function EN(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function wN(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!sr(t[n],e[n]))return!1;return!0}function sr(t,e){let n=t?Xp(t):void 0,r=e?Xp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!mw(t[i],e[i]))return!1;return!0}function Xp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function mw(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function yw(t){return t.length>0?t[t.length-1]:null}function ai(t){return Vh(t)?t:to(t)?Be(Promise.resolve(t)):K(t)}var DN={exact:vw,subset:Cw},_w={exact:xN,subset:IN,ignored:()=>!0};function dw(t,e,n){return DN[n.paths](t.root,e.root,n.matrixParams)&&_w[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function xN(t,e){return sr(t,e)}function vw(t,e,n){if(!oo(t.segments,e.segments)||!Mc(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!vw(t.children[r],e.children[r],n))return!1;return!0}function IN(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>mw(t[n],e[n]))}function Cw(t,e,n){return Ew(t,e,e.segments,n)}function Ew(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!oo(i,n)||e.hasChildren()||!Mc(i,n,r))}else if(t.segments.length===n.length){if(!oo(t.segments,n)||!Mc(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Cw(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!oo(t.segments,i)||!Mc(t.segments,i,r)||!t.children[te]?!1:Ew(t.children[te],e,o,r)}}function Mc(t,e,n){return e.every((r,i)=>_w[n](t[i].parameters,r.parameters))}var oi=class{constructor(e=new De([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=hs(this.queryParams),this._queryParamMap}toString(){return TN.serialize(this)}},De=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ac(this)}},io=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=hs(this.parameters),this._parameterMap}toString(){return Dw(this)}};function bN(t,e){return oo(t,e)&&t.every((n,r)=>sr(n.parameters,e[r].parameters))}function oo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function SN(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===te&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==te&&(n=n.concat(e(i,r)))}),n}var Eg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>new Nc,providedIn:"root"});let t=e;return t})(),Nc=class{parse(e){let n=new Kp(e);return new oi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Fa(e.root,!0)}`,r=RN(e.queryParams),i=typeof e.fragment=="string"?`#${MN(e.fragment)}`:"";return`${n}${r}${i}`}},TN=new Nc;function Ac(t){return t.segments.map(e=>Dw(e)).join("/")}function Fa(t,e){if(!t.hasChildren())return Ac(t);if(e){let n=t.children[te]?Fa(t.children[te],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==te&&r.push(`${i}:${Fa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=SN(t,(r,i)=>i===te?[Fa(t.children[te],!1)]:[`${i}:${Fa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[te]!=null?`${Ac(t)}/${n[0]}`:`${Ac(t)}/(${n.join("//")})`}}function ww(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sc(t){return ww(t).replace(/%3B/gi,";")}function MN(t){return encodeURI(t)}function Zp(t){return ww(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rc(t){return decodeURIComponent(t)}function hw(t){return Rc(t.replace(/\+/g,"%20"))}function Dw(t){return`${Zp(t.path)}${AN(t.parameters)}`}function AN(t){return Object.entries(t).map(([e,n])=>`;${Zp(e)}=${Zp(n)}`).join("")}function RN(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Sc(n)}=${Sc(i)}`).join("&"):`${Sc(n)}=${Sc(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var NN=/^[^\/()?;#]+/;function $p(t){let e=t.match(NN);return e?e[0]:""}var ON=/^[^\/()?;=#]+/;function PN(t){let e=t.match(ON);return e?e[0]:""}var LN=/^[^=?&#]+/;function FN(t){let e=t.match(LN);return e?e[0]:""}var kN=/^[^&#]+/;function VN(t){let e=t.match(kN);return e?e[0]:""}var Kp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[te]=new De(e,n)),r}parseSegment(){let e=$p(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new io(Rc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=PN(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=$p(this.remaining);i&&(r=i,this.capture(r))}e[Rc(n)]=Rc(r)}parseQueryParam(e){let n=FN(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=VN(this.remaining);s&&(r=s,this.capture(r))}let i=hw(n),o=hw(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=$p(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=te);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[te]:new De([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function xw(t){return t.segments.length>0?new De([],{[te]:t}):t}function Iw(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Iw(i);if(r===te&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new De(t.segments,e);return jN(n)}function jN(t){if(t.numberOfChildren===1&&t.children[te]){let e=t.children[te];return new De(t.segments.concat(e.segments),e.children)}return t}function fs(t){return t instanceof oi}function UN(t,e,n=null,r=null){let i=bw(t);return Sw(i,e,n,r)}function bw(t){let e;function n(o){let s={};for(let l of o.children){let u=n(l);s[l.outlet]=u}let a=new De(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=xw(r);return e??i}function Sw(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return zp(i,i,i,n,r);let o=BN(e);if(o.toRoot())return zp(i,i,new De([],{}),n,r);let s=GN(o,i,t),a=s.processChildren?ja(s.segmentGroup,s.index,o.commands):Mw(s.segmentGroup,s.index,o.commands);return zp(i,s.segmentGroup,a,n,r)}function Oc(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ga(t){return typeof t=="object"&&t!=null&&t.outlets}function zp(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(c=>`${c}`):`${u}`});let s;t===e?s=n:s=Tw(t,e,n);let a=xw(Iw(s));return new oi(a,o,i)}function Tw(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Tw(o,e,n)}),new De(t.segments,r)}var Pc=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Oc(r[0]))throw new B(4003,!1);let i=r.find(Ga);if(i&&i!==yw(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function BN(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Pc(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Pc(n,e,r)}var cs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function GN(t,e,n){if(t.isAbsolute)return new cs(e,!0,0);if(!n)return new cs(e,!1,NaN);if(n.parent===null)return new cs(n,!0,0);let r=Oc(t.commands[0])?0:1,i=n.segments.length-1+r;return HN(n,i,t.numberOfDoubleDots)}function HN(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new cs(r,!1,i-o)}function $N(t){return Ga(t[0])?t[0].outlets:{[te]:t}}function Mw(t,e,n){if(t??=new De([],{}),t.segments.length===0&&t.hasChildren())return ja(t,e,n);let r=zN(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new De(t.segments.slice(0,r.pathIndex),{});return o.children[te]=new De(t.segments.slice(r.pathIndex),t.children),ja(o,0,i)}else return r.match&&i.length===0?new De(t.segments,{}):r.match&&!t.hasChildren()?Qp(t,e,n):r.match?ja(t,0,i):Qp(t,e,n)}function ja(t,e,n){if(n.length===0)return new De(t.segments,{});{let r=$N(n),i={};if(Object.keys(r).some(o=>o!==te)&&t.children[te]&&t.numberOfChildren===1&&t.children[te].segments.length===0){let o=ja(t.children[te],e,n);return new De(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Mw(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(t.segments,i)}}function zN(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ga(a))break;let l=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!pw(l,u,s))return o;r+=2}else{if(!pw(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Qp(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ga(o)){let l=WN(o.outlets);return new De(r,l)}if(i===0&&Oc(n[0])){let l=t.segments[e];r.push(new io(l.path,fw(n[0]))),i++;continue}let s=Ga(o)?o.outlets[te]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Oc(a)?(r.push(new io(s,fw(a))),i+=2):(r.push(new io(s,{})),i++)}return new De(r,{})}function WN(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Qp(new De([],{}),0,r))}),e}function fw(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function pw(t,e,n){return t==n.path&&sr(e,n.parameters)}var Ua="imperative",ct=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ct||{}),fn=class{constructor(e,n){this.id=e,this.url=n}},Ha=class extends fn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ct.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},so=class extends fn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Jt||{}),Jp=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Jp||{}),si=class extends fn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ao=class extends fn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ct.NavigationSkipped}},$a=class extends fn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Lc=class extends fn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eg=class extends fn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tg=class extends fn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ng=class extends fn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rg=class extends fn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ig=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},og=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},sg=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ag=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lg=class{constructor(e){this.snapshot=e,this.type=ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ug=class{constructor(e){this.snapshot=e,this.type=ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var za=class{},Wa=class{constructor(e){this.url=e}};var cg=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Bc,this.attachRef=null}},Bc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new cg,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=dg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=dg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=hg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return hg(e,this._root).map(n=>n.value)}};function dg(t,e){if(t===e.value)return e;for(let n of e.children){let r=dg(t,n);if(r)return r}return null}function hg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=hg(t,n);if(r.length)return r.unshift(e),r}return[]}var Qt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function us(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var kc=class extends Fc{constructor(e,n){super(e),this.snapshot=n,Dg(this,e)}toString(){return this.snapshot.toString()}};function Aw(t){let e=qN(t),n=new st([new io("",{})]),r=new st({}),i=new st({}),o=new st({}),s=new st(""),a=new ps(n,r,o,s,i,te,t,e.root);return a.snapshot=e.root,new kc(new Qt(a,[]),e)}function qN(t){let e={},n={},r={},i="",o=new qa([],e,r,i,n,te,t,null,{});return new Vc("",new Qt(o,[]))}var ps=class{constructor(e,n,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(le(u=>u[Za]))??K(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(e=>hs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(e=>hs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wg(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),t.params),data:M(M({},e.data),t.data),resolve:M(M(M(M({},t.data),e.data),i?.data),t._resolvedData)}:r={params:M({},t.params),data:M({},t.data),resolve:M(M({},t.data),t._resolvedData??{})},i&&Nw(i)&&(r.resolve[Za]=i.title),r}var qa=class{get title(){return this.data?.[Za]}constructor(e,n,r,i,o,s,a,l,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=hs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=hs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Vc=class extends Fc{constructor(e,n){super(n),this.url=e,Dg(this,n)}toString(){return Rw(this._root)}};function Dg(t,e){e.value._routerState=t,e.children.forEach(n=>Dg(t,n))}function Rw(t){let e=t.children.length>0?` { ${t.children.map(Rw).join(", ")} } `:"";return`${t.value}${e}`}function Wp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,sr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),sr(e.params,n.params)||t.paramsSubject.next(n.params),wN(e.url,n.url)||t.urlSubject.next(n.url),sr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function fg(t,e){let n=sr(t.params,e.params)&&bN(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||fg(t.parent,e.parent))}function Nw(t){return typeof t.title=="string"||t.title===null}var YN=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new lt,this.deactivateEvents=new lt,this.attachEvents=new lt,this.detachEvents=new lt,this.parentContexts=R(Bc),this.location=R(ss),this.changeDetector=R(no),this.environmentInjector=R(cn),this.inputBinder=R(xg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new pg(r,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Nt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xi]});let t=e;return t})(),pg=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ps?this.route:e===Bc?this.childContexts:this.parent.get(e,n)}},xg=new Q("");function XN(t,e,n){let r=Ya(t,e._root,n?n._root:void 0);return new kc(r,e)}function Ya(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=ZN(t,e,n);return new Qt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ya(t,a)),s}}let r=KN(e.value),i=e.children.map(o=>Ya(t,o));return new Qt(r,i)}}function ZN(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ya(t,r,i);return Ya(t,r)})}function KN(t){return new ps(new st(t.url),new st(t.params),new st(t.queryParams),new st(t.fragment),new st(t.data),t.outlet,t.component,t)}var Ow="ngNavigationCancelingError";function Pw(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=fs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Lw(!1,Jt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Lw(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Ow]=!0,n.cancellationCode=e,n}function QN(t){return Fw(t)&&fs(t.url)}function Fw(t){return!!t&&t[Ow]}var JN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=uc({type:e,selectors:[["ng-component"]],standalone:!0,features:[Cc],decls:1,vars:0,template:function(i,o){i&1&&or(0,"router-outlet")},dependencies:[YN],encapsulation:2});let t=e;return t})();function eO(t,e){return t.providers&&!t._injector&&(t._injector=Tp(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ig(t){let e=t.children&&t.children.map(Ig),n=e?Ee(M({},t),{children:e}):M({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=JN),n}function ar(t){return t.outlet||te}function tO(t,e){let n=t.filter(r=>ar(r)===e);return n.push(...t.filter(r=>ar(r)!==e)),n}function Ka(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var nO=(t,e,n,r)=>le(i=>(new gg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),gg=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Wp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=us(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=us(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=us(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=us(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ug(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ag(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Wp(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Wp(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Ka(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},jc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ds=class{constructor(e,n){this.component=e,this.route=n}};function rO(t,e,n){let r=t._root,i=e?e._root:null;return ka(r,i,n,[r.value])}function iO(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ms(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!F0(t)?t:e.get(t):r}function ka(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=us(e);return t.children.forEach(s=>{oO(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ba(a,n.getContext(s),i)),i}function oO(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=sO(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new jc(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ka(t,e,a?a.children:null,r,i):ka(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ds(a.outlet.component,s))}else s&&Ba(e,a,i),i.canActivateChecks.push(new jc(r)),o.component?ka(t,null,a?a.children:null,r,i):ka(t,null,n,r,i);return i}function sO(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!oo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!oo(t.url,e.url)||!sr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fg(t,e)||!sr(t.queryParams,e.queryParams);case"paramsChange":default:return!fg(t,e)}}function Ba(t,e,n){let r=us(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ba(s,e.children.getContext(o),n):Ba(s,null,n):Ba(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ds(e.outlet.component,i)):n.canDeactivateChecks.push(new ds(null,i)):n.canDeactivateChecks.push(new ds(null,i))}function Qa(t){return typeof t=="function"}function aO(t){return typeof t=="boolean"}function lO(t){return t&&Qa(t.canLoad)}function uO(t){return t&&Qa(t.canActivate)}function cO(t){return t&&Qa(t.canActivateChild)}function dO(t){return t&&Qa(t.canDeactivate)}function hO(t){return t&&Qa(t.canMatch)}function kw(t){return t instanceof Ir||t?.name==="EmptyError"}var Tc=Symbol("INITIAL_VALUE");function gs(){return bn(t=>Nu(t.map(e=>e.pipe(br(1),$h(Tc)))).pipe(le(e=>{for(let n of e)if(n!==!0){if(n===Tc)return Tc;if(n===!1||n instanceof oi)return n}return!0}),In(e=>e!==Tc),br(1)))}function fO(t,e){return Qe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?K(Ee(M({},n),{guardsResult:!0})):pO(s,r,i,t).pipe(Qe(a=>a&&aO(a)?gO(r,o,t,e):K(a)),le(a=>Ee(M({},n),{guardsResult:a})))})}function pO(t,e,n,r){return Be(t).pipe(Qe(i=>CO(i.component,i.route,n,e,r)),Xn(i=>i!==!0,!0))}function gO(t,e,n,r){return Be(e).pipe(Bo(i=>Uo(yO(i.route.parent,r),mO(i.route,r),vO(t,i.path,n),_O(t,i.route,n))),Xn(i=>i!==!0,!0))}function mO(t,e){return t!==null&&e&&e(new lg(t)),K(!0)}function yO(t,e){return t!==null&&e&&e(new sg(t)),K(!0)}function _O(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(o=>Ou(()=>{let s=Ka(e)??n,a=ms(o,s),l=uO(a)?a.canActivate(e,t):Yi(s,()=>a(e,t));return ai(l).pipe(Xn())}));return K(i).pipe(gs())}function vO(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>iO(s)).filter(s=>s!==null).map(s=>Ou(()=>{let a=s.guards.map(l=>{let u=Ka(s.node)??n,c=ms(l,u),d=cO(c)?c.canActivateChild(r,t):Yi(u,()=>c(r,t));return ai(d).pipe(Xn())});return K(a).pipe(gs())}));return K(o).pipe(gs())}function CO(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return K(!0);let s=o.map(a=>{let l=Ka(e)??i,u=ms(a,l),c=dO(u)?u.canDeactivate(t,e,n,r):Yi(l,()=>u(t,e,n,r));return ai(c).pipe(Xn())});return K(s).pipe(gs())}function EO(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let o=i.map(s=>{let a=ms(s,t),l=lO(a)?a.canLoad(e,n):Yi(t,()=>a(e,n));return ai(l)});return K(o).pipe(gs(),Vw(r))}function Vw(t){return Ph(at(e=>{if(fs(e))throw Pw(t,e)}),le(e=>e===!0))}function wO(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let o=i.map(s=>{let a=ms(s,t),l=hO(a)?a.canMatch(e,n):Yi(t,()=>a(e,n));return ai(l)});return K(o).pipe(gs(),Vw(r))}var Xa=class{constructor(e){this.segmentGroup=e||null}},Uc=class extends Error{constructor(e){super(),this.urlTree=e}};function ls(t){return jo(new Xa(t))}function DO(t){return jo(new B(4e3,!1))}function xO(t){return jo(Lw(!1,Jt.GuardRejected))}var mg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[te])return DO(e.redirectTo);i=i.children[te]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Uc(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new oi(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new De(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},yg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function IO(t,e,n,r,i){let o=bg(t,e,n);return o.matched?(r=eO(e,r),wO(r,e,n,i).pipe(le(s=>s===!0?o:M({},yg)))):K(o)}function bg(t,e,n){if(e.path==="**")return bO(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?M({},yg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||EN)(n,t,e);if(!i)return M({},yg);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?M(M({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function bO(t){return{matched:!0,parameters:t.length>0?yw(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function gw(t,e,n,r){return n.length>0&&MO(t,n,r)?{segmentGroup:new De(e,TO(r,new De(n,t.children))),slicedSegments:[]}:n.length===0&&AO(t,n,r)?{segmentGroup:new De(t.segments,SO(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new De(t.segments,t.children),slicedSegments:n}}function SO(t,e,n,r){let i={};for(let o of n)if(Gc(t,e,o)&&!r[ar(o)]){let s=new De([],{});i[ar(o)]=s}return M(M({},r),i)}function TO(t,e){let n={};n[te]=e;for(let r of t)if(r.path===""&&ar(r)!==te){let i=new De([],{});n[ar(r)]=i}return n}function MO(t,e,n){return n.some(r=>Gc(t,e,r)&&ar(r)!==te)}function AO(t,e,n){return n.some(r=>Gc(t,e,r))}function Gc(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function RO(t,e,n,r){return ar(t)!==r&&(r===te||!Gc(e,n,t))?!1:bg(e,t,n).matched}function NO(t,e,n){return e.length===0&&!t.children[n]}var _g=class{};function OO(t,e,n,r,i,o,s="emptyOnly"){return new vg(t,e,n,r,i,s,o).recognize()}var PO=31,vg=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new mg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}recognize(){let e=gw(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(n=>{let r=new qa([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,{},te,this.rootComponentType,null,{}),i=new Qt(r,n),o=new Vc("",i),s=UN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,te).pipe(Qr(r=>{if(r instanceof Uc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xa?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=wg(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(le(o=>o instanceof Qt?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return Be(i).pipe(Bo(o=>{let s=r.children[o],a=tO(n,o);return this.processSegmentGroup(e,a,s,o)}),Hh((o,s)=>(o.push(...s),o)),Jr(null),Gh(),Qe(o=>{if(o===null)return ls(r);let s=jw(o);return LO(s),K(s)}))}processSegment(e,n,r,i,o,s){return Be(n).pipe(Bo(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Qr(l=>{if(l instanceof Xa)return K(null);throw l}))),Xn(a=>!!a),Qr(a=>{if(kw(a))return NO(r,i,o)?K(new _g):ls(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return RO(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):ls(i):ls(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:u,remainingSegments:c}=bg(n,i,o);if(!a)return ls(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>PO&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(Qe(h=>this.processSegment(e,r,n,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=IO(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(bn(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(bn(({routes:l})=>{let u=r._loadedInjector??e,{consumedSegments:c,remainingSegments:d,parameters:h}=a,f=new qa(c,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,kO(r),ar(r),r.component??r._loadedComponent??null,r,VO(r)),{segmentGroup:g,slicedSegments:y}=gw(n,c,d,l);if(y.length===0&&g.hasChildren())return this.processChildren(u,l,g).pipe(le(m=>m===null?null:new Qt(f,m)));if(l.length===0&&y.length===0)return K(new Qt(f,[]));let p=ar(r)===o;return this.processSegment(u,l,g,y,p?te:o,!0).pipe(le(m=>new Qt(f,m instanceof Qt?[m]:[])))}))):ls(n)))}getChildConfig(e,n,r){return n.children?K({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?K({routes:n._loadedRoutes,injector:n._loadedInjector}):EO(e,n,r,this.urlSerializer).pipe(Qe(i=>i?this.configLoader.loadChildren(e,n).pipe(at(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):xO(n))):K({routes:[],injector:e})}};function LO(t){t.sort((e,n)=>e.value.outlet===te?-1:n.value.outlet===te?1:e.value.outlet.localeCompare(n.value.outlet))}function FO(t){let e=t.value.routeConfig;return e&&e.path===""}function jw(t){let e=[],n=new Set;for(let r of t){if(!FO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=jw(r.children);e.push(new Qt(r.value,i))}return e.filter(r=>!n.has(r))}function kO(t){return t.data||{}}function VO(t){return t.resolve||{}}function jO(t,e,n,r,i,o){return Qe(s=>OO(t,e,n,r,s.extractedUrl,i,o).pipe(le(({state:a,tree:l})=>Ee(M({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function UO(t,e){return Qe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return K(n);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of Uw(l))s.add(u);let a=0;return Be(s).pipe(Bo(l=>o.has(l)?BO(l,r,t,e):(l.data=wg(l,l.parent,t).resolve,K(void 0))),at(()=>a++),Go(1),Qe(l=>a===s.size?K(n):Xt))})}function Uw(t){let e=t.children.map(n=>Uw(n)).flat();return[t,...e]}function BO(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Nw(i)&&(o[Za]=i.title),GO(o,t,e,r).pipe(le(s=>(t._resolvedData=s,t.data=wg(t,t.parent,n).resolve,null)))}function GO(t,e,n,r){let i=Xp(t);if(i.length===0)return K({});let o={};return Be(i).pipe(Qe(s=>HO(t[s],e,n,r).pipe(Xn(),at(a=>{o[s]=a}))),Go(1),Bh(o),Qr(s=>kw(s)?Xt:jo(s)))}function HO(t,e,n,r){let i=Ka(e)??r,o=ms(t,i),s=o.resolve?o.resolve(e,n):Yi(i,()=>o(e,n));return ai(s)}function qp(t){return bn(e=>{let n=t(e);return n?Be(n).pipe(le(()=>e)):K(e)})}var Bw=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===te);return i}getResolvedTitleForRoute(r){return r.data[Za]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>R($O),providedIn:"root"});let t=e;return t})(),$O=(()=>{let e=class e extends Bw{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(fe(cw))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Sg=new Q("",{providedIn:"root",factory:()=>({})}),Tg=new Q(""),zO=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=R(Ap)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return K(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ai(r.loadComponent()).pipe(le(Gw),at(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),la(()=>{this.componentLoaders.delete(r)})),o=new Vo(i,()=>new wt).pipe(ko());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return K({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=WO(i,this.compiler,r,this.onLoadEndListener).pipe(la(()=>{this.childrenLoaders.delete(i)})),a=new Vo(s,()=>new wt).pipe(ko());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function WO(t,e,n,r){return ai(t.loadChildren()).pipe(le(Gw),Qe(i=>i instanceof Ea||Array.isArray(i)?K(i):Be(e.compileModuleAsync(i))),le(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Tg,[],{optional:!0,self:!0}).flat()),{routes:s.map(Ig),injector:o}}))}function qO(t){return t&&typeof t=="object"&&"default"in t}function Gw(t){return qO(t)?t.default:t}var Mg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>R(YO),providedIn:"root"});let t=e;return t})(),YO=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),XO=new Q("");var ZO=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new wt,this.transitionAbortSubject=new wt,this.configLoader=R(zO),this.environmentInjector=R(cn),this.urlSerializer=R(Eg),this.rootContexts=R(Bc),this.location=R(Na),this.inputBindingEnabled=R(xg,{optional:!0})!==null,this.titleStrategy=R(Bw),this.options=R(Sg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=R(Mg),this.createViewTransition=R(XO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null;let r=o=>this.events.next(new ig(o)),i=o=>this.events.next(new og(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ee(M(M({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new st({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ua,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(In(s=>s.id!==0),le(s=>Ee(M({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),bn(s=>{let a=!1,l=!1;return K(s).pipe(bn(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Jt.SupersededByNewNavigation),Xt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!c&&d!=="reload"){let h="";return this.events.next(new ao(u.id,this.urlSerializer.serialize(u.rawUrl),h,Jp.IgnoredSameUrlNavigation)),u.resolve(null),Xt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return K(u).pipe(bn(h=>{let f=this.transitions?.getValue();return this.events.next(new Ha(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Xt:Promise.resolve(h)}),jO(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),at(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Ee(M({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Lc(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:g,restoredState:y,extras:p}=u,m=new Ha(h,this.urlSerializer.serialize(f),g,y);this.events.next(m);let _=Aw(this.rootComponentType).snapshot;return this.currentTransition=s=Ee(M({},u),{targetSnapshot:_,urlAfterRedirects:f,extras:Ee(M({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,K(s)}else{let h="";return this.events.next(new ao(u.id,this.urlSerializer.serialize(u.extractedUrl),h,Jp.IgnoredByUrlHandlingStrategy)),u.resolve(null),Xt}}),at(u=>{let c=new eg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),le(u=>(this.currentTransition=s=Ee(M({},u),{guards:rO(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),fO(this.environmentInjector,u=>this.events.next(u)),at(u=>{if(s.guardsResult=u.guardsResult,fs(u.guardsResult))throw Pw(this.urlSerializer,u.guardsResult);let c=new tg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(c)}),In(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Jt.GuardRejected),!1)),qp(u=>{if(u.guards.canActivateChecks.length)return K(u).pipe(at(c=>{let d=new ng(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),bn(c=>{let d=!1;return K(c).pipe(UO(this.paramsInheritanceStrategy,this.environmentInjector),at({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",Jt.NoDataFromResolver)}}))}),at(c=>{let d=new rg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),qp(u=>{let c=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(at(f=>{d.component=f}),le(()=>{})));for(let f of d.children)h.push(...c(f));return h};return Nu(c(u.targetSnapshot.root)).pipe(Jr(null),br(1))}),qp(()=>this.afterPreactivation()),bn(()=>{let{currentSnapshot:u,targetSnapshot:c}=s,d=this.createViewTransition?.(this.environmentInjector,u.root,c.root);return d?Be(d).pipe(le(()=>s)):K(s)}),le(u=>{let c=XN(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Ee(M({},u),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,s}),at(()=>{this.events.next(new za)}),nO(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),br(1),at({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new so(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),zh(this.transitionAbortSubject.pipe(at(u=>{throw u}))),la(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qr(u=>{if(l=!0,Fw(u))this.events.next(new si(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),QN(u)?this.events.next(new Wa(u.url)):s.resolve(!1);else{this.events.next(new $a(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(u))}catch(c){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(c)}}return Xt}))}))}cancelNavigationTransition(r,i,o){let s=new si(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function KO(t){return t!==Ua}var QO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>R(JO),providedIn:"root"});let t=e;return t})(),Cg=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},JO=(()=>{let e=class e extends Cg{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=rs(e)))(o||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>R(eP),providedIn:"root"});let t=e;return t})(),eP=(()=>{let e=class e extends Hw{constructor(){super(...arguments),this.location=R(Na),this.urlSerializer=R(Eg),this.options=R(Sg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=R(Mg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new oi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Aw(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ha)this.stateMemento=this.createStateMemento();else if(r instanceof ao)this.rawUrlTree=i.initialUrl;else if(r instanceof Lc){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof za?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof si&&(r.code===Jt.GuardRejected||r.code===Jt.NoDataFromResolver)?this.restoreHistory(i):r instanceof $a?this.restoreHistory(i,!0):r instanceof so&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=M(M({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=rs(e)))(o||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Va=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Va||{});function tP(t,e){t.events.pipe(In(n=>n instanceof so||n instanceof si||n instanceof $a||n instanceof ao),le(n=>n instanceof so||n instanceof ao?Va.COMPLETE:(n instanceof si?n.code===Jt.Redirect||n.code===Jt.SupersededByNewNavigation:!1)?Va.REDIRECTING:Va.FAILED),In(n=>n!==Va.REDIRECTING),br(1)).subscribe(()=>{e()})}function nP(t){throw t}var rP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$w=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=R(Ec),this.stateManager=R(Hw),this.options=R(Sg,{optional:!0})||{},this.pendingTasks=R(Ma),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=R(ZO),this.urlSerializer=R(Eg),this.location=R(Na),this.urlHandlingStrategy=R(Mg),this._events=new wt,this.errorHandler=this.options.errorHandler||nP,this.navigated=!1,this.routeReuseStrategy=R(QO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=R(Tg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!R(xg,{optional:!0}),this.eventsSubscription=new Ke,this.isNgZoneEnabled=R($e)instanceof $e&&$e.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof si&&i.code!==Jt.Redirect&&i.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof so)this.navigated=!0;else if(i instanceof Wa){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||KO(o.source)};this.scheduleNavigation(a,Ua,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}sP(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ua,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=M({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Ig),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:u}=i,c=u?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=M(M({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=bw(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return Sw(h,r,d,c??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=fs(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Ua,null,i)}navigate(r,i={skipLocationChange:!1}){return oP(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=M({},rP):i===!1?o=M({},iP):o=i,fs(r))return dw(this.currentUrlTree,r,o);let s=this.parseUrl(r);return dw(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,u,c;a?(l=a.resolve,u=a.reject,c=a.promise):c=new Promise((h,f)=>{l=h,u=f});let d=this.pendingTasks.add();return tP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:l,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function oP(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new B(4008,!1)}function sP(t){return!(t instanceof za)&&!(t instanceof Wa)}var aP=new Q("");function zw(t,...e){return cc([{provide:Tg,multi:!0,useValue:t},[],{provide:ps,useFactory:lP,deps:[$w]},{provide:Mp,multi:!0,useFactory:uP},e.map(n=>n.\u0275providers)])}function lP(t){return t.routerState.root}function uP(){let t=R(Zi);return e=>{let n=t.get(Ra);if(e!==n.components[0])return;let r=t.get($w),i=t.get(cP);t.get(dP)===1&&r.initialNavigation(),t.get(hP,null,oe.Optional)?.setUpPreloading(),t.get(aP,null,oe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var cP=new Q("",{factory:()=>new wt}),dP=new Q("",{providedIn:"root",factory:()=>1});var hP=new Q("");var Ww=[];var qw={providers:[zw(Ww)]};var tD=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(Fe(Qi),Fe(Rn))},e.\u0275dir=Nt({type:e});let t=e;return t})(),nD=(()=>{let e=class e extends tD{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=rs(e)))(o||e)}})(),e.\u0275dir=Nt({type:e,features:[Rr]});let t=e;return t})(),Rg=new Q("");var fP={provide:Rg,useExisting:zi(()=>Zc),multi:!0};function pP(){let t=Nr()?Nr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var gP=new Q(""),Zc=(()=>{let e=class e extends tD{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!pP())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(Fe(Qi),Fe(Rn),Fe(gP,8))},e.\u0275dir=Nt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&On("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Aa([fP]),Rr]});let t=e;return t})();var rD=new Q(""),iD=new Q("");function oD(t){return t!=null}function sD(t){return to(t)?Be(t):t}function aD(t){let e={};return t.forEach(n=>{e=n!=null?M(M({},e),n):e}),Object.keys(e).length===0?null:e}function lD(t,e){return e.map(n=>n(t))}function mP(t){return!t.validate}function uD(t){return t.map(e=>mP(e)?e:n=>e.validate(n))}function yP(t){if(!t)return null;let e=t.filter(oD);return e.length==0?null:function(n){return aD(lD(n,e))}}function cD(t){return t!=null?yP(uD(t)):null}function _P(t){if(!t)return null;let e=t.filter(oD);return e.length==0?null:function(n){let r=lD(n,e).map(sD);return Uh(r).pipe(le(aD))}}function dD(t){return t!=null?_P(uD(t)):null}function Yw(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function hD(t){return t._rawValidators}function fD(t){return t._rawAsyncValidators}function Ag(t){return t?Array.isArray(t)?t:[t]:[]}function $c(t,e){return Array.isArray(t)?t.includes(e):t===e}function Xw(t,e){let n=Ag(e);return Ag(t).forEach(i=>{$c(n,i)||n.push(i)}),n}function Zw(t,e){return Ag(e).filter(n=>!$c(t,n))}var zc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},_s=class extends zc{get formDirective(){return null}get path(){return null}},tl=class extends zc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Wc=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},vP={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},G5=Ee(M({},vP),{"[class.ng-submitted]":"isSubmitted"}),pD=(()=>{let e=class e extends Wc{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Fe(tl,2))},e.\u0275dir=Nt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&vc("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Rr]});let t=e;return t})(),gD=(()=>{let e=class e extends Wc{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Fe(_s,10))},e.\u0275dir=Nt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&vc("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Rr]});let t=e;return t})();var Ja="VALID",Hc="INVALID",ys="PENDING",el="DISABLED";function mD(t){return(Kc(t)?t.validators:t)||null}function CP(t){return Array.isArray(t)?cD(t):t||null}function yD(t,e){return(Kc(e)?e.asyncValidators:t)||null}function EP(t){return Array.isArray(t)?dD(t):t||null}function Kc(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function wP(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new B(1e3,"");if(!r[n])throw new B(1001,"")}function DP(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new B(1002,"")})}var qc=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ja}get invalid(){return this.status===Hc}get pending(){return this.status==ys}get disabled(){return this.status===el}get enabled(){return this.status!==el}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Xw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Xw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Zw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Zw(e,this._rawAsyncValidators))}hasValidator(e){return $c(this._rawValidators,e)}hasAsyncValidator(e){return $c(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ys,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=el,this.errors=null,this._forEachChild(r=>{r.disable(Ee(M({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ee(M({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ja,this._forEachChild(r=>{r.enable(Ee(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ee(M({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ja||this.status===ys)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?el:Ja}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ys,this._hasOwnPendingAsyncValidator=!0;let n=sD(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new lt,this.statusChanges=new lt}_calculateStatus(){return this._allControlsDisabled()?el:this.errors?Hc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ys)?ys:this._anyControlsHaveStatus(Hc)?Hc:Ja}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=CP(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=EP(this._rawAsyncValidators)}},lo=class extends qc{constructor(e,n,r){super(mD(n),yD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){DP(this,!0,e),Object.keys(e).forEach(r=>{wP(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var _D=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>Ng}),Ng="always";function xP(t,e){return[...e.path,t]}function Kw(t,e,n=Ng){Og(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),bP(t,e),TP(t,e),SP(t,e),IP(t,e)}function Qw(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Xc(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Yc(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function IP(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Og(t,e){let n=hD(t);e.validator!==null?t.setValidators(Yw(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=fD(t);e.asyncValidator!==null?t.setAsyncValidators(Yw(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Yc(e._rawValidators,i),Yc(e._rawAsyncValidators,i)}function Xc(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=hD(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=fD(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Yc(e._rawValidators,r),Yc(e._rawAsyncValidators,r),n}function bP(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&vD(t,e)})}function SP(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&vD(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function vD(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function TP(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function MP(t,e){t==null,Og(t,e)}function AP(t,e){return Xc(t,e)}function RP(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function NP(t){return Object.getPrototypeOf(t.constructor)===nD}function OP(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function PP(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Zc?n=o:NP(o)?r=o:i=o}),i||r||n||null}function LP(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Jw(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function eD(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var uo=class extends qc{constructor(e=null,n,r){super(mD(n),yD(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kc(n)&&(n.nonNullable||n.initialValueIsDefault)&&(eD(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Jw(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Jw(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){eD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var FP=t=>t instanceof uo;var CD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Nt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),kP={provide:Rg,useExisting:zi(()=>Pg),multi:!0},Pg=(()=>{let e=class e extends nD{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=rs(e)))(o||e)}})(),e.\u0275dir=Nt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&On("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[Aa([kP]),Rr]});let t=e;return t})();var ED=new Q("");var VP={provide:_s,useExisting:zi(()=>Lg)},Lg=(()=>{let e=class e extends _s{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new lt,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return Kw(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){Qw(r.control||null,r,!1),LP(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,OP(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,o=this.form.get(r.path);i!==o&&(Qw(i||null,r),FP(o)&&(Kw(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);MP(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&AP(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Og(this.form,this),this._oldForm&&Xc(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(Fe(rD,10),Fe(iD,10),Fe(_D,8))},e.\u0275dir=Nt({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&On("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[Rt.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Aa([VP]),Rr,Xi]});let t=e;return t})();var jP={provide:tl,useExisting:zi(()=>Fg)},Fg=(()=>{let e=class e extends tl{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new lt,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=PP(this,s)}ngOnChanges(r){this._added||this._setUpControl(),RP(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return xP(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(Fe(_s,13),Fe(rD,10),Fe(iD,10),Fe(Rg,10),Fe(ED,8))},e.\u0275dir=Nt({type:e,selectors:[["","formControlName",""]],inputs:{name:[Rt.None,"formControlName","name"],isDisabled:[Rt.None,"disabled","isDisabled"],model:[Rt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Aa([jP]),Rr,Xi]});let t=e;return t})();var UP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=qi({type:e}),e.\u0275inj=Wi({});let t=e;return t})();var wD=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:ED,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:_D,useValue:r.callSetDisabledState??Ng}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=qi({type:e}),e.\u0275inj=Wi({imports:[UP]});let t=e;return t})();var kg=class{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};var ze=kg;var Pn={PROPERTYCHANGE:"propertychange"};var Vg=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}},vs=Vg;function DD(t,e,n){let r,i;n=n||Ot;let o=0,s=t.length,a=!1;for(;o<s;)r=o+(s-o>>1),i=+n(t[r],e),i<0?o=r+1:(s=r,a=!i);return a?o:~o}function Ot(t,e){return t>e?1:t<e?-1:0}function Cs(t,e,n){if(t[0]<=e)return 0;let r=t.length;if(e<=t[r-1])return r-1;if(typeof n=="function"){for(let i=1;i<r;++i){let o=t[i];if(o===e)return i;if(o<e)return n(e,t[i-1],o)>0?i-1:i}return r-1}if(n>0){for(let i=1;i<r;++i)if(t[i]<e)return i-1;return r-1}if(n<0){for(let i=1;i<r;++i)if(t[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function xD(t,e,n){for(;e<n;){let r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function dt(t,e){let n=Array.isArray(e)?e:[e],r=n.length;for(let i=0;i<r;i++)t[t.length]=n[i]}function yt(t,e){let n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function ID(t,e,n){let r=e||Ot;return t.every(function(i,o){if(o===0)return!0;let s=r(t[o-1],i);return!(s>0||n&&s===0)})}function Ln(){return!0}function pn(){return!1}function Fn(){}function Qc(t){let e=!1,n,r,i;return function(){let o=Array.prototype.slice.call(arguments);return(!e||this!==i||!yt(o,r))&&(e=!0,i=this,r=o,n=t.apply(this,arguments)),n}}function bD(t){function e(){let n;try{n=t()}catch(r){return Promise.reject(r)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function lr(t){for(let e in t)delete t[e]}function kn(t){let e;for(e in t)return!1;return!e}var jg=class extends vs{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;let r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(n)||i.push(n)}dispatchEvent(e){let n=typeof e=="string",r=n?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;let o=n?new ze(e):e;o.target||(o.target=this.eventTarget_||this);let s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in s||(s[r]=0,a[r]=0),++s[r];let l;for(let u=0,c=i.length;u<c;++u)if("handleEvent"in i[u]?l=i[u].handleEvent(o):l=i[u].call(this,o),l===!1||o.propagationStopped){l=!1;break}if(--s[r]===0){let u=a[r];for(delete a[r];u--;)this.removeEventListener(r,Fn);delete s[r]}return l}disposeInternal(){this.listeners_&&lr(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;let r=this.listeners_[e];if(!r)return;let i=r.indexOf(n);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=Fn,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}},li=jg;var A={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function X(t,e,n,r,i){if(r&&r!==t&&(n=n.bind(r)),i){let s=n;n=function(){t.removeEventListener(e,n),s.apply(this,arguments)}}let o={target:t,type:e,listener:n};return t.addEventListener(e,n),o}function Es(t,e,n,r){return X(t,e,n,r,!0)}function se(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),lr(t))}var ws=class extends li{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(A.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){let r=e.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=X(this,e[o],n);return i}return X(this,e,n)}onceInternal(e,n){let r;if(Array.isArray(e)){let i=e.length;r=new Array(i);for(let o=0;o<i;++o)r[o]=Es(this,e[o],n)}else r=Es(this,e,n);return n.ol_key=r,r}unInternal(e,n){let r=n.ol_key;if(r)GP(r);else if(Array.isArray(e))for(let i=0,o=e.length;i<o;++i)this.removeEventListener(e[i],n);else this.removeEventListener(e,n)}};ws.prototype.on;ws.prototype.once;ws.prototype.un;function GP(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)se(t[e]);else se(t)}var Jc=ws;function j(){throw new Error("Unimplemented abstract method.")}var HP=0;function J(t){return t.ol_uid||(t.ol_uid=String(++HP))}var ed=class extends ze{constructor(e,n,r){super(e),this.key=n,this.oldValue=r}},Ug=class extends Jc{constructor(e){super(),this.on,this.once,this.un,J(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new ed(r,e,n)),r=Pn.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new ed(r,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,r){let i=this.values_||(this.values_={});if(r)i[e]=n;else{let o=i[e];i[e]=n,o!==n&&this.notify(e,o)}}setProperties(e,n){for(let r in e)this.set(r,e[r],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){let r=this.values_[e];delete this.values_[e],kn(this.values_)&&(this.values_=null),n||this.notify(e,r)}}},We=Ug;var rt={ADD:"add",REMOVE:"remove"};var SD={LENGTH:"length"},Ds=class extends ze{constructor(e,n,r){super(e),this.element=n,this.index=r}},Bg=class extends We{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,r=e.length;n<r;++n)this.push(e[n]);return this}forEach(e){let n=this.array_;for(let r=0,i=n.length;r<i;++r)e(n[r],r,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(SD.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new Ds(rt.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);let n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){let n=this.array_;for(let r=0,i=n.length;r<i;++r)if(n[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;let n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Ds(rt.REMOVE,n,e)),n}setAt(e,n){let r=this.getLength();if(e>=r){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);let i=this.array_[e];this.array_[e]=n,this.dispatchEvent(new Ds(rt.REMOVE,i,e)),this.dispatchEvent(new Ds(rt.ADD,n,e))}updateLength_(){this.set(SD.LENGTH,this.array_.length)}assertUnique_(e,n){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==n)throw new Error("Duplicate item added to a unique collection")}},It=Bg;function $(t,e){if(!t)throw new Error(e)}var Gg=class t extends We{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){let n=e;this.setGeometry(n)}else{let n=e;this.setProperties(n)}}clone(){let e=new t(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());let n=this.getGeometry();n&&e.setGeometry(n.clone());let r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(se(this.geometryChangeKey_),this.geometryChangeKey_=null);let e=this.getGeometry();e&&(this.geometryChangeKey_=X(e,A.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?$P(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function $P(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:($(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}var it=Gg;var MG=new Array(6);function ot(){return[1,0,0,1,0,0]}function MD(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ke(t,e){let n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function Je(t,e,n,r,i,o,s,a){let l=Math.sin(o),u=Math.cos(o);return t[0]=r*u,t[1]=i*l,t[2]=-r*l,t[3]=i*u,t[4]=s*r*u-a*r*l+e,t[5]=s*i*l+a*i*u+n,t}function xs(t,e){let n=zP(e);$(n!==0,"Transformation matrix cannot be inverted");let r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5];return t[0]=s/n,t[1]=-i/n,t[2]=-o/n,t[3]=r/n,t[4]=(o*l-s*a)/n,t[5]=-(r*l-i*a)/n,t}function zP(t){return t[0]*t[3]-t[1]*t[2]}var TD=[1e6,1e6,1e6,1e6,2,2];function td(t){return"matrix("+t.map((n,r)=>Math.round(n*TD[r])/TD[r]).join(", ")+")"}var qe={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function nl(t){let e=Ge();for(let n=0,r=t.length;n<r;++n)co(e,t[n]);return e}function WP(t,e,n){let r=Math.min.apply(null,t),i=Math.min.apply(null,e),o=Math.max.apply(null,t),s=Math.max.apply(null,e);return bt(r,i,o,s,n)}function Is(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function rd(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Pt(t,e,n){let r,i;return e<t[0]?r=t[0]-e:t[2]<e?r=e-t[2]:r=0,n<t[1]?i=t[1]-n:t[3]<n?i=n-t[3]:i=0,r*r+i*i}function Vn(t,e){return rl(t,e[0],e[1])}function Or(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function rl(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function nd(t,e){let n=t[0],r=t[1],i=t[2],o=t[3],s=e[0],a=e[1],l=qe.UNKNOWN;return s<n?l=l|qe.LEFT:s>i&&(l=l|qe.RIGHT),a<r?l=l|qe.BELOW:a>o&&(l=l|qe.ABOVE),l===qe.UNKNOWN&&(l=qe.INTERSECTING),l}function Ge(){return[1/0,1/0,-1/0,-1/0]}function bt(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function Pr(t){return bt(1/0,1/0,-1/0,-1/0,t)}function id(t,e){let n=t[0],r=t[1];return bt(n,r,n,r,e)}function bs(t,e,n,r,i){let o=Pr(i);return Hg(o,t,e,n,r)}function Lr(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function od(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function co(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Hg(t,e,n,r,i){for(;n<r;n+=i)qP(t,e[n],e[n+1]);return t}function qP(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Ss(t,e){let n;return n=e(ho(t)),n||(n=e(fo(t)),n)||(n=e(po(t)),n)||(n=e(en(t)),n)?n:!1}function il(t){let e=0;return ci(t)||(e=ie(t)*Ne(t)),e}function ho(t){return[t[0],t[1]]}function fo(t){return[t[2],t[1]]}function Lt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function AD(t,e){let n;if(e==="bottom-left")n=ho(t);else if(e==="bottom-right")n=fo(t);else if(e==="top-left")n=en(t);else if(e==="top-right")n=po(t);else throw new Error("Invalid corner");return n}function ol(t,e,n,r,i){let[o,s,a,l,u,c,d,h]=sd(t,e,n,r);return bt(Math.min(o,a,u,d),Math.min(s,l,c,h),Math.max(o,a,u,d),Math.max(s,l,c,h),i)}function sd(t,e,n,r){let i=e*r[0]/2,o=e*r[1]/2,s=Math.cos(n),a=Math.sin(n),l=i*s,u=i*a,c=o*s,d=o*a,h=t[0],f=t[1];return[h-l+d,f-u-c,h-l-d,f-u+c,h+l-d,f+u+c,h+l+d,f+u-c,h-l+d,f-u-c]}function Ne(t){return t[3]-t[1]}function ui(t,e,n){let r=n||Ge();return Ae(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):Pr(r),r}function en(t){return[t[0],t[3]]}function po(t){return[t[2],t[3]]}function ie(t){return t[2]-t[0]}function Ae(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function ci(t){return t[2]<t[0]||t[3]<t[1]}function RD(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function ND(t,e,n){let r=!1,i=nd(t,e),o=nd(t,n);if(i===qe.INTERSECTING||o===qe.INTERSECTING)r=!0;else{let s=t[0],a=t[1],l=t[2],u=t[3],c=e[0],d=e[1],h=n[0],f=n[1],g=(f-d)/(h-c),y,p;o&qe.ABOVE&&!(i&qe.ABOVE)&&(y=h-(f-u)/g,r=y>=s&&y<=l),!r&&o&qe.RIGHT&&!(i&qe.RIGHT)&&(p=f-(h-l)*g,r=p>=a&&p<=u),!r&&o&qe.BELOW&&!(i&qe.BELOW)&&(y=h-(f-a)/g,r=y>=s&&y<=l),!r&&o&qe.LEFT&&!(i&qe.LEFT)&&(p=f-(h-s)*g,r=p>=a&&p<=u)}return r}function OD(t,e,n,r){if(ci(t))return Pr(n);let i=[];if(r>1){let a=t[2]-t[0],l=t[3]-t[1];for(let u=0;u<r;++u)i.push(t[0]+a*u/r,t[1],t[2],t[1]+l*u/r,t[2]-a*u/r,t[3],t[0],t[3]-l*u/r)}else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);let o=[],s=[];for(let a=0,l=i.length;a<l;a+=2)o.push(i[a]),s.push(i[a+1]);return WP(o,s,n)}function $g(t,e){let n=e.getExtent(),r=Lt(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){let i=ie(n),s=Math.floor((r[0]-n[0])/i)*i;t[0]-=s,t[2]-=s}return t}function PD(t,e){if(e.canWrapX()){let n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];$g(t,e);let r=ie(n);if(ie(t)>r)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+r,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-r,t[3]]]}return[t]}var Fr={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var zg=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Fr[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},ad=zg;var sl=6378137,Ts=Math.PI*sl,YP=[-Ts,-Ts,Ts,Ts],XP=[-180,-85,180,85],ld=sl*Math.log(Math.tan(Math.PI/2)),di=class extends ad{constructor(e){super({code:e,units:"m",extent:YP,global:!0,worldExtent:XP,getPointResolution:function(n,r){return n/Math.cosh(r[1]/sl)}})}},Wg=[new di("EPSG:3857"),new di("EPSG:102100"),new di("EPSG:102113"),new di("EPSG:900913"),new di("http://www.opengis.net/def/crs/EPSG/0/3857"),new di("http://www.opengis.net/gml/srs/epsg.xml#3857")];function LD(t,e,n){let r=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(r));for(let i=0;i<r;i+=n){e[i]=Ts*t[i]/180;let o=sl*Math.log(Math.tan(Math.PI*(+t[i+1]+90)/360));o>ld?o=ld:o<-ld&&(o=-ld),e[i+1]=o}return e}function FD(t,e,n){let r=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(r));for(let i=0;i<r;i+=n)e[i]=180*t[i]/Ts,e[i+1]=360*Math.atan(Math.exp(t[i+1]/sl))/Math.PI-90;return e}var ZP=6378137,kD=[-180,-90,180,90],KP=Math.PI*ZP/180,kr=class extends ad{constructor(e,n){super({code:e,units:"degrees",extent:kD,axisOrientation:n,global:!0,metersPerUnit:KP,worldExtent:kD})}},qg=[new kr("CRS:84"),new kr("EPSG:4326","neu"),new kr("urn:ogc:def:crs:OGC:1.3:CRS84"),new kr("urn:ogc:def:crs:OGC:2:84"),new kr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new kr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new kr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var Yg={};function VD(t){return Yg[t]||Yg[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function jD(t,e){Yg[t]=e}var Ms={};function al(t,e,n){let r=t.getCode(),i=e.getCode();r in Ms||(Ms[r]={}),Ms[r][i]=n}function UD(t,e){let n;return t in Ms&&e in Ms[t]&&(n=Ms[t][e]),n}function ye(t,e,n){return Math.min(Math.max(t,e),n)}function BD(t,e,n,r,i,o){let s=i-n,a=o-r;if(s!==0||a!==0){let l=((t-n)*s+(e-r)*a)/(s*s+a*a);l>1?(n=i,r=o):l>0&&(n+=s*l,r+=a*l)}return Ft(t,e,n,r)}function Ft(t,e,n,r){let i=n-t,o=r-e;return i*i+o*o}function GD(t){let e=t.length;for(let r=0;r<e;r++){let i=r,o=Math.abs(t[r][r]);for(let a=r+1;a<e;a++){let l=Math.abs(t[a][r]);l>o&&(o=l,i=a)}if(o===0)return null;let s=t[i];t[i]=t[r],t[r]=s;for(let a=r+1;a<e;a++){let l=-t[a][r]/t[r][r];for(let u=r;u<e+1;u++)r==u?t[a][u]=0:t[a][u]+=l*t[r][u]}}let n=new Array(e);for(let r=e-1;r>=0;r--){n[r]=t[r][e]/t[r][r];for(let i=r-1;i>=0;i--)t[i][e]-=t[i][r]*n[r]}return n}function As(t){return t*Math.PI/180}function jn(t,e){let n=t%e;return n*e<0?n+e:n}function ht(t,e,n){return t+n*(e-t)}function hi(t,e){let n=Math.pow(10,e);return Math.round(t*n)/n}function ll(t,e){return Math.floor(hi(t,e))}function ul(t,e){return Math.ceil(hi(t,e))}function Xg(t,e,n){let r=n!==void 0?t.toFixed(n):""+t,i=r.indexOf(".");return i=i===-1?r.length:i,i>e?r:new Array(1+e-i).join("0")+r}function $D(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function HD(t,e,n){let r=jn(e+180,360)-180,i=Math.abs(3600*r),o=n||0,s=Math.floor(i/3600),a=Math.floor((i-s*3600)/60),l=hi(i-s*3600-a*60,o);l>=60&&(l=0,a+=1),a>=60&&(a=0,s+=1);let u=s+"\xB0";return(a!==0||l!==0)&&(u+=" "+Xg(a,2)+"\u2032"),l!==0&&(u+=" "+Xg(l,2,o)+"\u2033"),r!==0&&(u+=" "+t.charAt(r<0?1:0)),u}function go(t,e){let n=!0;for(let r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function Rs(t,e){let n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,o=t[1]*n+t[0]*r;return t[0]=i,t[1]=o,t}function zD(t,e){return t[0]*=e,t[1]*=e,t}function Zg(t,e){let n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Kg(t,e){return Math.sqrt(Zg(t,e))}function WD(t,e){return t?HD("NS",t[1],e)+" "+HD("EW",t[0],e):""}function ud(t,e){if(e.canWrapX()){let n=ie(e.getExtent()),r=qD(t,e,n);r&&(t[0]-=r*n)}return t}function qD(t,e,n){let r=e.getExtent(),i=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||ie(r),i=Math.floor((t[0]-r[0])/n)),i}var QP=63710088e-1;function Qg(t,e,n){n=n||QP;let r=As(t[1]),i=As(e[1]),o=(i-r)/2,s=As(e[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}var YD={info:1,warn:2,error:3,none:4},JP=YD.info;function cd(...t){JP>YD.warn||console.warn(...t)}var Jg=!0;function ZD(t){Jg=!(t===void 0?!0:t)}function em(t,e){if(e!==void 0){for(let n=0,r=t.length;n<r;++n)e[n]=t[n];e=e}else e=t.slice();return e}function KD(t,e){if(e!==void 0&&t!==e){for(let n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function eL(t){jD(t.getCode(),t),al(t,t,em)}function tL(t){t.forEach(eL)}function Oe(t){return typeof t=="string"?VD(t):t||null}function tm(t,e,n,r){t=Oe(t);let i,o=t.getPointResolutionFunc();if(o){if(i=o(e,n),r&&r!==t.getUnits()){let s=t.getMetersPerUnit();s&&(i=i*s/Fr[r])}}else{let s=t.getUnits();if(s=="degrees"&&!r||r=="degrees")i=e;else{let a=mo(t,Oe("EPSG:4326"));if(a===KD&&s!=="degrees")i=e*t.getMetersPerUnit();else{let u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];u=a(u,u,2);let c=Qg(u.slice(0,2),u.slice(2,4)),d=Qg(u.slice(4,6),u.slice(6,8));i=(c+d)/2}let l=r?Fr[r]:t.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function XD(t){tL(t),t.forEach(function(e){t.forEach(function(n){e!==n&&al(e,n,em)})})}function nL(t,e,n,r){t.forEach(function(i){e.forEach(function(o){al(i,o,n),al(o,i,r)})})}function dd(t,e){return t?typeof t=="string"?Oe(t):t:Oe(e)}function ur(t,e){if(t===e)return!0;let n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||mo(t,e)===em)&&n}function mo(t,e){let n=t.getCode(),r=e.getCode(),i=UD(n,r);return i||(i=KD),i}function Vr(t,e){let n=Oe(t),r=Oe(e);return mo(n,r)}function hd(t,e,n){return Vr(e,n)(t,void 0,t.length)}function nm(t,e,n,r){let i=Vr(e,n);return OD(t,i,void 0,r)}var gn=null;function rL(t){gn=Oe(t)}function jr(){return gn}function QD(){rL("EPSG:4326")}function cl(t,e){return gn?hd(t,e,gn):t}function kt(t,e){return gn?hd(t,gn,e):(Jg&&!go(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(Jg=!1,cd("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function fi(t,e){return gn?nm(t,e,gn):t}function Un(t,e){return gn?nm(t,gn,e):t}function JD(t,e){if(!gn)return t;let n=Oe(e).getMetersPerUnit(),r=gn.getMetersPerUnit();return n&&r?t*n/r:t}function iL(){XD(Wg),XD(qg),nL(qg,Wg,LD,FD)}iL();function Vt(t,e,n,r,i,o){o=o||[];let s=0;for(let a=e;a<n;a+=r){let l=t[a],u=t[a+1];o[s++]=i[0]*l+i[2]*u+i[4],o[s++]=i[1]*l+i[3]*u+i[5]}return o&&o.length!=s&&(o.length=s),o}function Ns(t,e,n,r,i,o,s){s=s||[];let a=Math.cos(i),l=Math.sin(i),u=o[0],c=o[1],d=0;for(let h=e;h<n;h+=r){let f=t[h]-u,g=t[h+1]-c;s[d++]=u+f*a-g*l,s[d++]=c+f*l+g*a;for(let y=h+2;y<h+r;++y)s[d++]=t[y]}return s&&s.length!=d&&(s.length=d),s}function ex(t,e,n,r,i,o,s,a){a=a||[];let l=s[0],u=s[1],c=0;for(let d=e;d<n;d+=r){let h=t[d]-l,f=t[d+1]-u;a[c++]=l+i*h,a[c++]=u+o*f;for(let g=d+2;g<d+r;++g)a[c++]=t[g]}return a&&a.length!=c&&(a.length=c),a}function tx(t,e,n,r,i,o,s){s=s||[];let a=0;for(let l=e;l<n;l+=r){s[a++]=t[l]+i,s[a++]=t[l+1]+o;for(let u=l+2;u<l+r;++u)s[a++]=t[u]}return s&&s.length!=a&&(s.length=a),s}var nx=ot(),rm=class extends We{constructor(){super(),this.extent_=Ge(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Qc((e,n,r)=>{if(!r)return this.getSimplifiedGeometry(n);let i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return j()}closestPointXY(e,n,r,i){return j()}containsXY(e,n){let r=this.getClosestPoint([e,n]);return r[0]===e&&r[1]===n}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return j()}getExtent(e){if(this.extentRevision_!=this.getRevision()){let n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Pr(n),this.extentRevision_=this.getRevision()}return RD(this.extent_,e)}rotate(e,n){j()}scale(e,n,r){j()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return j()}getType(){return j()}applyTransform(e){j()}intersectsExtent(e){return j()}translate(e,n){j()}transform(e,n){let r=Oe(e),i=r.getUnits()=="tile-pixels"?function(o,s,a){let l=r.getExtent(),u=r.getWorldExtent(),c=Ne(u)/Ne(l);return Je(nx,u[0],u[3],c,-c,0,0,0),Vt(o,0,o.length,a,nx,s),Vr(r,n)(o,s,a)}:Vr(r,n);return this.applyTransform(i),this}},fd=rm;var im=class extends fd{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return bs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return j()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=dl(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){j()}setLayout(e,n,r){let i;if(e)i=dl(e);else{for(let o=0;o<r;++o){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}i=n.length,e=oL(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,n){let r=this.getFlatCoordinates();if(r){let i=this.getStride();Ns(r,0,r.length,i,e,n,r),this.changed()}}scale(e,n,r){n===void 0&&(n=e),r||(r=Lt(this.getExtent()));let i=this.getFlatCoordinates();if(i){let o=this.getStride();ex(i,0,i.length,o,e,n,r,i),this.changed()}}translate(e,n){let r=this.getFlatCoordinates();if(r){let i=this.getStride();tx(r,0,r.length,i,e,n,r),this.changed()}}};function oL(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function dl(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function rx(t,e,n){let r=t.getFlatCoordinates();if(!r)return null;let i=t.getStride();return Vt(r,0,r.length,i,e,n)}var _t=im;function ix(t,e,n,r,i,o,s){let a=t[e],l=t[e+1],u=t[n]-a,c=t[n+1]-l,d;if(u===0&&c===0)d=e;else{let h=((i-a)*u+(o-l)*c)/(u*u+c*c);if(h>1)d=n;else if(h>0){for(let f=0;f<r;++f)s[f]=ht(t[e+f],t[n+f],h);s.length=r;return}else d=e}for(let h=0;h<r;++h)s[h]=t[d+h];s.length=r}function hl(t,e,n,r,i){let o=t[e],s=t[e+1];for(e+=r;e<n;e+=r){let a=t[e],l=t[e+1],u=Ft(o,s,a,l);u>i&&(i=u),o=a,s=l}return i}function fl(t,e,n,r,i){for(let o=0,s=n.length;o<s;++o){let a=n[o];i=hl(t,e,a,r,i),e=a}return i}function ox(t,e,n,r,i){for(let o=0,s=n.length;o<s;++o){let a=n[o];i=fl(t,e,a,r,i),e=a[a.length-1]}return i}function pl(t,e,n,r,i,o,s,a,l,u,c){if(e==n)return u;let d,h;if(i===0){if(h=Ft(s,a,t[e],t[e+1]),h<u){for(d=0;d<r;++d)l[d]=t[e+d];return l.length=r,h}return u}c=c||[NaN,NaN];let f=e+r;for(;f<n;)if(ix(t,f-r,f,r,s,a,c),h=Ft(s,a,c[0],c[1]),h<u){for(u=h,d=0;d<r;++d)l[d]=c[d];l.length=r,f+=r}else f+=r*Math.max((Math.sqrt(h)-Math.sqrt(u))/i|0,1);if(o&&(ix(t,n-r,e,r,s,a,c),h=Ft(s,a,c[0],c[1]),h<u)){for(u=h,d=0;d<r;++d)l[d]=c[d];l.length=r}return u}function gl(t,e,n,r,i,o,s,a,l,u,c){c=c||[NaN,NaN];for(let d=0,h=n.length;d<h;++d){let f=n[d];u=pl(t,e,f,r,i,o,s,a,l,u,c),e=f}return u}function sx(t,e,n,r,i,o,s,a,l,u,c){c=c||[NaN,NaN];for(let d=0,h=n.length;d<h;++d){let f=n[d];u=gl(t,e,f,r,i,o,s,a,l,u,c),e=f[f.length-1]}return u}function pd(t,e,n,r){for(let i=0,o=n.length;i<o;++i)t[e++]=n[i];return e}function yo(t,e,n,r){for(let i=0,o=n.length;i<o;++i){let s=n[i];for(let a=0;a<r;++a)t[e++]=s[a]}return e}function ml(t,e,n,r,i){i=i||[];let o=0;for(let s=0,a=n.length;s<a;++s){let l=yo(t,e,n[s],r);i[o++]=l,e=l}return i.length=o,i}function ax(t,e,n,r,i){i=i||[];let o=0;for(let s=0,a=n.length;s<a;++s){let l=ml(t,e,n[s],r,i[o]);l.length===0&&(l[0]=e),i[o++]=l,e=l[l.length-1]}return i.length=o,i}function _o(t,e,n,r,i,o,s){let a=(n-e)/r;if(a<3){for(;e<n;e+=r)o[s++]=t[e],o[s++]=t[e+1];return s}let l=new Array(a);l[0]=1,l[a-1]=1;let u=[e,n-r],c=0;for(;u.length>0;){let d=u.pop(),h=u.pop(),f=0,g=t[h],y=t[h+1],p=t[d],m=t[d+1];for(let _=h+r;_<d;_+=r){let C=t[_],v=t[_+1],E=BD(C,v,g,y,p,m);E>f&&(c=_,f=E)}f>i&&(l[(c-e)/r]=1,h+r<c&&u.push(h,c),c+r<d&&u.push(c,d))}for(let d=0;d<a;++d)l[d]&&(o[s++]=t[e+d*r],o[s++]=t[e+d*r+1]);return s}function gd(t,e,n,r,i,o,s,a){for(let l=0,u=n.length;l<u;++l){let c=n[l];s=_o(t,e,c,r,i,o,s),a.push(s),e=c}return s}function pi(t,e){return e*Math.round(t/e)}function sL(t,e,n,r,i,o,s){if(e==n)return s;let a=pi(t[e],i),l=pi(t[e+1],i);e+=r,o[s++]=a,o[s++]=l;let u,c;do if(u=pi(t[e],i),c=pi(t[e+1],i),e+=r,e==n)return o[s++]=u,o[s++]=c,s;while(u==a&&c==l);for(;e<n;){let d=pi(t[e],i),h=pi(t[e+1],i);if(e+=r,d==u&&h==c)continue;let f=u-a,g=c-l,y=d-a,p=h-l;if(f*p==g*y&&(f<0&&y<f||f==y||f>0&&y>f)&&(g<0&&p<g||g==p||g>0&&p>g)){u=d,c=h;continue}o[s++]=u,o[s++]=c,a=u,l=c,u=d,c=h}return o[s++]=u,o[s++]=c,s}function yl(t,e,n,r,i,o,s,a){for(let l=0,u=n.length;l<u;++l){let c=n[l];s=sL(t,e,c,r,i,o,s),a.push(s),e=c}return s}function lx(t,e,n,r,i,o,s,a){for(let l=0,u=n.length;l<u;++l){let c=n[l],d=[];s=yl(t,e,c,r,i,o,s,d),a.push(d),e=c[c.length-1]}return s}function mn(t,e,n,r,i){i=i!==void 0?i:[];let o=0;for(let s=e;s<n;s+=r)i[o++]=t.slice(s,s+r);return i.length=o,i}function gi(t,e,n,r,i){i=i!==void 0?i:[];let o=0;for(let s=0,a=n.length;s<a;++s){let l=n[s];i[o++]=mn(t,e,l,r,i[o]),e=l}return i.length=o,i}function _l(t,e,n,r,i){i=i!==void 0?i:[];let o=0;for(let s=0,a=n.length;s<a;++s){let l=n[s];i[o++]=l.length===1&&l[0]===e?[]:gi(t,e,l,r,i[o]),e=l[l.length-1]}return i.length=o,i}function om(t,e,n,r){let i=0,o=t[n-r],s=t[n-r+1];for(;e<n;e+=r){let a=t[e],l=t[e+1];i+=s*a-o*l,o=a,s=l}return i/2}function sm(t,e,n,r){let i=0;for(let o=0,s=n.length;o<s;++o){let a=n[o];i+=om(t,e,a,r),e=a}return i}function ux(t,e,n,r){let i=0;for(let o=0,s=n.length;o<s;++o){let a=n[o];i+=sm(t,e,a,r),e=a[a.length-1]}return i}var am=class t extends _t{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new t(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,r,i){return i<Pt(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(hl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,r,i))}getArea(){return om(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return mn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){let n=[];return n.length=_o(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new t(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yo(this.flatCoordinates,0,e,this.stride),this.changed()}},lm=am;var um=class t extends _t{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){let e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){let o=this.flatCoordinates,s=Ft(e,n,o[0],o[1]);if(s<i){let a=this.stride;for(let l=0;l<a;++l)r[l]=o[l];return r.length=a,s}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return id(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return rl(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=pd(this.flatCoordinates,0,e,this.stride),this.changed()}},ft=um;function cx(t,e,n,r,i){return!Ss(i,function(s){return!mi(t,e,n,r,s[0],s[1])})}function mi(t,e,n,r,i,o){let s=0,a=t[n-r],l=t[n-r+1];for(;e<n;e+=r){let u=t[e],c=t[e+1];l<=o?c>o&&(u-a)*(o-l)-(i-a)*(c-l)>0&&s++:c<=o&&(u-a)*(o-l)-(i-a)*(c-l)<0&&s--,a=u,l=c}return s!==0}function vl(t,e,n,r,i,o){if(n.length===0||!mi(t,e,n[0],r,i,o))return!1;for(let s=1,a=n.length;s<a;++s)if(mi(t,n[s-1],n[s],r,i,o))return!1;return!0}function dx(t,e,n,r,i,o){if(n.length===0)return!1;for(let s=0,a=n.length;s<a;++s){let l=n[s];if(vl(t,e,l,r,i,o))return!0;e=l[l.length-1]}return!1}function Cl(t,e,n,r,i,o,s){let a,l,u,c,d,h,f,g=i[o+1],y=[];for(let _=0,C=n.length;_<C;++_){let v=n[_];for(c=t[v-r],h=t[v-r+1],a=e;a<v;a+=r)d=t[a],f=t[a+1],(g<=h&&f<=g||h<=g&&g<=f)&&(u=(g-h)/(f-h)*(d-c)+c,y.push(u)),c=d,h=f}let p=NaN,m=-1/0;for(y.sort(Ot),c=y[0],a=1,l=y.length;a<l;++a){d=y[a];let _=Math.abs(d-c);_>m&&(u=(c+d)/2,vl(t,e,n,r,u,g)&&(p=u,m=_)),c=d}return isNaN(p)&&(p=i[o]),s?(s.push(p,g,m),s):[p,g,m]}function md(t,e,n,r,i){let o=[];for(let s=0,a=n.length;s<a;++s){let l=n[s];o=Cl(t,e,l,r,i,2*s,o),e=l[l.length-1]}return o}function yd(t,e,n,r,i){let o;for(e+=r;e<n;e+=r)if(o=i(t.slice(e-r,e),t.slice(e,e+r)),o)return o;return!1}function El(t,e,n,r,i){let o=Hg(Ge(),t,e,n,r);return Ae(i,o)?Or(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:yd(t,e,n,r,function(s,a){return ND(i,s,a)}):!1}function hx(t,e,n,r,i){for(let o=0,s=n.length;o<s;++o){if(El(t,e,n[o],r,i))return!0;e=n[o]}return!1}function cm(t,e,n,r,i){return!!(El(t,e,n,r,i)||mi(t,e,n,r,i[0],i[1])||mi(t,e,n,r,i[0],i[3])||mi(t,e,n,r,i[2],i[1])||mi(t,e,n,r,i[2],i[3]))}function dm(t,e,n,r,i){if(!cm(t,e,n[0],r,i))return!1;if(n.length===1)return!0;for(let o=1,s=n.length;o<s;++o)if(cx(t,n[o-1],n[o],r,i)&&!El(t,n[o-1],n[o],r,i))return!1;return!0}function fx(t,e,n,r,i){for(let o=0,s=n.length;o<s;++o){let a=n[o];if(dm(t,e,a,r,i))return!0;e=a[a.length-1]}return!1}function px(t,e,n,r){for(;e<n-r;){for(let i=0;i<r;++i){let o=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=o}e+=r,n-=r}}function hm(t,e,n,r){let i=0,o=t[n-r],s=t[n-r+1];for(;e<n;e+=r){let a=t[e],l=t[e+1];i+=(a-o)*(l+s),o=a,s=l}return i===0?void 0:i>0}function fm(t,e,n,r,i){i=i!==void 0?i:!1;for(let o=0,s=n.length;o<s;++o){let a=n[o],l=hm(t,e,a,r);if(o===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=a}return!0}function gx(t,e,n,r,i){for(let o=0,s=n.length;o<s;++o){let a=n[o];if(!fm(t,e,a,r,i))return!1;a.length&&(e=a[a.length-1])}return!0}function _d(t,e,n,r,i){i=i!==void 0?i:!1;for(let o=0,s=n.length;o<s;++o){let a=n[o],l=hm(t,e,a,r);(o===0?i&&l||!i&&!l:i&&!l||!i&&l)&&px(t,e,a,r),e=a}return e}function pm(t,e,n,r,i){for(let o=0,s=n.length;o<s;++o)e=_d(t,e,n[o],r,i);return e}function mx(t,e){let n=[],r=0,i=0,o;for(let s=0,a=e.length;s<a;++s){let l=e[s],u=hm(t,r,l,2);if(o===void 0&&(o=u),u===o)n.push(e.slice(i,s+1));else{if(n.length===0)continue;n[n.length-1].push(e[i])}i=s+1,r=l}return n}var vd=class t extends _t{constructor(e,n,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&r?(this.setFlatCoordinates(n,e),this.ends_=r):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?dt(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let e=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<Pt(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fl(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gl(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return vl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return sm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),_d(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,gi(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let e=Lt(this.getExtent());this.flatInteriorPoint_=Cl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ft(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new lm(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){let e=this.layout,n=this.flatCoordinates,r=this.ends_,i=[],o=0;for(let s=0,a=r.length;s<a;++s){let l=r[s],u=new lm(n.slice(o,l),e);i.push(u),o=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;fm(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=_d(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){let n=[],r=[];return n.length=yl(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,r),new t(n,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return dm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);let r=ml(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}},tn=vd;function gm(t){if(ci(t))throw new Error("Cannot create polygon from empty extent");let e=t[0],n=t[1],r=t[2],i=t[3],o=[e,n,e,i,r,i,r,n,e,n];return new vd(o,"XY",[o.length])}var pt={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var W={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var Ur={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var vo={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};vo.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};vo.max=vo.whitepoint[2].D65;vo.rgb=function(t,e){e=e||vo.whitepoint[2].E;var n=t[0]/e[0],r=t[1]/e[1],i=t[2]/e[2],o,s,a;return o=n*3.240969941904521+r*-1.537383177570093+i*-.498610760293,s=n*-.96924363628087+r*1.87596750150772+i*.041555057407175,a=n*.055630079696993+r*-.20397695888897+i*1.056971514242878,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),[o*255,s*255,a*255]};Ur.xyz=function(t,e){var n=t[0]/255,r=t[1]/255,i=t[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var o=n*.41239079926595+r*.35758433938387+i*.18048078840183,s=n*.21263900587151+r*.71516867876775+i*.072192315360733,a=n*.019330818715591+r*.11919477979462+i*.95053215224966;return e=e||vo.whitepoint[2].E,[o*e[0],s*e[1],a*e[2]]};var jt=vo;var Cd={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var r,i,o,s,a,l,u,c,d,h,f,g,y;if(o=t[0],s=t[1],a=t[2],o===0)return[0,0,0];var p=.0011070564598794539;return e=e||"D65",n=n||2,d=jt.whitepoint[n][e][0],h=jt.whitepoint[n][e][1],f=jt.whitepoint[n][e][2],g=4*d/(d+15*h+3*f),y=9*h/(d+15*h+3*f),r=s/(13*o)+g||0,i=a/(13*o)+y||0,u=o>8?h*Math.pow((o+16)/116,3):h*o*p,l=u*9*r/(4*i)||0,c=u*(12-3*r-20*i)/(4*i)||0,[l,u,c]}};jt.luv=function(t,e,n){var r,i,o,s,a,l,u,c,d,h,f,g,y,p=.008856451679035631,m=903.2962962962961;e=e||"D65",n=n||2,d=jt.whitepoint[n][e][0],h=jt.whitepoint[n][e][1],f=jt.whitepoint[n][e][2],g=4*d/(d+15*h+3*f),y=9*h/(d+15*h+3*f),l=t[0],u=t[1],c=t[2],r=4*l/(l+15*u+3*c)||0,i=9*u/(l+15*u+3*c)||0;var _=u/h;return o=_<=p?m*_:116*Math.pow(_,1/3)-16,s=13*o*(r-g),a=13*o*(i-y),[o,s,a]};var yx={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e=t[0],n=t[1],r=t[2],i,o,s;return s=r/360*2*Math.PI,i=n*Math.cos(s),o=n*Math.sin(s),[e,i,o]},xyz:function(t){return Cd.xyz(yx.luv(t))}},_x=yx;Cd.lchuv=function(t){var e=t[0],n=t[1],r=t[2],i=Math.sqrt(n*n+r*r),o=Math.atan2(r,n),s=o*360/2/Math.PI;return s<0&&(s+=360),[e,i,s]};jt.lchuv=function(t){return Cd.lchuv(jt.luv(t))};var mm={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var Cx=aL,vx={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function aL(t){var e,n=[],r=1,i;if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(t=String(t).toLowerCase(),mm[t])n=mm[t].slice(),i="rgb";else if(t==="transparent")r=0,i="rgb",n=[0,0,0];else if(t[0]==="#"){var o=t.slice(1),s=o.length,a=s<=4;r=1,a?(n=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],s===4&&(r=parseInt(o[3]+o[3],16)/255)):(n=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],s===8&&(r=parseInt(o[6]+o[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var l=e[1];i=l.replace(/a$/,"");var u=i==="cmyk"?4:i==="gray"?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=n.shift()),n=n.map(function(c,d){if(c[c.length-1]==="%")return c=parseFloat(c)/100,d===3?c:i==="rgb"?c*255:i[0]==="h"||i[0]==="l"&&!d?c*100:i==="lab"?c*125:i==="lch"?d<2?c*150:c*360:i[0]==="o"&&!d?c:i==="oklab"?c*.4:i==="oklch"?d<2?c*.4:c*360:c;if(i[d]==="h"||d===2&&i[i.length-1]==="h"){if(vx[c]!==void 0)return vx[c];if(c.endsWith("deg"))return parseFloat(c);if(c.endsWith("turn"))return parseFloat(c)*360;if(c.endsWith("grad"))return parseFloat(c)*360/400;if(c.endsWith("rad"))return parseFloat(c)*180/Math.PI}return c==="none"?0:parseFloat(c)}),r=n.length>u?n.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(n=t.match(/([0-9]+)/g).map(function(c){return parseFloat(c)}),i=t.match(/([a-z])/ig)?.join("")?.toLowerCase()||"rgb");return{space:i,values:n,alpha:r}}var Ed={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100,i,o,s,a,l,u=0;if(n===0)return l=r*255,[l,l,l];for(o=r<.5?r*(1+n):r+n-r*n,i=2*r-o,a=[0,0,0];u<3;)s=e+1/3*-(u-1),s<0?s++:s>1&&s--,l=6*s<1?i+(o-i)*6*s:2*s<1?o:3*s<2?i+(o-i)*(2/3-s)*6:i,a[u++]=l*255;return a}};Ur.hsl=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=o-i,a,l,u;return o===i?a=0:e===o?a=(n-r)/s:n===o?a=2+(r-e)/s:r===o&&(a=4+(e-n)/s),a=Math.min(a*60,360),a<0&&(a+=360),u=(i+o)/2,o===i?l=0:u<=.5?l=s/(o+i):l=s/(2-o-i),[a,l*100,u*100]};function ym(t){Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var e,n,r,i=Cx(t);if(!i.space)return[];let o=i.space[0]==="h"?Ed.min:Ur.min,s=i.space[0]==="h"?Ed.max:Ur.max;return e=Array(3),e[0]=Math.min(Math.max(i.values[0],o[0]),s[0]),e[1]=Math.min(Math.max(i.values[1],o[1]),s[1]),e[2]=Math.min(Math.max(i.values[2],o[2]),s[2]),i.space[0]==="h"&&(e=Ed.rgb(e)),e.push(Math.min(Math.max(i.alpha,0),1)),e}function Ex(t){return typeof t=="string"?t:Dl(t)}var lL=1024,wl={},_m=0;function wx(t){if(t.length===4)return t;let e=t.slice();return e[3]=1,e}function vm(t){let e=jt.lchuv(Ur.xyz(t));return e[3]=t[3],e}function Dx(t){let e=jt.rgb(_x.xyz(t));return e[3]=t[3],e}function wd(t){if(wl.hasOwnProperty(t))return wl[t];if(_m>=lL){let n=0;for(let r in wl)n++&3||(delete wl[r],--_m)}let e=ym(t);if(e.length!==4)throw new Error('Failed to parse "'+t+'" as color');for(let n of e)if(isNaN(n))throw new Error('Failed to parse "'+t+'" as color');return Cm(e),wl[t]=e,++_m,e}function Br(t){return Array.isArray(t)?t:wd(t)}function Cm(t){return t[0]=ye(t[0]+.5|0,0,255),t[1]=ye(t[1]+.5|0,0,255),t[2]=ye(t[2]+.5|0,0,255),t[3]=ye(t[3],0,1),t}function Dl(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let r=t[2];r!=(r|0)&&(r=r+.5|0);let i=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+r+","+i+")"}function xx(t){try{return wd(t),!0}catch{return!1}}var yi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Ix=yi.includes("firefox"),uL=yi.includes("safari")&&!yi.includes("chrom"),$4=uL&&(yi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(yi)),bx=yi.includes("webkit")&&!yi.includes("edge"),Em=yi.includes("macintosh"),Dd=typeof devicePixelRatio<"u"?devicePixelRatio:1,xd=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,wm=typeof Image<"u"&&Image.prototype.decode;var Id=function(){let t=!1;try{let e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();function Te(t,e,n,r){let i;return n&&n.length?i=n.shift():xd?i=new OffscreenCanvas(t||300,e||300):i=document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}var Dm;function xl(){return Dm||(Dm=Te(1,1)),Dm}function Co(t){let e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function xm(t,e){let n=e.parentNode;n&&n.replaceChild(t,e)}function Il(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Sx(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function Tx(t,e){let n=t.childNodes;for(let r=0;;++r){let i=n[r],o=e[r];if(!i&&!o)break;if(i!==o){if(!i){t.appendChild(o);continue}if(!o){t.removeChild(i),--r;continue}t.insertBefore(o,i)}}}function Mx(t,e,n){let r=t,i=!0,o=!1,s=!1,a=[Es(r,A.LOAD,function(){s=!0,o||e()})];return r.src&&wm?(o=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(s?e():n())})):a.push(Es(r,A.ERROR,n)),function(){i=!1,a.forEach(se)}}function cL(t,e){return new Promise((n,r)=>{function i(){s(),n(t)}function o(){s(),r(new Error("Image load error"))}function s(){t.removeEventListener("load",i),t.removeEventListener("error",o)}t.addEventListener("load",i),t.addEventListener("error",o),e&&(t.src=e)})}function Ax(t,e){return e&&(t.src=e),t.src&&wm?new Promise((n,r)=>t.decode().then(()=>n(t)).catch(i=>t.complete&&t.width?n(t):r(i))):cL(t)}var bm=class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(let n in this.cache_){let r=this.cache_[n];!(e++&3)&&!r.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n,r){let i=Im(e,n,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,n,r){let i=Im(e,n,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,n,r,i,o){let s=Im(e,n,r),a=s in this.cache_;this.cache_[s]=i,o&&(i.getImageState()===W.IDLE&&i.load(),i.getImageState()===W.LOADING?i.ready().then(()=>{this.patternCache_[s]=xl().createPattern(i.getImage(1),"repeat")}):this.patternCache_[s]=xl().createPattern(i.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};function Im(t,e,n){let r=n?Br(n):"null";return e+":"+t+":"+r}var nn=new bm;var bl=null,Sm=class extends li{constructor(e,n,r,i,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.imageState_=i===void 0?W.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===W.LOADED){bl||(bl=Te(1,1,void 0,{willReadFrequently:!0})),bl.drawImage(this.image_,0,0);try{bl.getImageData(0,0,1,1),this.tainted_=!1}catch{bl=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(A.CHANGE)}handleImageError_(){this.imageState_=W.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=W.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let e=this.size_[0],n=this.size_[1],r=Te(e,n);r.fillRect(0,0,e,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===W.IDLE){this.image_||this.initializeImage_(),this.imageState_=W.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Ax(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==W.LOADED)return;let n=this.image_,r=document.createElement("canvas");r.width=Math.ceil(n.width*e),r.height=Math.ceil(n.height*e);let i=r.getContext("2d");i.scale(e,e),i.drawImage(n,0,0),i.globalCompositeOperation="multiply",i.fillStyle=Ex(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(n,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{this.imageState_===W.LOADED||this.imageState_===W.ERROR?e():this.addEventListener(A.CHANGE,function n(){(this.imageState_===W.LOADED||this.imageState_===W.ERROR)&&(this.removeEventListener(A.CHANGE,n),e())})})),this.ready_}};function Os(t,e,n,r,i,o){let s=e===void 0?void 0:nn.get(e,n,i);return s||(s=new Sm(t,t instanceof HTMLImageElement?t.src||void 0:e,n,r,i),nn.set(e,n,i,s,o)),o&&s&&!nn.getPattern(e,n,i)&&nn.set(e,n,i,s,o),s}var Tm=class t{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){let e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){let n=Os(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===W.IDLE&&n.load(),n.getImageState()===W.LOADING&&(this.patternImage_=n)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}},_i=Tm;function Eo(t,e,n,r,i,o,s){let a,l,u=(n-e)/r;if(u===1)a=e;else if(u===2)a=e,l=i;else if(u!==0){let c=t[e],d=t[e+1],h=0,f=[0];for(let p=e+r;p<n;p+=r){let m=t[p],_=t[p+1];h+=Math.sqrt((m-c)*(m-c)+(_-d)*(_-d)),f.push(h),c=m,d=_}let g=i*h,y=DD(f,g);y<0?(l=(g-f[-y-2])/(f[-y-1]-f[-y-2]),a=e+(-y-2)*r):a=e+y*r}s=s>1?s:2,o=o||new Array(s);for(let c=0;c<s;++c)o[c]=a===void 0?NaN:l===void 0?t[a+c]:ht(t[a+c],t[a+r+c],l);return o}function bd(t,e,n,r,i,o){if(n==e)return null;let s;if(i<t[e+r-1])return o?(s=t.slice(e,e+r),s[r-1]=i,s):null;if(t[n-1]<i)return o?(s=t.slice(n-r,n),s[r-1]=i,s):null;if(i==t[e+r-1])return t.slice(e,e+r);let a=e/r,l=n/r;for(;a<l;){let h=a+l>>1;i<t[(h+1)*r-1]?l=h:a=h+1}let u=t[a*r-1];if(i==u)return t.slice((a-1)*r,(a-1)*r+r);let c=t[(a+1)*r-1],d=(i-u)/(c-u);s=[];for(let h=0;h<r-1;++h)s.push(ht(t[(a-1)*r+h],t[a*r+h],d));return s.push(i),s}function Rx(t,e,n,r,i,o,s){if(s)return bd(t,e,n[n.length-1],r,i,o);let a;if(i<t[r-1])return o?(a=t.slice(0,r),a[r-1]=i,a):null;if(t[t.length-1]<i)return o?(a=t.slice(t.length-r),a[r-1]=i,a):null;for(let l=0,u=n.length;l<u;++l){let c=n[l];if(e!=c){if(i<t[e+r-1])return null;if(i<=t[c-1])return bd(t,e,c,r,i,!1);e=c}}return null}function Sd(t,e,n,r){let i=t[e],o=t[e+1],s=0;for(let a=e+r;a<n;a+=r){let l=t[a],u=t[a+1];s+=Math.sqrt((l-i)*(l-i)+(u-o)*(u-o)),i=l,o=u}return s}var Mm=class t extends _t{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendCoordinate(e){dt(this.flatCoordinates,e),this.changed()}clone(){let e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<Pt(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(hl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,r,i))}forEachSegment(e){return yd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,bd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n))}getCoordinates(){return mn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return Eo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return Sd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){let n=[];return n.length=_o(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new t(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return El(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yo(this.flatCoordinates,0,e,this.stride),this.changed()}},cr=Mm;var Am=class t{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){let e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}},wo=Am;function Rm(t){return t[0]>0&&t[1]>0}function Nx(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function Ye(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}var Nm=class t{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Ye(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){let e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return j()}getImage(e){return j()}getHitDetectionImage(){return j()}getPixelRatio(e){return 1}getImageState(){return j()}getImageSize(){return j()}getOrigin(){return j()}getSize(){return j()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ye(e)}listenImageChange(e){j()}load(){j()}unlistenImageChange(e){j()}ready(){return Promise.resolve()}},Td=Nm;function Ut(t){return t?Array.isArray(t)?Dl(t):typeof t=="object"&&"src"in t?dL(t):t:null}function dL(t){if(!t.offset||!t.size)return nn.getPattern(t.src,"anonymous",t.color);let e=t.src+":"+t.offset,n=nn.getPattern(e,void 0,t.color);if(n)return n;let r=nn.get(t.src,"anonymous",null);if(r.getImageState()!==W.LOADED)return null;let i=Te(t.size[0],t.size[1]);return i.drawImage(r.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),Os(i.canvas,e,void 0,W.LOADED,t.color,!0),nn.getPattern(e,void 0,t.color)}var Sl="ol-hidden";var vi="ol-unselectable";var Ps="ol-control",Om="ol-collapsed",hL=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Ox=["style","variant","weight","size","lineHeight","family"],Pm=function(t){let e=t.match(hL);if(!e)return null;let n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,i=Ox.length;r<i;++r){let o=e[r+1];o!==void 0&&(n[Ox[r]]=o)}return n.families=n.family.split(/,\s?/),n};var Ad="10px sans-serif",et="#000",hr="round",Bt=[],Gt=0,fr="round",Gr=10,Hr="#000",Ci="center",Do="middle",$r=[0,0,0,0],zr=1,dr=new We,Ls=null,Lm,Fm={},Px=function(){let e="32px ",n=["monospace","serif"],r=n.length,i="wmytzilWMYTZIL@#/&?$%10\uF013",o,s;function a(u,c,d){let h=!0;for(let f=0;f<r;++f){let g=n[f];if(s=Md(u+" "+c+" "+e+g,i),d!=g){let y=Md(u+" "+c+" "+e+d+","+g,i);h=h&&y!=s}}return!!h}function l(){let u=!0,c=dr.getKeys();for(let d=0,h=c.length;d<h;++d){let f=c[d];dr.get(f)<100&&(a.apply(this,f.split(`
`))?(lr(Fm),Ls=null,Lm=void 0,dr.set(f,100)):(dr.set(f,dr.get(f)+1,!0),u=!1))}u&&(clearInterval(o),o=void 0)}return function(u){let c=Pm(u);if(!c)return;let d=c.families;for(let h=0,f=d.length;h<f;++h){let g=d[h],y=c.style+`
`+c.weight+`
`+g;dr.get(y)===void 0&&(dr.set(y,100,!0),a(c.style,c.weight,g)||(dr.set(y,0,!0),o===void 0&&(o=setInterval(l,32))))}}}(),fL=function(){let t;return function(e){let n=Fm[e];if(n==null){if(xd){let r=Pm(e),i=Lx(e,"\u017Dg");n=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);Fm[e]=n}return n}}();function Lx(t,e){return Ls||(Ls=Te(1,1)),t!=Lm&&(Ls.font=t,Lm=Ls.font),Ls.measureText(e)}function Md(t,e){return Lx(t,e).width}function km(t,e,n){if(e in n)return n[e];let r=e.split(`
`).reduce((i,o)=>Math.max(i,Md(t,o)),0);return n[e]=r,r}function Fx(t,e){let n=[],r=[],i=[],o=0,s=0,a=0,l=0;for(let u=0,c=e.length;u<=c;u+=2){let d=e[u];if(d===`
`||u===c){o=Math.max(o,s),i.push(s),s=0,a+=l;continue}let h=e[u+1]||t.font,f=Md(h,d);n.push(f),s+=f;let g=fL(h);r.push(g),l=Math.max(l,g)}return{width:o,height:a,widths:n,heights:r,lineWidths:i}}function kx(t,e,n,r,i,o,s,a,l,u,c){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=d=>d.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),r.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),pL(r,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(r,i,o,s,a,0,0,s,a)):t.drawImage(r,i,o,s,a,l,u,s*c[0],a*c[1]),t.restore()}function pL(t,e){let n=t.contextInstructions;for(let r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}var Vm=class t extends Td{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?W.LOADING:W.LOADED,this.imageState_===W.LOADING&&this.ready().then(()=>this.imageState_=W.LOADED),this.render()}clone(){let e=this.getScale(),n=new t({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){let e=this.size_,n=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-n[0]/r[0],e[1]/2+n[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let n=this.canvases_[e];if(!n){let r=this.renderOptions_,i=Te(r.size*e,r.size*e);this.draw_(r,i,e),n=i.canvas,this.canvases_[e]=n}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,r){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let i=this.radius_,o=this.radius2_===void 0?i:this.radius2_;if(i<o){let w=i;i=o,o=w}let s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,l=o*Math.sin(a),u=Math.sqrt(o*o-l*l),c=i-u,d=Math.sqrt(l*l+c*c),h=d/l;if(e==="miter"&&h<=r)return h*n;let f=n/2/h,g=n/2*(c/d),p=Math.sqrt((i+f)*(i+f)+g*g)-i;if(this.radius2_===void 0||e==="bevel")return p*2;let m=i*Math.sin(a),_=Math.sqrt(i*i-m*m),C=o-_,E=Math.sqrt(m*m+C*C)/m;if(E<=r){let w=E*n/2-o-i;return 2*Math.max(p,w)}return p*2}createRenderOptions(){let e=hr,n=fr,r=0,i=null,o=0,s,a=0;this.stroke_&&(s=Ut(this.stroke_.getColor()??Hr),a=this.stroke_.getWidth()??zr,i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??fr,e=this.stroke_.getLineCap()??hr,r=this.stroke_.getMiterLimit()??Gr);let l=this.calculateLineJoinSize_(n,a,r),u=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*u+l);return{strokeStyle:s,strokeWidth:a,size:c,lineCap:e,lineDash:i,lineDashOffset:o,lineJoin:n,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();let e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,r){if(n.scale(r,r),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let i=this.fill_.getColor();i===null&&(i=et),n.fillStyle=Ut(i),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Br(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(n=Te(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_,r=this.radius_;if(n===1/0)e.arc(0,0,r,0,2*Math.PI);else{let i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(n*=2);let o=this.angle_-Math.PI/2,s=2*Math.PI/n;for(let a=0;a<n;a++){let l=o+a*s,u=a%2===0?r:i;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=et,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}},Rd=Vm;var jm=class t extends Rd{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){let e=this.getScale(),n=new t({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius_=e,this.render()}},Tl=jm;var Ei=class t{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Vx,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new t({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Vx,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function jx(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:($(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}var Um=null;function Ux(t,e){if(!Um){let n=new _i({color:"rgba(255,255,255,0.4)"}),r=new wo({color:"#3399CC",width:1.25});Um=[new Ei({image:new Tl({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return Um}function Bx(){let t={},e=[255,255,255,1],n=[0,153,255,1],r=3;return t.Polygon=[new Ei({fill:new _i({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new Ei({stroke:new wo({color:e,width:r+2})}),new Ei({stroke:new wo({color:n,width:r})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new Ei({image:new Tl({radius:r*2,fill:new _i({color:n}),stroke:new wo({color:e,width:r/2})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function Vx(t){return t.getGeometry()}var Fs=Ei;var gL="#333",Bm=class t{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Ye(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new _i({color:gL}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){let e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ye(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}},Gx=Bm;var _e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var Gm=class extends We{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;let n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[_e.OPACITY]=e.opacity!==void 0?e.opacity:1,$(typeof n[_e.OPACITY]=="number","Layer opacity must be a number"),n[_e.VISIBLE]=e.visible!==void 0?e.visible:!0,n[_e.Z_INDEX]=e.zIndex,n[_e.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[_e.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[_e.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[_e.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){let n=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return n.opacity=ye(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=r===void 0&&!n.managed?1/0:r,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return j()}getLayerStatesArray(e){return j()}getExtent(){return this.get(_e.EXTENT)}getMaxResolution(){return this.get(_e.MAX_RESOLUTION)}getMinResolution(){return this.get(_e.MIN_RESOLUTION)}getMinZoom(){return this.get(_e.MIN_ZOOM)}getMaxZoom(){return this.get(_e.MAX_ZOOM)}getOpacity(){return this.get(_e.OPACITY)}getSourceState(){return j()}getVisible(){return this.get(_e.VISIBLE)}getZIndex(){return this.get(_e.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(_e.EXTENT,e)}setMaxResolution(e){this.set(_e.MAX_RESOLUTION,e)}setMinResolution(e){this.set(_e.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(_e.MAX_ZOOM,e)}setMinZoom(e){this.set(_e.MIN_ZOOM,e)}setOpacity(e){$(typeof e=="number","Layer opacity must be a number"),this.set(_e.OPACITY,e)}setVisible(e){this.set(_e.VISIBLE,e)}setZIndex(e){this.set(_e.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},Nd=Gm;var tt={ANIMATING:0,INTERACTING:1};var yn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Hm(t,e,n){return function(r,i,o,s,a){if(!r)return;if(!i&&!e)return r;let l=e?0:o[0]*i,u=e?0:o[1]*i,c=a?a[0]:0,d=a?a[1]:0,h=t[0]+l/2+c,f=t[2]-l/2+c,g=t[1]+u/2+d,y=t[3]-u/2+d;h>f&&(h=(f+h)/2,f=h),g>y&&(g=(y+g)/2,y=g);let p=ye(r[0],h,f),m=ye(r[1],g,y);if(s&&n&&i){let _=30*i;p+=-_*Math.log(1+Math.max(0,h-r[0])/_)+_*Math.log(1+Math.max(0,r[0]-f)/_),m+=-_*Math.log(1+Math.max(0,g-r[1])/_)+_*Math.log(1+Math.max(0,r[1]-y)/_)}return[p,m]}}function Hx(t){return t}function $m(t,e,n,r){let i=ie(e)/n[0],o=Ne(e)/n[1];return r?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function zm(t,e,n){let r=Math.min(t,e),i=50;return r*=Math.log(1+i*Math.max(0,t/e-1))/i+1,n&&(r=Math.max(r,n),r/=Math.log(1+i*Math.max(0,n/t-1))/i+1),ye(r,n/2,e*2)}function $x(t,e,n,r){return e=e!==void 0?e:!0,function(i,o,s,a){if(i!==void 0){let l=t[0],u=t[t.length-1],c=n?$m(l,n,s,r):l;if(a)return e?zm(i,c,u):ye(i,u,c);let d=Math.min(c,i),h=Math.floor(Cs(t,d,o));return t[h]>c&&h<t.length-1?t[h+1]:t[h]}}}function zx(t,e,n,r,i,o){return r=r!==void 0?r:!0,n=n!==void 0?n:0,function(s,a,l,u){if(s!==void 0){let c=i?$m(e,i,l,o):e;if(u)return r?zm(s,c,n):ye(s,n,c);let d=1e-9,h=Math.ceil(Math.log(e/c)/Math.log(t)-d),f=-a*(.5-d)+.5,g=Math.min(c,s),y=Math.floor(Math.log(e/g)/Math.log(t)+f),p=Math.max(h,y),m=e/Math.pow(t,p);return ye(m,n,c)}}}function Wm(t,e,n,r,i){return n=n!==void 0?n:!0,function(o,s,a,l){if(o!==void 0){let u=r?$m(t,r,a,i):t;return!n||!l?ye(o,e,u):zm(o,u,e)}}}function ks(t){if(t!==void 0)return 0}function qm(t){if(t!==void 0)return t}function Wx(t){let e=2*Math.PI/t;return function(n,r){if(r)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n}}function qx(t){let e=t===void 0?As(5):t;return function(n,r){return r||n===void 0?n:Math.abs(n)<=e?0:n}}function Ym(t){return Math.pow(t,3)}function _n(t){return 1-Ym(1-t)}function Yx(t){return 3*t*t-2*t*t*t}function Xx(t){return t}var Xm=0,Km=class extends We{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=dd(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&ZD(),e.center&&(e.center=kt(e.center,this.projection_)),e.extent&&(e.extent=Un(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){let n=Object.assign({},e);for(let a in yn)delete n[a];this.setProperties(n,!0);let r=yL(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;let i=mL(e),o=r.constraint,s=_L(e);this.constraints_={center:i,resolution:o,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;let r=this.getCenterInternal();if(r){let i=e||[0,0,0,0];n=n||[0,0,0,0];let o=this.getResolution(),s=o/2*(i[3]-n[3]+n[1]-i[1]),a=o/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([r[0]+s,r[1]-a])}}getUpdatedOptions_(e){let n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let n=new Array(arguments.length);for(let r=0;r<n.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=kt(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=kt(i.anchor,this.getProjection())),n[r]=i}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,r;n>1&&typeof arguments[n-1]=="function"&&(r=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){let c=arguments[i];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(i===n){r&&Od(r,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_,u=[];for(;i<n;++i){let c=arguments[i],d={start:o,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||Yx,callback:r};if(c.center&&(d.sourceCenter=s,d.targetCenter=c.center.slice(),s=d.targetCenter),c.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(c.zoom),a=d.targetResolution):c.resolution&&(d.sourceResolution=a,d.targetResolution=c.resolution,a=d.targetResolution),c.rotation!==void 0){d.sourceRotation=l;let h=jn(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+h,l=d.targetRotation}vL(d)?d.complete=!0:o+=d.duration,u.push(d)}this.animations_.push(u),this.setHint(tt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[tt.ANIMATING]>0}getInteracting(){return this.hints_[tt.INTERACTING]>0}cancelAnimations(){this.setHint(tt.ANIMATING,-this.hints_[tt.ANIMATING]);let e;for(let n=0,r=this.animations_.length;n<r;++n){let i=this.animations_[n];if(i[0].callback&&Od(i[0].callback,!1),!e)for(let o=0,s=i.length;o<s;++o){let a=i[o];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let e=Date.now(),n=!1;for(let r=this.animations_.length-1;r>=0;--r){let i=this.animations_[r],o=!0;for(let s=0,a=i.length;s<a;++s){let l=i[s];if(l.complete)continue;let u=e-l.start,c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):o=!1;let d=l.easing(c);if(l.sourceCenter){let h=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],y=l.targetCenter[1];this.nextCenter_=l.targetCenter;let p=h+d*(g-h),m=f+d*(y-f);this.targetCenter_=[p,m]}if(l.sourceResolution&&l.targetResolution){let h=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){let f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(h,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){let h=d===1?jn(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){let f=this.constraints_.rotation(h,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=h}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(o){this.animations_[r]=null,this.setHint(tt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let s=i[0].callback;s&&Od(s,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let r,i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-n[0],i[1]-n[1]],Rs(r,e-this.getRotation()),$D(r,n)),r}calculateCenterZoom(e,n){let r,i=this.getCenterInternal(),o=this.getResolution();if(i!==void 0&&o!==void 0){let s=n[0]-e*(n[0]-i[0])/o,a=n[1]-e*(n[1]-i[1])/o;r=[s,a]}return r}getViewportSize_(e){let n=this.viewportSize_;if(e){let r=n[0],i=n[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let e=this.getCenterInternal();return e&&cl(e,this.getProjection())}getCenterInternal(){return this.get(yn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){let n=this.calculateExtentInternal(e);return fi(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();let n=this.getCenterInternal();$(n,"The view center is not defined");let r=this.getResolution();$(r!==void 0,"The view resolution is not defined");let i=this.getRotation();return $(i!==void 0,"The view rotation is not defined"),ol(n,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(yn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(Un(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();let r=ie(e)/n[0],i=Ne(e)/n[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;let n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return function(o){return n/Math.pow(e,o*i)}}getRotation(){return this.get(yn.ROTATION)}getValueForResolutionFunction(e){let n=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,o=Math.log(r/i)/n;return function(s){return Math.log(r/s)/n/o}}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e),r=this.padding_;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n}getState(){let e=this.getProjection(),n=this.getResolution(),r=this.getRotation(),i=this.getCenterInternal(),o=this.padding_;if(o){let s=this.getViewportSizeMinusPadding_();i=Zm(i,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],n,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e,n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,r,i;if(this.resolutions_){let o=Cs(this.resolutions_,e,1);n=o,r=this.resolutions_[o],o==this.resolutions_.length-1?i=2:i=r/this.resolutions_[o+1]}else r=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;let n=ye(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(r,ye(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let r;if($(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){$(!ci(e),"Cannot fit empty extent provided as `geometry`");let i=Un(e,this.getProjection());r=gm(i)}else if(e.getType()==="Circle"){let i=Un(e.getExtent(),this.getProjection());r=gm(i),r.rotate(this.getRotation(),Lt(i))}else{let i=jr();i?r=e.clone().transform(i,this.getProjection()):r=e}this.fitInternal(r,n)}rotatedExtentForGeometry(e){let n=this.getRotation(),r=Math.cos(n),i=Math.sin(-n),o=e.getFlatCoordinates(),s=e.getStride(),a=1/0,l=1/0,u=-1/0,c=-1/0;for(let d=0,h=o.length;d<h;d+=s){let f=o[d]*r-o[d+1]*i,g=o[d]*i+o[d+1]*r;a=Math.min(a,f),l=Math.min(l,g),u=Math.max(u,f),c=Math.max(c,g)}return[a,l,u,c]}fitInternal(e,n){n=n||{};let r=n.size;r||(r=this.getViewportSizeMinusPadding_());let i=n.padding!==void 0?n.padding:[0,0,0,0],o=n.nearest!==void 0?n.nearest:!1,s;n.minResolution!==void 0?s=n.minResolution:n.maxZoom!==void 0?s=this.getResolutionForZoom(n.maxZoom):s=0;let a=this.rotatedExtentForGeometry(e),l=this.getResolutionForExtentInternal(a,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?s:Math.max(l,s),l=this.getConstrainedResolution(l,o?0:1);let u=this.getRotation(),c=Math.sin(u),d=Math.cos(u),h=Lt(a);h[0]+=(i[1]-i[3])/2*l,h[1]+=(i[0]-i[2])/2*l;let f=h[0]*d-h[1]*c,g=h[1]*d+h[0]*c,y=this.getConstrainedCenter([f,g],l),p=n.callback?n.callback:Fn;n.duration!==void 0?this.animateInternal({resolution:l,center:y,duration:n.duration,easing:n.easing},p):(this.targetResolution_=l,this.targetCenter_=y,this.applyTargetState_(!1,!0),Od(p,!0))}centerOn(e,n,r){this.centerOnInternal(kt(e,this.getProjection()),n,r)}centerOnInternal(e,n,r){this.setCenterInternal(Zm(e,n,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,r,i){let o,s=this.padding_;if(s&&e){let a=this.getViewportSizeMinusPadding_(-r),l=Zm(e,i,[a[0]/2+s[3],a[1]/2+s[0]],n,r);o=[e[0]-l[0],e[1]-l[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){let n=cl(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){let n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&kt(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){let r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,i,r);n&&(this.targetCenter_=this.calculateCenterZoom(o,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=kt(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){let r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&kt(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){let r=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,o,r),a=this.constraints_.center(this.targetCenter_,s,o,r,this.calculateCenterShift(this.targetCenter_,s,i,o));this.get(yn.ROTATION)!==i&&this.set(yn.ROTATION,i),this.get(yn.RESOLUTION)!==s&&(this.set(yn.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(yn.CENTER)||!go(this.get(yn.CENTER),a))&&this.set(yn.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,r){e=e!==void 0?e:200;let i=n||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,i,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!go(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:a,duration:e,easing:_n,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(tt.INTERACTING,1)}endInteraction(e,n,r){r=r&&kt(r,this.getProjection()),this.endInteractionInternal(e,n,r)}endInteractionInternal(e,n,r){this.getInteracting()&&(this.setHint(tt.INTERACTING,-1),this.resolveConstraints(e,n,r))}getConstrainedCenter(e,n){let r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),r)}getConstrainedZoom(e,n){let r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,n))}getConstrainedResolution(e,n){n=n||0;let r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,r)}};function Od(t,e){setTimeout(function(){t(e)},0)}function mL(t){if(t.extent!==void 0){let n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return Hm(t.extent,t.constrainOnlyCenter,n)}let e=dd(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){let n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Hm(n,!1,!1)}return Hx}function yL(t){let e,n,r,s=t.minZoom!==void 0?t.minZoom:Xm,a=t.maxZoom!==void 0?t.maxZoom:28,l=t.zoomFactor!==void 0?t.zoomFactor:2,u=t.multiWorld!==void 0?t.multiWorld:!1,c=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,d=t.showFullExtent!==void 0?t.showFullExtent:!1,h=dd(t.projection,"EPSG:3857"),f=h.getExtent(),g=t.constrainOnlyCenter,y=t.extent;if(!u&&!y&&h.isGlobal()&&(g=!1,y=f),t.resolutions!==void 0){let p=t.resolutions;n=p[s],r=p[a]!==void 0?p[a]:p[p.length-1],t.constrainResolution?e=$x(p,c,!g&&y,d):e=Wm(n,r,c,!g&&y,d)}else{let m=(f?Math.max(ie(f),Ne(f)):360*Fr.degrees/h.getMetersPerUnit())/256/Math.pow(2,Xm),_=m/Math.pow(2,28-Xm);n=t.maxResolution,n!==void 0?s=0:n=m/Math.pow(l,s),r=t.minResolution,r===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?r=n/Math.pow(l,a):r=m/Math.pow(l,a):r=_),a=s+Math.floor(Math.log(n/r)/Math.log(l)),r=n/Math.pow(l,a-s),t.constrainResolution?e=zx(l,n,r,c,!g&&y,d):e=Wm(n,r,c,!g&&y,d)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:s,zoomFactor:l}}function _L(t){if(t.enableRotation!==void 0?t.enableRotation:!0){let n=t.constrainRotation;return n===void 0||n===!0?qx():n===!1?qm:typeof n=="number"?Wx(n):qm}return ks}function vL(t){return!(t.sourceCenter&&t.targetCenter&&!go(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function Zm(t,e,n,r,i){let o=Math.cos(-i),s=Math.sin(-i),a=t[0]*o-t[1]*s,l=t[1]*o+t[0]*s;a+=(e[0]/2-n[0])*r,l+=(n[1]-e[1]/2)*r,s=-s;let u=a*o-l*s,c=l*o+a*s;return[u,c]}var Ht=Km;var Qm=class extends Nd{constructor(e){let n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(_e.SOURCE,this.handleSourcePropertyChange_);let r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(_e.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(se(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;let e=this.getSource();e&&(this.sourceChangeKey_=X(e,A.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n,r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof Ht?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&r&&(n.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;n.layerStatesArray?i=n.layerStatesArray.find(s=>s.layer===this):i=this.getLayerState();let o=this.getExtent();return Ml(i,n.viewState)&&(!o||Ae(o,n.extent))}getAttributions(e){if(!this.isVisible(e))return[];let n,r=this.getSource();if(r&&(n=r.getAttributions()),!n)return[];let i=e instanceof Ht?e.getViewStateAndExtent():e,o=n(i);return Array.isArray(o)||(o=[o]),o}render(e,n){let r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){let n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(_e.MAP,e)}getMapInternal(){return this.get(_e.MAP)}setMap(e){this.mapPrecomposeKey_&&(se(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(se(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=X(e,pt.PRECOMPOSE,function(n){let i=n.frameState.layerStatesArray,o=this.getLayerState(!1);$(!i.some(function(s){return s.layer===o.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(o)},this),this.mapRenderKey_=X(this,A.CHANGE,e.render,e),this.changed())}setSource(e){this.set(_e.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function Ml(t,e){if(!t.visible)return!1;let n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;let r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}var xo=Qm;var uI=hv(ty(),1);function Kx(t,e,n,r){return n!==void 0&&r!==void 0?[n/t,r/e]:n!==void 0?n/t:r!==void 0?r/e:1}var ny=class t extends Td{constructor(e){e=e||{};let n=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;let s=e.img!==void 0?e.img:null,a=e.src;$(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||J(s)),$(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),$(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=W.IDLE:s!==void 0&&(s instanceof HTMLImageElement?s.complete?l=s.src?W.LOADED:W.IDLE:l=W.LOADING:l=W.LOADED),this.color_=e.color!==void 0?Br(e.color):null,this.iconImage_=Os(s,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{let d=this.getImage(1);if(d.width&&d.height)u=d.width,c=d.height;else if(d instanceof HTMLImageElement){this.initialOptions_=e;let h=()=>{if(this.unlistenImageChange(h),!this.initialOptions_)return;let f=this.iconImage_.getSize();this.setScale(Kx(f[0],f[1],e.width,e.height))};this.listenImageChange(h);return}}u!==void 0&&this.setScale(Kx(u,c,e.width,e.height))}}clone(){let e,n,r;return this.initialOptions_?(n=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;let i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}let n=this.getDisplacement(),r=this.getScaleArray();return[e[0]-n[0]/r[0],e[1]+n[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){let n=this.getSize(),r=this.iconImage_.getSize();if(!n||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==W.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){let e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==W.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(A.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(A.CHANGE,e)}ready(){return this.iconImage_.ready()}},Al=ny;var Vs=0,js=0,Ve=1<<Vs++,V=1<<Vs++,$t=1<<Vs++,Xe=1<<Vs++,pr=1<<Vs++,vt=Math.pow(2,Vs)-1,Jx={[Ve]:"boolean",[V]:"number",[$t]:"string",[Xe]:"color",[pr]:"number[]"},CL=Object.keys(Jx).map(Number).sort(Ot);function gt(t){let e=[];for(let n of CL)EL(t,n)&&e.push(Jx[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function EL(t,e){return(t&e)===e}function Gn(t,e){return!!(t&e)}function Pd(t,e){return t===e}var Bn=class{constructor(e,n){this.type=e,this.value=n}},ry=class{constructor(e,n,...r){this.type=e,this.operator=n,this.args=r}};function iy(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function wL(t){switch(t){case"string":return $t;case"color":return Xe;case"number":return V;case"boolean":return Ve;case"number[]":return pr;default:throw new Error(`Unrecognized type hint: ${t}`)}}function ve(t,e,n){switch(typeof t){case"boolean":return new Bn(Ve,t);case"number":return new Bn(V,t);case"string":{let i=$t;return xx(t)&&(i|=Xe),Pd(i&n,js)||(i&=n),new Bn(i,t)}default:}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(t.length===0)throw new Error("Empty expression");if(typeof t[0]=="string")return PL(t,e,n);for(let i of t)if(typeof i!="number")throw new Error("Expected an array of numbers");let r=pr;return(t.length===3||t.length===4)&&(r|=Xe),n&&(r&=n),new Bn(r,t)}var b={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},DL={[b.Get]:Y(([t,e])=>e!==void 0?wL(e.value):vt,ne(1,2),xL),[b.Var]:Y(([t])=>t.type,ne(1,1),IL),[b.Id]:Y(V|$t,Rl,bL),[b.Concat]:Y($t,ne(2,1/0),pe(vt)),[b.GeometryType]:Y($t,Rl,SL),[b.Resolution]:Y(V,Rl),[b.Zoom]:Y(V,Rl),[b.Time]:Y(V,Rl),[b.Any]:Y(Ve,ne(2,1/0),pe(Ve)),[b.All]:Y(Ve,ne(2,1/0),pe(Ve)),[b.Not]:Y(Ve,ne(1,1),pe(Ve)),[b.Equal]:Y(Ve,ne(2,2),pe(vt),wi),[b.NotEqual]:Y(Ve,ne(2,2),pe(vt),wi),[b.GreaterThan]:Y(Ve,ne(2,2),pe(vt),wi),[b.GreaterThanOrEqualTo]:Y(Ve,ne(2,2),pe(vt),wi),[b.LessThan]:Y(Ve,ne(2,2),pe(vt),wi),[b.LessThanOrEqualTo]:Y(Ve,ne(2,2),pe(vt),wi),[b.Multiply]:Y(t=>{let e=V|Xe;for(let n=0;n<t.length;n++)e&=t[n].type;return e},ne(2,1/0),pe(V|Xe),wi),[b.Coalesce]:Y(t=>{let e=vt;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},ne(2,1/0),pe(vt),wi),[b.Divide]:Y(V,ne(2,2),pe(V)),[b.Add]:Y(V,ne(2,1/0),pe(V)),[b.Subtract]:Y(V,ne(2,2),pe(V)),[b.Clamp]:Y(V,ne(3,3),pe(V)),[b.Mod]:Y(V,ne(2,2),pe(V)),[b.Pow]:Y(V,ne(2,2),pe(V)),[b.Abs]:Y(V,ne(1,1),pe(V)),[b.Floor]:Y(V,ne(1,1),pe(V)),[b.Ceil]:Y(V,ne(1,1),pe(V)),[b.Round]:Y(V,ne(1,1),pe(V)),[b.Sin]:Y(V,ne(1,1),pe(V)),[b.Cos]:Y(V,ne(1,1),pe(V)),[b.Atan]:Y(V,ne(1,2),pe(V)),[b.Sqrt]:Y(V,ne(1,1),pe(V)),[b.Match]:Y(t=>{let e=vt;for(let n=2;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},ne(4,1/0),Qx,ML),[b.Between]:Y(Ve,ne(3,3),pe(V)),[b.Interpolate]:Y(t=>{let e=Xe|V;for(let n=3;n<t.length;n+=2)e&=t[n].type;return e},ne(6,1/0),Qx,AL),[b.Case]:Y(t=>{let e=vt;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},ne(3,1/0),TL,RL),[b.In]:Y(Ve,ne(2,2),NL),[b.Number]:Y(V,ne(1,1/0),pe(vt)),[b.String]:Y($t,ne(1,1/0),pe(vt)),[b.Array]:Y(t=>t.length===3||t.length===4?pr|Xe:pr,ne(1,1/0),pe(V)),[b.Color]:Y(Xe,ne(1,4),pe(V)),[b.Band]:Y(V,ne(1,3),pe(V)),[b.Palette]:Y(Xe,ne(2,2),OL),[b.ToString]:Y($t,ne(1,1),pe(Ve|V|$t|Xe))};function xL(t,e){let n=ve(t[1],e);if(!(n instanceof Bn))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(n.value),t.length===3){let r=ve(t[2],e);return[n,r]}return[n]}function IL(t,e,n,r){let i=t[1];if(typeof i!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(i),!("variables"in e.style)||e.style.variables[i]===void 0)return[new Bn(vt,i)];let o=e.style.variables[i],s=ve(o,e);if(s.value=i,r&&!Gn(r,s.type))throw new Error(`The variable ${i} has type ${gt(s.type)} but the following type was expected: ${gt(r)}`);return[s]}function bL(t,e){e.featureId=!0}function SL(t,e){e.geometryType=!0}function Rl(t,e){let n=t[0];if(t.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function ne(t,e){return function(n,r){let i=n[0],o=n.length-1;if(t===e){if(o!==t){let s=t===1?"":"s";throw new Error(`Expected ${t} argument${s} for ${i}, got ${o}`)}}else if(o<t||o>e){let s=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`Expected ${s} arguments for ${i}, got ${o}`)}}}function pe(t){return function(e,n){let r=e[0],i=e.length-1,o=new Array(i);for(let s=0;s<i;++s){let a=ve(e[s+1],n);if(!Gn(t,a.type)){let l=gt(t),u=gt(a.type);throw new Error(`Unexpected type for argument ${s} of ${r} operation, got ${l} but expected ${u}`)}a.type&=t,o[s]=a}return o}}function wi(t,e,n){let r=t[0],i=t.length-1,o=vt;for(let a=0;a<n.length;++a)o&=n[a].type;if(o===js)throw new Error(`No common type could be found for arguments of ${r} operation`);let s=new Array(i);for(let a=0;a<i;++a)s[a]=ve(t[a+1],e,o);return s}function TL(t,e){let n=t[0],r=t.length-1;if(r%2===0)throw new Error(`An odd amount of arguments was expected for operation ${n}, got ${JSON.stringify(r)} instead`)}function Qx(t,e){let n=t[0],r=t.length-1;if(r%2===1)throw new Error(`An even amount of arguments was expected for operation ${n}, got ${JSON.stringify(r)} instead`)}function ML(t,e,n,r){let i=t.length-1,s=ve(t[1],e).type,a=ve(t[t.length-1],e),l=r!==void 0?r&a.type:a.type,u=new Array(i-2);for(let d=0;d<i-2;d+=2){let h=ve(t[d+2],e),f=ve(t[d+3],e);s&=h.type,l&=f.type,u[d]=h,u[d+1]=f}let c=$t|V|Ve;if(!Gn(c,s))throw new Error(`Expected an input of type ${gt(c)} for the interpolate operation, got ${gt(s)} instead`);if(Pd(l,js))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(let d=0;d<i-2;d+=2){let h=ve(t[d+2],e,s),f=ve(t[d+3],e,l);u[d]=h,u[d+1]=f}return[ve(t[1],e,s),...u,ve(t[t.length-1],e,l)]}function AL(t,e,n,r){let i=t[1],o;switch(i[0]){case"linear":o=1;break;case"exponential":if(o=i[1],typeof o!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(o)} instead`);break;default:o=null}if(!o)throw new Error(`Invalid interpolation type: ${JSON.stringify(i)}`);o=ve(o,e);let s=ve(t[2],e);if(!Gn(V,s.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${gt(s.type)} instead`);s=ve(t[2],e,V);let a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){let u=ve(t[l+3],e);if(!Gn(V,u.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${gt(u.type)} at position ${l+2} instead`);let c=ve(t[l+4],e);if(!Gn(V|Xe,c.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${gt(c.type)} at position ${l+3} instead`);u=ve(t[l+3],e,V),c=ve(t[l+4],e,V|Xe),a[l]=u,a[l+1]=c}return[o,s,...a]}function RL(t,e,n,r){let i=ve(t[t.length-1],e),o=r!==void 0?r&i.type:i.type,s=new Array(t.length-1);for(let a=0;a<s.length-1;a+=2){let l=ve(t[a+1],e),u=ve(t[a+2],e);if(!Gn(Ve,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${gt(l.type)} at position ${a} instead`);o&=u.type,s[a]=l,s[a+1]=u}if(Pd(o,js))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(let a=0;a<s.length-1;a+=2)s[a+1]=ve(t[a+2],e,o);return s[s.length-1]=ve(t[t.length-1],e,o),s}function NL(t,e){let n=t[2];if(!Array.isArray(n))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(n[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');n=n[1]}let r=$t|V,i=new Array(n.length);for(let s=0;s<i.length;s++){let a=ve(n[s],e);r&=a.type,i[s]=a}if(Pd(r,js))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[ve(t[1],e,r),...i]}function OL(t,e){let n=ve(t[1],e,V);if(n.type!==V)throw new Error(`The first argument of palette must be an number, got ${gt(n.type)} instead`);let r=t[2];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");let i=new Array(r.length);for(let o=0;o<i.length;o++){let s=ve(r[o],e,Xe);if(!(s instanceof Bn))throw new Error(`The palette color at index ${o} must be a literal value`);if(!Gn(s.type,Xe))throw new Error(`The palette color at index ${o} should be of type color, got ${gt(s.type)} instead`);i[o]=s}return[n,...i]}function Y(t,...e){return function(n,r,i){let o=n[0],s=[];for(let l=0;l<e.length;l++)s=e[l](n,r,s,i)||s;let a=typeof t=="function"?t(s):t;if(i!==void 0){if(!Gn(a,i))throw new Error(`The following expression was expected to return ${gt(i)}, but returns ${gt(a)} instead: ${JSON.stringify(n)}`);a&=i}if(a===js)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(n)}`);return new ry(a,o,...s)}}function PL(t,e,n){let r=t[0],i=DL[r];if(!i)throw new Error(`Unknown operator: ${r}`);return i(t,e,n)}function oy(t){if(!t)return"";let e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return oy(t.getGeometries()[0]);default:return""}}function sy(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function gr(t,e,n){let r=ve(t,n);if(!Gn(e,r.type)){let i=gt(e),o=gt(r.type);throw new Error(`Expected expression to be of type ${i}, got ${o}`)}return Hn(r,n)}function Hn(t,e){if(t instanceof Bn){if(t.type===Xe&&typeof t.value=="string"){let r=wd(t.value);return function(){return r}}return function(){return t.value}}let n=t.operator;switch(n){case b.Number:case b.String:case b.Coalesce:return LL(t,e);case b.Get:case b.Var:return FL(t,e);case b.Id:return r=>r.featureId;case b.GeometryType:return r=>r.geometryType;case b.Concat:{let r=t.args.map(i=>Hn(i,e));return i=>"".concat(...r.map(o=>o(i).toString()))}case b.Resolution:return r=>r.resolution;case b.Any:case b.All:case b.Between:case b.In:case b.Not:return VL(t,e);case b.Equal:case b.NotEqual:case b.LessThan:case b.LessThanOrEqualTo:case b.GreaterThan:case b.GreaterThanOrEqualTo:return kL(t,e);case b.Multiply:case b.Divide:case b.Add:case b.Subtract:case b.Clamp:case b.Mod:case b.Pow:case b.Abs:case b.Floor:case b.Ceil:case b.Round:case b.Sin:case b.Cos:case b.Atan:case b.Sqrt:return jL(t,e);case b.Case:return UL(t,e);case b.Match:return BL(t,e);case b.Interpolate:return GL(t,e);case b.ToString:return HL(t,e);default:throw new Error(`Unsupported operator ${n}`)}}function LL(t,e){let n=t.operator,r=t.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=Hn(t.args[o],e);switch(n){case b.Coalesce:return o=>{for(let s=0;s<r;++s){let a=i[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case b.Number:case b.String:return o=>{for(let s=0;s<r;++s){let a=i[s](o);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function FL(t,e){let r=t.args[0].value;switch(t.operator){case b.Get:return i=>i.properties[r];case b.Var:return i=>i.variables[r];default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function kL(t,e){let n=t.operator,r=Hn(t.args[0],e),i=Hn(t.args[1],e);switch(n){case b.Equal:return o=>r(o)===i(o);case b.NotEqual:return o=>r(o)!==i(o);case b.LessThan:return o=>r(o)<i(o);case b.LessThanOrEqualTo:return o=>r(o)<=i(o);case b.GreaterThan:return o=>r(o)>i(o);case b.GreaterThanOrEqualTo:return o=>r(o)>=i(o);default:throw new Error(`Unsupported comparison operator ${n}`)}}function VL(t,e){let n=t.operator,r=t.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=Hn(t.args[o],e);switch(n){case b.Any:return o=>{for(let s=0;s<r;++s)if(i[s](o))return!0;return!1};case b.All:return o=>{for(let s=0;s<r;++s)if(!i[s](o))return!1;return!0};case b.Between:return o=>{let s=i[0](o),a=i[1](o),l=i[2](o);return s>=a&&s<=l};case b.In:return o=>{let s=i[0](o);for(let a=1;a<r;++a)if(s===i[a](o))return!0;return!1};case b.Not:return o=>!i[0](o);default:throw new Error(`Unsupported logical operator ${n}`)}}function jL(t,e){let n=t.operator,r=t.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=Hn(t.args[o],e);switch(n){case b.Multiply:return o=>{let s=1;for(let a=0;a<r;++a)s*=i[a](o);return s};case b.Divide:return o=>i[0](o)/i[1](o);case b.Add:return o=>{let s=0;for(let a=0;a<r;++a)s+=i[a](o);return s};case b.Subtract:return o=>i[0](o)-i[1](o);case b.Clamp:return o=>{let s=i[0](o),a=i[1](o);if(s<a)return a;let l=i[2](o);return s>l?l:s};case b.Mod:return o=>i[0](o)%i[1](o);case b.Pow:return o=>Math.pow(i[0](o),i[1](o));case b.Abs:return o=>Math.abs(i[0](o));case b.Floor:return o=>Math.floor(i[0](o));case b.Ceil:return o=>Math.ceil(i[0](o));case b.Round:return o=>Math.round(i[0](o));case b.Sin:return o=>Math.sin(i[0](o));case b.Cos:return o=>Math.cos(i[0](o));case b.Atan:return r===2?o=>Math.atan2(i[0](o),i[1](o)):o=>Math.atan(i[0](o));case b.Sqrt:return o=>Math.sqrt(i[0](o));default:throw new Error(`Unsupported numeric operator ${n}`)}}function UL(t,e){let n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=Hn(t.args[i],e);return i=>{for(let o=0;o<n-1;o+=2)if(r[o](i))return r[o+1](i);return r[n-1](i)}}function BL(t,e){let n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=Hn(t.args[i],e);return i=>{let o=r[0](i);for(let s=1;s<n;s+=2)if(o===r[s](i))return r[s+1](i);return r[n-1](i)}}function GL(t,e){let n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=Hn(t.args[i],e);return i=>{let o=r[0](i),s=r[1](i),a,l;for(let u=2;u<n;u+=2){let c=r[u](i),d=r[u+1](i),h=Array.isArray(d);if(h&&(d=wx(d)),c>=s)return u===2?d:h?$L(o,s,a,l,c,d):Nl(o,s,a,l,c,d);a=c,l=d}return l}}function HL(t,e){let n=t.operator,r=t.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=Hn(t.args[o],e);switch(n){case b.ToString:return o=>{let s=i[0](o);return t.args[0].type===Xe?Dl(s):s.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function Nl(t,e,n,r,i,o){let s=i-n;if(s===0)return r;let a=e-n,l=t===1?a/s:(Math.pow(t,a)-1)/(Math.pow(t,s)-1);return r+l*(o-r)}function $L(t,e,n,r,i,o){if(i-n===0)return r;let a=vm(r),l=vm(o),u=l[2]-a[2];u>180?u-=360:u<-180&&(u+=360);let c=[Nl(t,e,n,a[0],i,l[0]),Nl(t,e,n,a[1],i,l[1]),a[2]+Nl(t,e,n,0,i,u),Nl(t,e,n,r[3],i,o[3])];return Cm(Dx(c))}function zL(t){return!0}function rI(t){let e=iy(),n=WL(t,e),r=sy();return function(i,o){if(r.properties=i.getPropertiesInternal(),r.resolution=o,e.featureId){let s=i.getId();s!==void 0?r.featureId=s:r.featureId=null}return e.geometryType&&(r.geometryType=oy(i.getGeometry())),n(r)}}function uy(t){let e=iy(),n=t.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=ay(t[s],e);let i=sy(),o=new Array(n);return function(s,a){if(i.properties=s.getPropertiesInternal(),i.resolution=a,e.featureId){let u=s.getId();u!==void 0?i.featureId=u:i.featureId=null}let l=0;for(let u=0;u<n;++u){let c=r[u](i);c&&(o[l]=c,l+=1)}return o.length=l,o}}function WL(t,e){let n=t.length,r=new Array(n);for(let i=0;i<n;++i){let o=t[i],s="filter"in o?gr(o.filter,Ve,e):zL,a;if(Array.isArray(o.style)){let l=o.style.length;a=new Array(l);for(let u=0;u<l;++u)a[u]=ay(o.style[u],e)}else a=[ay(o.style,e)];r[i]={filter:s,styles:a}}return function(i){let o=[],s=!1;for(let a=0;a<n;++a){let l=r[a].filter;if(l(i)&&!(t[a].else&&s)){s=!0;for(let u of r[a].styles){let c=u(i);c&&o.push(c)}}}return o}}function ay(t,e){let n=Ol(t,"",e),r=Pl(t,"",e),i=qL(t,e),o=YL(t,e),s=zt(t,"z-index",e);if(!n&&!r&&!i&&!o&&!kn(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));let a=new Fs;return function(l){let u=!0;if(n){let c=n(l);c&&(u=!1),a.setFill(c)}if(r){let c=r(l);c&&(u=!1),a.setStroke(c)}if(i){let c=i(l);c&&(u=!1),a.setText(c)}if(o){let c=o(l);c&&(u=!1),a.setImage(c)}return s&&a.setZIndex(s(l)),u?null:a}}function Ol(t,e,n){let r;if(e+"fill-pattern-src"in t?r=QL(t,e+"fill-",n):r=cy(t,e+"fill-color",n),!r)return null;let i=new _i;return function(o){let s=r(o);return s==="none"?null:(i.setColor(s),i)}}function Pl(t,e,n){let r=zt(t,e+"stroke-width",n),i=cy(t,e+"stroke-color",n);if(!r&&!i)return null;let o=Wr(t,e+"stroke-line-cap",n),s=Wr(t,e+"stroke-line-join",n),a=iI(t,e+"stroke-line-dash",n),l=zt(t,e+"stroke-line-dash-offset",n),u=zt(t,e+"stroke-miter-limit",n),c=new wo;return function(d){if(i){let h=i(d);if(h==="none")return null;c.setColor(h)}if(r&&c.setWidth(r(d)),o){let h=o(d);if(h!=="butt"&&h!=="round"&&h!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(h)}if(s){let h=s(d);if(h!=="bevel"&&h!=="round"&&h!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(h)}return a&&c.setLineDash(a(d)),l&&c.setLineDashOffset(l(d)),u&&c.setMiterLimit(u(d)),c}}function qL(t,e){let n="text-",r=Wr(t,n+"value",e);if(!r)return null;let i=Ol(t,n,e),o=Ol(t,n+"background-",e),s=Pl(t,n,e),a=Pl(t,n+"background-",e),l=Wr(t,n+"font",e),u=zt(t,n+"max-angle",e),c=zt(t,n+"offset-x",e),d=zt(t,n+"offset-y",e),h=Ll(t,n+"overflow",e),f=Wr(t,n+"placement",e),g=zt(t,n+"repeat",e),y=kd(t,n+"scale",e),p=Ll(t,n+"rotate-with-view",e),m=zt(t,n+"rotation",e),_=Wr(t,n+"align",e),C=Wr(t,n+"justify",e),v=Wr(t,n+"baseline",e),E=iI(t,n+"padding",e),w=Vd(t,n+"declutter-mode"),x=new Gx({declutterMode:w});return function(D){if(x.setText(r(D)),i&&x.setFill(i(D)),o&&x.setBackgroundFill(o(D)),s&&x.setStroke(s(D)),a&&x.setBackgroundStroke(a(D)),l&&x.setFont(l(D)),u&&x.setMaxAngle(u(D)),c&&x.setOffsetX(c(D)),d&&x.setOffsetY(d(D)),h&&x.setOverflow(h(D)),f){let I=f(D);if(I!=="point"&&I!=="line")throw new Error("Expected point or line for text-placement");x.setPlacement(I)}if(g&&x.setRepeat(g(D)),y&&x.setScale(y(D)),p&&x.setRotateWithView(p(D)),m&&x.setRotation(m(D)),_){let I=_(D);if(I!=="left"&&I!=="center"&&I!=="right"&&I!=="end"&&I!=="start")throw new Error("Expected left, right, center, start, or end for text-align");x.setTextAlign(I)}if(C){let I=C(D);if(I!=="left"&&I!=="right"&&I!=="center")throw new Error("Expected left, right, or center for text-justify");x.setJustify(I)}if(v){let I=v(D);if(I!=="bottom"&&I!=="top"&&I!=="middle"&&I!=="alphabetic"&&I!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");x.setTextBaseline(I)}return E&&x.setPadding(E(D)),x}}function YL(t,e){return"icon-src"in t?XL(t,e):"shape-points"in t?ZL(t,e):"circle-radius"in t?KL(t,e):null}function XL(t,e){let n="icon-",r=n+"src",i=oI(t[r],r),o=Ld(t,n+"anchor",e),s=kd(t,n+"scale",e),a=zt(t,n+"opacity",e),l=Ld(t,n+"displacement",e),u=zt(t,n+"rotation",e),c=Ll(t,n+"rotate-with-view",e),d=tI(t,n+"anchor-origin"),h=nI(t,n+"anchor-x-units"),f=nI(t,n+"anchor-y-units"),g=nF(t,n+"color"),y=eF(t,n+"cross-origin"),p=tF(t,n+"offset"),m=tI(t,n+"offset-origin"),_=Fd(t,n+"width"),C=Fd(t,n+"height"),v=JL(t,n+"size"),E=Vd(t,n+"declutter-mode"),w=new Al({src:i,anchorOrigin:d,anchorXUnits:h,anchorYUnits:f,color:g,crossOrigin:y,offset:p,offsetOrigin:m,height:C,width:_,size:v,declutterMode:E});return function(x){return a&&w.setOpacity(a(x)),l&&w.setDisplacement(l(x)),u&&w.setRotation(u(x)),c&&w.setRotateWithView(c(x)),s&&w.setScale(s(x)),o&&w.setAnchor(o(x)),w}}function ZL(t,e){let n="shape-",r=n+"points",i=n+"radius",o=ly(t[r],r),s=ly(t[i],i),a=Ol(t,n,e),l=Pl(t,n,e),u=kd(t,n+"scale",e),c=Ld(t,n+"displacement",e),d=zt(t,n+"rotation",e),h=Ll(t,n+"rotate-with-view",e),f=Fd(t,n+"radius2"),g=Fd(t,n+"angle"),y=Vd(t,n+"declutter-mode"),p=new Rd({points:o,radius:s,radius2:f,angle:g,declutterMode:y});return function(m){return a&&p.setFill(a(m)),l&&p.setStroke(l(m)),c&&p.setDisplacement(c(m)),d&&p.setRotation(d(m)),h&&p.setRotateWithView(h(m)),u&&p.setScale(u(m)),p}}function KL(t,e){let n="circle-",r=Ol(t,n,e),i=Pl(t,n,e),o=zt(t,n+"radius",e),s=kd(t,n+"scale",e),a=Ld(t,n+"displacement",e),l=zt(t,n+"rotation",e),u=Ll(t,n+"rotate-with-view",e),c=Vd(t,n+"declutter-mode"),d=new Tl({radius:5,declutterMode:c});return function(h){return o&&d.setRadius(o(h)),r&&d.setFill(r(h)),i&&d.setStroke(i(h)),a&&d.setDisplacement(a(h)),l&&d.setRotation(l(h)),u&&d.setRotateWithView(u(h)),s&&d.setScale(s(h)),d}}function zt(t,e,n){if(!(e in t))return;let r=gr(t[e],V,n);return function(i){return ly(r(i),e)}}function Wr(t,e,n){if(!(e in t))return null;let r=gr(t[e],$t,n);return function(i){return oI(r(i),e)}}function QL(t,e,n){let r=Wr(t,e+"pattern-src",n),i=eI(t,e+"pattern-offset",n),o=eI(t,e+"pattern-size",n),s=cy(t,e+"color",n);return function(a){return{src:r(a),offset:i&&i(a),size:o&&o(a),color:s&&s(a)}}}function Ll(t,e,n){if(!(e in t))return null;let r=gr(t[e],Ve,n);return function(i){let o=r(i);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function cy(t,e,n){if(!(e in t))return null;let r=gr(t[e],Xe|$t,n);return function(i){return sI(r(i),e)}}function iI(t,e,n){if(!(e in t))return null;let r=gr(t[e],pr,n);return function(i){return Fl(r(i),e)}}function Ld(t,e,n){if(!(e in t))return null;let r=gr(t[e],pr,n);return function(i){let o=Fl(r(i),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function eI(t,e,n){if(!(e in t))return null;let r=gr(t[e],pr,n);return function(i){return aI(r(i),e)}}function kd(t,e,n){if(!(e in t))return null;let r=gr(t[e],pr|V,n);return function(i){return rF(r(i),e)}}function Fd(t,e){let n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function JL(t,e){let n=t[e];if(n!==void 0){if(typeof n=="number")return Ye(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function eF(t,e){let n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function tI(t,e){let n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function nI(t,e){let n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function tF(t,e){let n=t[e];if(n!==void 0)return Fl(n,e)}function Vd(t,e){let n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function nF(t,e){let n=t[e];if(n!==void 0)return sI(n,e)}function Fl(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);let n=t.length;for(let r=0;r<n;++r)if(typeof t[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function oI(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function ly(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function sI(t,e){if(typeof t=="string")return t;let n=Fl(t,e),r=n.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function aI(t,e){let n=Fl(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function rF(t,e){return typeof t=="number"?t:aI(t,e)}var lI={RENDER_ORDER:"renderOrder"},dy=class extends xo{constructor(e){e=e||{};let n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(lI.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){let r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new uI.default(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(lI.RENDER_ORDER,e)}setStyle(e){this.style_=iF(e),this.styleFunction_=e===null?void 0:jx(this.style_),this.changed()}};function iF(t){if(t===void 0)return Ux;if(!t)return null;if(typeof t=="function"||t instanceof Fs)return t;if(!Array.isArray(t))return uy([t]);if(t.length===0)return[];let e=t.length,n=t[0];if(n instanceof Fs){let i=new Array(e);for(let o=0;o<e;++o){let s=t[o];if(!(s instanceof Fs))throw new Error("Expected a list of style instances");i[o]=s}return i}if("style"in n){let i=new Array(e);for(let o=0;o<e;++o){let s=t[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");i[o]=s}return rI(i)}return uy(t)}var jd=dy;var kl={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Vl=[kl.FILL],mr=[kl.STROKE],qr=[kl.BEGIN_PATH],hy=[kl.CLOSE_PATH],U=kl;var fy=class{drawCustom(e,n,r,i,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,r){}drawFeature(e,n,r){}drawGeometryCollection(e,n,r){}drawLineString(e,n,r){}drawMultiLineString(e,n,r){}drawMultiPoint(e,n,r){}drawMultiPolygon(e,n,r){}drawPoint(e,n,r){}drawPolygon(e,n,r){}drawText(e,n,r){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}},Ud=fy;var py=class extends Ud{constructor(e,n,r,i){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){let n=this.pixelRatio;return n==1?e:e.map(function(r){return r*n})}appendFlatPointCoordinates(e,n){let r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,o=this.coordinates,s=o.length;for(let a=0,l=e.length;a<l;a+=n)i[0]=e[a],i[1]=e[a+1],Vn(r,i)&&(o[s++]=i[0],o[s++]=i[1]);return s}appendFlatLineCoordinates(e,n,r,i,o,s){let a=this.coordinates,l=a.length,u=this.getBufferedMaxExtent();s&&(n+=i);let c=e[n],d=e[n+1],h=this.tmpCoordinate_,f=!0,g,y,p;for(g=n+i;g<r;g+=i)h[0]=e[g],h[1]=e[g+1],p=nd(u,h),p!==y?(f&&(a[l++]=c,a[l++]=d,f=!1),a[l++]=h[0],a[l++]=h[1]):p===qe.INTERSECTING?(a[l++]=h[0],a[l++]=h[1],f=!1):f=!0,c=h[0],d=h[1],y=p;return(o&&f||g===n+i)&&(a[l++]=c,a[l++]=d),l}drawCustomCoordinates_(e,n,r,i,o){for(let s=0,a=r.length;s<a;++s){let l=r[s],u=this.appendFlatLineCoordinates(e,n,l,i,!1,!1);o.push(u),n=l}return n}drawCustom(e,n,r,i,o){this.beginGeometry(e,n,o);let s=e.getType(),a=e.getStride(),l=this.coordinates.length,u,c,d,h,f;switch(s){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),h=[];let g=e.getEndss();f=0;for(let y=0,p=g.length;y<p;++y){let m=[];f=this.drawCustomCoordinates_(u,f,g[y],a,m),h.push(m)}this.instructions.push([U.CUSTOM,l,h,e,r,_l,o]),this.hitDetectionInstructions.push([U.CUSTOM,l,h,e,i||r,_l,o]);break;case"Polygon":case"MultiLineString":d=[],u=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(u,0,e.getEnds(),a,d),this.instructions.push([U.CUSTOM,l,d,e,r,gi,o]),this.hitDetectionInstructions.push([U.CUSTOM,l,d,e,i||r,gi,o]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,a,!1,!1),this.instructions.push([U.CUSTOM,l,c,e,r,mn,o]),this.hitDetectionInstructions.push([U.CUSTOM,l,c,e,i||r,mn,o]);break;case"MultiPoint":u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,a),c>l&&(this.instructions.push([U.CUSTOM,l,c,e,r,mn,o]),this.hitDetectionInstructions.push([U.CUSTOM,l,c,e,i||r,mn,o]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([U.CUSTOM,l,c,e,r,void 0,o]),this.hitDetectionInstructions.push([U.CUSTOM,l,c,e,i||r,void 0,o]);break;default:}this.endGeometry(n)}beginGeometry(e,n,r){this.beginGeometryInstruction1_=[U.BEGIN_GEOMETRY,n,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[U.BEGIN_GEOMETRY,n,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let e=this.hitDetectionInstructions;e.reverse();let n,r=e.length,i,o,s=-1;for(n=0;n<r;++n)i=e[n],o=i[0],o==U.END_GEOMETRY?s=n:o==U.BEGIN_GEOMETRY&&(i[2]=n,xD(this.hitDetectionInstructions,s,n),s=-1)}setFillStrokeStyle(e,n){let r=this.state;if(e){let i=e.getColor();r.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,r.fillStyle=Ut(i||et)}else r.fillStyle=void 0;if(n){let i=n.getColor();r.strokeStyle=Ut(i||Hr);let o=n.getLineCap();r.lineCap=o!==void 0?o:hr;let s=n.getLineDash();r.lineDash=s?s.slice():Bt;let a=n.getLineDashOffset();r.lineDashOffset=a||Gt;let l=n.getLineJoin();r.lineJoin=l!==void 0?l:fr;let u=n.getWidth();r.lineWidth=u!==void 0?u:zr;let c=n.getMiterLimit();r.miterLimit=c!==void 0?c:Gr,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}createFill(e){let n=e.fillStyle,r=[U.SET_FILL_STYLE,n];return typeof n!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[U.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){let r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(n.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,n){let r=e.strokeStyle,i=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||o!=e.currentLineDash&&!yt(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(r!==void 0&&n.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let n=[U.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=rd(this.maxExtent),this.maxLineWidth>0)){let e=this.resolution*(this.maxLineWidth+1)/2;Is(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},yr=py;var gy=class extends yr{constructor(e,n,r,i){super(e,n,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,r){if(!this.image_||this.maxExtent&&!Vn(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,r);let i=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(i,o);this.instructions.push([U.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([U.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,r){if(!this.image_)return;this.beginGeometry(e,n,r);let i=e.getFlatCoordinates(),o=[];for(let l=0,u=i.length;l<u;l+=e.getStride())(!this.maxExtent||Vn(this.maxExtent,i.slice(l,l+2)))&&o.push(i[l],i[l+1]);let s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([U.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([U.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){let r=e.getAnchor(),i=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}},cI=gy;var my=class extends yr{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinates_(e,n,r,i){let o=this.coordinates.length,s=this.appendFlatLineCoordinates(e,n,r,i,!1,!1),a=[U.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(e,n,r){let i=this.state,o=i.strokeStyle,s=i.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Bt,Gt],qr);let a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(mr),this.endGeometry(n)}drawMultiLineString(e,n,r){let i=this.state,o=i.strokeStyle,s=i.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Bt,Gt],qr);let a=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride(),c=0;for(let d=0,h=a.length;d<h;++d)c=this.drawFlatCoordinates_(l,c,a[d],u);this.hitDetectionInstructions.push(mr),this.endGeometry(n)}finish(){let e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(mr),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(mr),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(qr)}},dI=my;var yy=class extends yr{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinatess_(e,n,r,i){let o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,l=r.length;this.instructions.push(qr),this.hitDetectionInstructions.push(qr);for(let u=0;u<l;++u){let c=r[u],d=this.coordinates.length,h=this.appendFlatLineCoordinates(e,n,c,i,!0,!a),f=[U.MOVE_TO_LINE_TO,d,h];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(hy),this.hitDetectionInstructions.push(hy)),n=c}return s&&(this.instructions.push(Vl),this.hitDetectionInstructions.push(Vl)),a&&(this.instructions.push(mr),this.hitDetectionInstructions.push(mr)),n}drawCircle(e,n,r){let i=this.state,o=i.fillStyle,s=i.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([U.SET_FILL_STYLE,et]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Bt,Gt]);let a=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);let c=[U.CIRCLE,u];this.instructions.push(qr,c),this.hitDetectionInstructions.push(qr,c),i.fillStyle!==void 0&&(this.instructions.push(Vl),this.hitDetectionInstructions.push(Vl)),i.strokeStyle!==void 0&&(this.instructions.push(mr),this.hitDetectionInstructions.push(mr)),this.endGeometry(n)}drawPolygon(e,n,r){let i=this.state,o=i.fillStyle,s=i.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([U.SET_FILL_STYLE,et]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Bt,Gt]);let a=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,a,u),this.endGeometry(n)}drawMultiPolygon(e,n,r){let i=this.state,o=i.fillStyle,s=i.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([U.SET_FILL_STYLE,et]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Bt,Gt]);let a=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride(),c=0;for(let d=0,h=a.length;d<h;++d)c=this.drawFlatCoordinatess_(l,c,a[d],u);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let e=this.tolerance;if(e!==0){let n=this.coordinates;for(let r=0,i=n.length;r<i;++r)n[r]=pi(n[r],e)}return super.finish()}setFillStrokeStyles_(){let e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}},_y=yy;function hI(t,e,n,r,i){let o=[],s=n,a=0,l=e.slice(n,2);for(;a<t&&s+i<r;){let[u,c]=l.slice(-2),d=e[s+i],h=e[s+i+1],f=Math.sqrt((d-u)*(d-u)+(h-c)*(h-c));if(a+=f,a>=t){let g=(t-a+f)/f,y=ht(u,d,g),p=ht(c,h,g);l.push(y,p),o.push(l),l=[y,p],a==t&&(s+=i),a=0}else if(a<t)l.push(e[s+i],e[s+i+1]),s+=i;else{let g=f-a,y=ht(u,d,g/f),p=ht(c,h,g/f);l.push(y,p),o.push(l),l=[y,p],a=0,s+=i}}return a>0&&o.push(l),o}function fI(t,e,n,r,i){let o=n,s=n,a=0,l=0,u=n,c,d,h,f,g,y,p,m,_,C;for(d=n;d<r;d+=i){let v=e[d],E=e[d+1];g!==void 0&&(_=v-g,C=E-y,f=Math.sqrt(_*_+C*C),p!==void 0&&(l+=h,c=Math.acos((p*_+m*C)/(h*f)),c>t&&(l>a&&(a=l,o=u,s=d),l=0,u=d-i)),h=f,p=_,m=C),g=v,y=E}return l+=f,l>a?[u,d]:[o,s]}var jl={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},vy=class extends yr{constructor(e,n,r,i){super(e,n,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[et]={fillStyle:et},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){let e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,r){let i=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!o)return;let a=this.coordinates,l=a.length,u=e.getType(),c=null,d=e.getStride();if(s.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!Ae(this.maxExtent,e.getExtent()))return;let h;if(c=e.getFlatCoordinates(),u=="LineString")h=[c.length];else if(u=="MultiLineString")h=e.getEnds();else if(u=="Polygon")h=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){let p=e.getEndss();h=[];for(let m=0,_=p.length;m<_;++m)h.push(p[m][0])}this.beginGeometry(e,n,r);let f=s.repeat,g=f?void 0:s.textAlign,y=0;for(let p=0,m=h.length;p<m;++p){let _;f?_=hI(f*this.resolution,c,y,h[p],d):_=[c.slice(y,h[p])];for(let C=0,v=_.length;C<v;++C){let E=_[C],w=0,x=E.length;if(g==null){let I=fI(s.maxAngle,E,0,E.length,2);w=I[0],x=I[1]}for(let I=w;I<x;I+=d)a.push(E[I],E[I+1]);let D=a.length;y=h[p],this.drawChars_(l,D),l=D}}this.endGeometry(n)}else{let h=s.overflow?null:[];switch(u){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),d=2;break;case"Polygon":c=e.getFlatInteriorPoint(),s.overflow||h.push(c[2]/this.resolution),d=3;break;case"MultiPolygon":let _=e.getFlatInteriorPoints();c=[];for(let C=0,v=_.length;C<v;C+=3)s.overflow||h.push(_[C+2]/this.resolution),c.push(_[C],_[C+1]);if(c.length===0)return;d=2;break;default:}let f=this.appendFlatPointCoordinates(c,d);if(f===l)return;if(h&&(f-l)/2!==c.length/d){let _=l/2;h=h.filter((C,v)=>{let E=a[(_+v)*2]===c[v*d]&&a[(_+v)*2+1]===c[v*d+1];return E||--_,E})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,n,r);let g=s.padding;if(g!=$r&&(s.scale[0]<0||s.scale[1]<0)){let _=s.padding[0],C=s.padding[1],v=s.padding[2],E=s.padding[3];s.scale[0]<0&&(C=-C,E=-E),s.scale[1]<0&&(_=-_,v=-v),g=[_,C,v,E]}let y=this.pixelRatio;this.instructions.push([U.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,g==$r?$r:g.map(function(_){return _*y}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);let p=1/y,m=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=et,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([U.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[p,p],NaN,this.declutterMode_,this.declutterImageWithText_,g,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?et:this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),s.backgroundFill&&(this.state.fillStyle=m,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){let e=this.textStrokeState_,n=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));let o=this.textKey_;o in this.textStates||(this.textStates[o]={font:n.font,textAlign:n.textAlign||Ci,justify:n.justify,textBaseline:n.textBaseline||Do,scale:n.scale});let s=this.fillKey_;r&&(s in this.fillStates||(this.fillStates[s]={fillStyle:r.fillStyle}))}drawChars_(e,n){let r=this.textStrokeState_,i=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();let l=this.pixelRatio,u=jl[i.textBaseline],c=this.textOffsetY_*l,d=this.text_,h=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([U.DRAW_CHARS,e,n,u,i.overflow,a,i.maxAngle,l,c,o,h*l,d,s,1,this.declutterMode_]),this.hitDetectionInstructions.push([U.DRAW_CHARS,e,n,u,i.overflow,a&&et,i.maxAngle,l,c,o,h*l,d,s,1/l,this.declutterMode_])}setTextStyle(e,n){let r,i,o;if(!e)this.text_="";else{let s=e.getFill();s?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Ut(s.getColor()||et)):(i=null,this.textFillState_=i);let a=e.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);let g=a.getLineDash(),y=a.getLineDashOffset(),p=a.getWidth(),m=a.getMiterLimit();o.lineCap=a.getLineCap()||hr,o.lineDash=g?g.slice():Bt,o.lineDashOffset=y===void 0?Gt:y,o.lineJoin=a.getLineJoin()||fr,o.lineWidth=p===void 0?zr:p,o.miterLimit=m===void 0?Gr:m,o.strokeStyle=Ut(a.getColor()||Hr)}r=this.textState_;let l=e.getFont()||Ad;Px(l);let u=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||Do,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||$r,r.scale=u===void 0?[1,1]:u;let c=e.getOffsetX(),d=e.getOffsetY(),h=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=h===void 0?!1:h,this.textRotation_=f===void 0?0:f,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:J(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+J(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}},pI=vy;var oF={Circle:_y,Default:yr,Image:cI,LineString:dI,Polygon:_y,Text:pI},Cy=class{constructor(e,n,r,i){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){let e={};for(let n in this.buildersByZIndex_){e[n]=e[n]||{};let r=this.buildersByZIndex_[n];for(let i in r){let o=r[i].finish();e[n][i]=o}}return e}getBuilder(e,n){let r=e!==void 0?e.toString():"0",i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let o=i[n];if(o===void 0){let s=oF[n];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[n]=o}return o}},gI=Cy;var Ey=class extends Jc{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return j()}getData(e){return null}prepareFrame(e){return j()}renderFrame(e,n){return j()}loadedTileCallback(e,n,r){e[n]||(e[n]={}),e[n][r.tileCoord.toString()]=r}createLoadedTileFinder(e,n,r){return(i,o)=>{let s=this.loadedTileCallback.bind(this,r,i);return e.forEachLoadedTile(n,i,o,s)}}forEachFeatureAtCoordinate(e,n,r,i,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){let n=e.target;(n.getState()===W.LOADED||n.getState()===W.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=W.LOADED&&n!=W.ERROR&&e.addEventListener(A.CHANGE,this.boundHandleImageChange_),n==W.IDLE&&(e.load(),n=e.getState()),n==W.LOADED}renderIfReadyAndVisible(){let e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}},mI=Ey;var wy=class extends ze{constructor(e,n,r,i){super(e),this.inversePixelTransform=n,this.frameState=r,this.context=i}},Bd=wy;var Dy=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(CanvasRenderingContext2D.prototype,{get:(e,n)=>{if(typeof xl()[n]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n),this.pushMethodArgs_},set:(e,n,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n,r),!0)})}pushMethodArgs_=(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this);getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let r=0,i=n.length;r<i;r+=2){let o=n[r],s=n[r+1];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},Gd=Dy;var Iy=[],Us=null;function sF(){Us=Te(1,1,void 0,{willReadFrequently:!0})}var xy=class extends mI{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=ot(),this.pixelTransform=ot(),this.inversePixelTransform=ot(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,n,r){Us||sF(),Us.clearRect(0,0,1,1);let i;try{Us.drawImage(e,n,r,1,1,0,0,1,1),i=Us.getImageData(0,0,1,1).data}catch{return Us=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,n,r){let i=this.getLayer().getClassName(),o,s;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&yt(Br(e.style.backgroundColor),Br(r)))){let a=e.firstElementChild;a instanceof HTMLCanvasElement&&(s=a.getContext("2d"))}if(s&&s.canvas.style.transform===n?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=i;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=Te();let l=s.canvas;o.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,n,r){let i=en(r),o=po(r),s=fo(r),a=ho(r);ke(n.coordinateToPixelTransform,i),ke(n.coordinateToPixelTransform,o),ke(n.coordinateToPixelTransform,s),ke(n.coordinateToPixelTransform,a);let l=this.inversePixelTransform;ke(l,i),ke(l,o),ke(l,s),ke(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,n,r){let i=this.getLayer();if(i.hasListener(e)){let o=new Bd(e,this.inversePixelTransform,r,n);i.dispatchEvent(o)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(pt.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(pt.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Gd),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(pt.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(pt.POSTRENDER,this.context,e))}getRenderTransform(e,n,r,i,o,s,a){let l=o/2,u=s/2,c=i/n,d=-c,h=-e[0]+a,f=-e[1];return Je(this.tempTransform,l,u,c,d,-r,h,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}},Hd=xy;function yI(t,e,n,r,i,o,s,a,l,u,c,d){let h=t[e],f=t[e+1],g=0,y=0,p=0,m=0;function _(){g=h,y=f,e+=r,h=t[e],f=t[e+1],m+=p,p=Math.sqrt((h-g)*(h-g)+(f-y)*(f-y))}do _();while(e<n-r&&m+p<o);let C=p===0?0:(o-m)/p,v=ht(g,h,C),E=ht(y,f,C),w=e-r,x=m,D=o+a*l(u,i,c);for(;e<n-r&&m+p<D;)_();C=p===0?0:(D-m)/p;let I=ht(g,h,C),N=ht(y,f,C),T;if(d){let L=[v,E,I,N];Ns(L,0,4,2,d,L,L),T=L[0]>L[2]}else T=v>I;let O=Math.PI,ee=[],Ie=w+r===e;e=w,p=0,m=x,h=t[e],f=t[e+1];let F;if(Ie){_(),F=Math.atan2(f-y,h-g),T&&(F+=F>0?-O:O);let L=(I+v)/2,P=(N+E)/2;return ee[0]=[L,P,(D-o)/2,F,i],ee}i=i.replace(/\n/g," ");for(let L=0,P=i.length;L<P;){_();let G=Math.atan2(f-y,h-g);if(T&&(G+=G>0?-O:O),F!==void 0){let S=G-F;if(S+=S>O?-2*O:S<-O?2*O:0,Math.abs(S)>s)return null}F=G;let de=L,z=0;for(;L<P;++L){let S=T?P-L-1:L,Pe=a*l(u,i[S],c);if(e+r<n&&m+p<o+z+Pe/2)break;z+=Pe}if(L===de)continue;let xe=T?i.substring(P-de,P-L):i.substring(de,L);C=p===0?0:(o+z/2-m)/p;let ge=ht(g,h,C),Ue=ht(y,f,C);ee.push([ge,Ue,z/2,G,xe]),o+=z}return ee}var Bs=Ge(),Di=[],Yr=[],Xr=[],xi=[];function _I(t){return t[3].declutterBox}var vI=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function by(t,e){return e==="start"?e=vI.test(t)?"right":"left":e==="end"&&(e=vI.test(t)?"left":"right"),jl[e]}function aF(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}var Sy=class{constructor(e,n,r,i,o){this.overlaps=r,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=ot(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new Gd:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,r,i){let o=e+n+r+i;if(this.labels_[o])return this.labels_[o];let s=i?this.strokeStates[i]:null,a=r?this.fillStates[r]:null,l=this.textStates[n],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],d=Array.isArray(e),h=l.justify?jl[l.justify]:by(Array.isArray(e)?e[0]:e,l.textAlign||Ci),f=i&&s.lineWidth?s.lineWidth:0,g=d?e:e.split(`
`).reduce(aF,[]),{width:y,height:p,widths:m,heights:_,lineWidths:C}=Fx(l,g),v=y+f,E=[],w=(v+2)*c[0],x=(p+f)*c[1],D={width:w<0?Math.floor(w):Math.ceil(w),height:x<0?Math.floor(x):Math.ceil(x),contextInstructions:E};(c[0]!=1||c[1]!=1)&&E.push("scale",c),i&&(E.push("strokeStyle",s.strokeStyle),E.push("lineWidth",f),E.push("lineCap",s.lineCap),E.push("lineJoin",s.lineJoin),E.push("miterLimit",s.miterLimit),E.push("setLineDash",[s.lineDash]),E.push("lineDashOffset",s.lineDashOffset)),r&&E.push("fillStyle",a.fillStyle),E.push("textBaseline","middle"),E.push("textAlign","center");let I=.5-h,N=h*v+I*f,T=[],O=[],ee=0,Ie=0,F=0,L=0,P;for(let G=0,de=g.length;G<de;G+=2){let z=g[G];if(z===`
`){Ie+=ee,ee=0,N=h*v+I*f,++L;continue}let xe=g[G+1]||l.font;xe!==P&&(i&&T.push("font",xe),r&&O.push("font",xe),P=xe),ee=Math.max(ee,_[F]);let ge=[z,N+I*m[F]+h*(m[F]-C[L]),.5*(f+ee)+Ie];N+=m[F],i&&T.push("strokeText",ge),r&&O.push("fillText",ge),++F}return Array.prototype.push.apply(E,T),Array.prototype.push.apply(E,O),this.labels_[o]=D,D}replayTextBackground_(e,n,r,i,o,s,a){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,n),s&&(this.alignAndScaleFill_=s[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,n,r,i,o,s,a,l,u,c,d,h,f,g,y,p){a*=h[0],l*=h[1];let m=r-a,_=i-l,C=o+u>e?e-u:o,v=s+c>n?n-c:s,E=g[3]+C*h[0]+g[1],w=g[0]+v*h[1]+g[2],x=m-g[3],D=_-g[0];(y||d!==0)&&(Di[0]=x,xi[0]=x,Di[1]=D,Yr[1]=D,Yr[0]=x+E,Xr[0]=Yr[0],Xr[1]=D+w,xi[1]=Xr[1]);let I;return d!==0?(I=Je(ot(),r,i,1,1,d,-r,-i),ke(I,Di),ke(I,Yr),ke(I,Xr),ke(I,xi),bt(Math.min(Di[0],Yr[0],Xr[0],xi[0]),Math.min(Di[1],Yr[1],Xr[1],xi[1]),Math.max(Di[0],Yr[0],Xr[0],xi[0]),Math.max(Di[1],Yr[1],Xr[1],xi[1]),Bs)):bt(Math.min(x,x+E),Math.min(D,D+w),Math.max(x,x+E),Math.max(D,D+w),Bs),f&&(m=Math.round(m),_=Math.round(_)),{drawImageX:m,drawImageY:_,drawImageW:C,drawImageH:v,originX:u,originY:c,declutterBox:{minX:Bs[0],minY:Bs[1],maxX:Bs[2],maxY:Bs[3],value:p},canvasTransform:I,scale:h}}replayImageOrLabel_(e,n,r,i,o,s,a){let l=!!(s||a),u=i.declutterBox,c=a?a[2]*i.scale[0]/2:0;return u.minX-c<=n[0]&&u.maxX+c>=0&&u.minY-c<=n[1]&&u.maxY+c>=0&&(l&&this.replayTextBackground_(e,Di,Yr,Xr,xi,s,a),kx(e,i.canvasTransform,o,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){let n=this.alignAndScaleFill_;if(n){let r=ke(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),n!==1&&e.scale(n,n),e.rotate(this.viewRotation_)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6])}drawLabelWithPointPlacement_(e,n,r,i){let o=this.textStates[n],s=this.createLabel(e,n,i,r),a=this.strokeStates[r],l=this.pixelRatio,u=by(Array.isArray(e)?e[0]:e,o.textAlign||Ci),c=jl[o.textBaseline||Do],d=a&&a.lineWidth?a.lineWidth:0,h=s.width/l-2*o.scale[0],f=u*h+2*(.5-u)*d,g=c*s.height/l+2*(.5-c)*d;return{label:s,anchorX:f,anchorY:g}}execute_(e,n,r,i,o,s,a,l){let u=this.zIndexContext_,c;this.pixelCoordinates_&&yt(r,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Vt(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),MD(this.renderedTransform_,r));let d=0,h=i.length,f=0,g,y,p,m,_,C,v,E,w,x,D,I,N,T=0,O=0,ee=null,Ie=null,F=this.coordinateCache_,L=this.viewRotation_,P=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,G={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:L},de=this.instructions!=i||this.overlaps?0:200,z,xe,ge,Ue;for(;d<h;){let S=i[d];switch(S[0]){case U.BEGIN_GEOMETRY:z=S[1],Ue=S[3],z.getGeometry()?a!==void 0&&!Ae(a,Ue.getExtent())?d=S[2]+1:++d:d=S[2],u&&(u.zIndex=S[4]);break;case U.BEGIN_PATH:T>de&&(this.fill_(e),T=0),O>de&&(e.stroke(),O=0),!T&&!O&&(e.beginPath(),_=NaN,C=NaN),++d;break;case U.CIRCLE:f=S[1];let Wt=c[f],Ze=c[f+1],St=c[f+2],En=c[f+3],Tt=St-Wt,Js=En-Ze,Mi=Math.sqrt(Tt*Tt+Js*Js);e.moveTo(Wt+Mi,Ze),e.arc(Wt,Ze,Mi,0,2*Math.PI,!0),++d;break;case U.CLOSE_PATH:e.closePath(),++d;break;case U.CUSTOM:f=S[1],g=S[2];let mh=S[3],eu=S[4],tu=S[5];G.geometry=mh,G.feature=z,d in F||(F[d]=[]);let on=F[d];tu?tu(c,f,g,2,on):(on[0]=c[f],on[1]=c[f+1],on.length=2),u&&(u.zIndex=S[6]),eu(on,G),++d;break;case U.DRAW_IMAGE:f=S[1],g=S[2],w=S[3],y=S[4],p=S[5];let To=S[6],nu=S[7],yh=S[8],ru=S[9],iu=S[10],qt=S[11],wn=S[12],Wn=S[13];m=S[14]||"declutter";let Dn=S[15];if(!w&&S.length>=20){x=S[19],D=S[20],I=S[21],N=S[22];let sn=this.drawLabelWithPointPlacement_(x,D,I,N);w=sn.label,S[3]=w;let Ai=S[23];y=(sn.anchorX-Ai)*this.pixelRatio,S[4]=y;let an=S[24];p=(sn.anchorY-an)*this.pixelRatio,S[5]=p,To=w.height,S[6]=To,Wn=w.width,S[13]=Wn}let Mo;S.length>25&&(Mo=S[25]);let Ao,Zr,Er;S.length>17?(Ao=S[16],Zr=S[17],Er=S[18]):(Ao=$r,Zr=!1,Er=!1),iu&&P?qt+=L:!iu&&!P&&(qt-=L);let _h=0;for(;f<g;f+=2){if(Mo&&Mo[_h++]<Wn/this.pixelRatio)continue;let sn=this.calculateImageOrLabelDimensions_(w.width,w.height,c[f],c[f+1],Wn,To,y,p,yh,ru,qt,wn,o,Ao,Zr||Er,z),Ai=[e,n,w,sn,nu,Zr?ee:null,Er?Ie:null];if(l){let an,qn,ln;if(Dn){let je=g-f;if(!Dn[je]){Dn[je]={args:Ai,declutterMode:m};continue}let Et=Dn[je];an=Et.args,qn=Et.declutterMode,delete Dn[je],ln=_I(an)}let wr,Dr;if(an&&(qn!=="declutter"||!l.collides(ln))&&(wr=!0),(m!=="declutter"||!l.collides(sn.declutterBox))&&(Dr=!0),qn==="declutter"&&m==="declutter"){let je=wr&&Dr;wr=je,Dr=je}wr&&(qn!=="none"&&l.insert(ln),this.replayImageOrLabel_.apply(this,an)),Dr&&(m!=="none"&&l.insert(sn.declutterBox),this.replayImageOrLabel_.apply(this,Ai))}else this.replayImageOrLabel_.apply(this,Ai)}++d;break;case U.DRAW_CHARS:let Ct=S[1],sv=S[2],vh=S[3],rS=S[4];N=S[5];let iS=S[6],av=S[7],lv=S[8];I=S[9];let Ch=S[10];x=S[11],D=S[12];let uv=[S[13],S[13]];m=S[14]||"declutter";let Eh=this.textStates[D],ea=Eh.font,ta=[Eh.scale[0]*av,Eh.scale[1]*av],na;ea in this.widths_?na=this.widths_[ea]:(na={},this.widths_[ea]=na);let cv=Sd(c,Ct,sv,2),dv=Math.abs(ta[0])*km(ea,x,na);if(rS||dv<=cv){let sn=this.textStates[D].textAlign,Ai=(cv-dv)*by(x,sn),an=yI(c,Ct,sv,2,x,Ai,iS,Math.abs(ta[0]),km,ea,na,P?0:this.viewRotation_);e:if(an){let qn=[],ln,wr,Dr,je,Et;if(I)for(ln=0,wr=an.length;ln<wr;++ln){Et=an[ln],Dr=Et[4],je=this.createLabel(Dr,D,"",I),y=Et[2]+(ta[0]<0?-Ch:Ch),p=vh*je.height+(.5-vh)*2*Ch*ta[1]/ta[0]-lv;let xr=this.calculateImageOrLabelDimensions_(je.width,je.height,Et[0],Et[1],je.width,je.height,y,p,0,0,Et[3],uv,!1,$r,!1,z);if(l&&m==="declutter"&&l.collides(xr.declutterBox))break e;qn.push([e,n,je,xr,1,null,null])}if(N)for(ln=0,wr=an.length;ln<wr;++ln){Et=an[ln],Dr=Et[4],je=this.createLabel(Dr,D,N,""),y=Et[2],p=vh*je.height-lv;let xr=this.calculateImageOrLabelDimensions_(je.width,je.height,Et[0],Et[1],je.width,je.height,y,p,0,0,Et[3],uv,!1,$r,!1,z);if(l&&m==="declutter"&&l.collides(xr.declutterBox))break e;qn.push([e,n,je,xr,1,null,null])}l&&m!=="none"&&l.load(qn.map(_I));for(let xr=0,oS=qn.length;xr<oS;++xr)this.replayImageOrLabel_.apply(this,qn[xr])}}++d;break;case U.END_GEOMETRY:if(s!==void 0){z=S[1];let sn=s(z,Ue);if(sn)return sn}++d;break;case U.FILL:de?T++:this.fill_(e),++d;break;case U.MOVE_TO_LINE_TO:for(f=S[1],g=S[2],xe=c[f],ge=c[f+1],v=xe+.5|0,E=ge+.5|0,(v!==_||E!==C)&&(e.moveTo(xe,ge),_=v,C=E),f+=2;f<g;f+=2)xe=c[f],ge=c[f+1],v=xe+.5|0,E=ge+.5|0,(f==g-2||v!==_||E!==C)&&(e.lineTo(xe,ge),_=v,C=E);++d;break;case U.SET_FILL_STYLE:ee=S,this.alignAndScaleFill_=S[2],T&&(this.fill_(e),T=0,O&&(e.stroke(),O=0)),e.fillStyle=S[1],++d;break;case U.SET_STROKE_STYLE:Ie=S,O&&(e.stroke(),O=0),this.setStrokeStyle_(e,S),++d;break;case U.STROKE:de?O++:e.stroke(),++d;break;default:++d;break}}T&&this.fill_(e),O&&e.stroke()}execute(e,n,r,i,o,s){this.viewRotation_=i,this.execute_(e,n,r,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,n,r,i,o){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,i,o)}},CI=Sy;var Gs=["Polygon","Circle","LineString","Image","Text","Default"],Ay=["Image","Text"],EI=Gs.filter(t=>!Ay.includes(t)),My=class{constructor(e,n,r,i,o,s,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ot(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,n){let r=this.getClipCoords(n);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,n){for(let r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);let o=e[r];for(let s in o){let a=o[s];i[s]=new CI(this.resolution_,this.pixelRatio_,this.overlaps_,a,n)}}}hasExecutors(e){for(let n in this.executorsByZIndex_){let r=this.executorsByZIndex_[n];for(let i=0,o=e.length;i<o;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,n,r,i,o,s){i=Math.round(i);let a=i*2+1,l=Je(this.hitDetectionTransform_,i+.5,i+.5,1/n,-1/n,-r,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Te(a,a,void 0,{willReadFrequently:!0}));let c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a);let d;this.renderBuffer_!==void 0&&(d=Ge(),co(d,e),Is(d,n*(this.renderBuffer_+i),d));let h=lF(i),f;function g(E,w){let x=c.getImageData(0,0,a,a).data;for(let D=0,I=h.length;D<I;D++)if(x[h[D]]>0){if(!s||f!=="Image"&&f!=="Text"||s.includes(E)){let N=(h[D]-3)/4,T=i-N%a,O=i-(N/a|0),ee=o(E,w,T*T+O*O);if(ee)return ee}c.clearRect(0,0,a,a);break}}let y=Object.keys(this.executorsByZIndex_).map(Number);y.sort(Ot);let p,m,_,C,v;for(p=y.length-1;p>=0;--p){let E=y[p].toString();for(_=this.executorsByZIndex_[E],m=Gs.length-1;m>=0;--m)if(f=Gs[m],C=_[f],C!==void 0&&(v=C.executeHitDetection(c,l,r,g,d),v))return v}}getClipCoords(e){let n=this.maxExtent_;if(!n)return null;let r=n[0],i=n[1],o=n[2],s=n[3],a=[r,i,r,s,o,s,o,i];return Vt(a,0,8,2,e,a),a}isEmpty(){return kn(this.executorsByZIndex_)}execute(e,n,r,i,o,s,a){let l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Ot),s=s||Gs;let u,c,d,h,f,g;for(a&&l.reverse(),u=0,c=l.length;u<c;++u){let y=l[u].toString();for(f=this.executorsByZIndex_[y],d=0,h=s.length;d<h;++d){let p=s[d];if(g=f[p],g!==void 0){let m=a===null?void 0:g.getZIndexContext(),_=m?m.getContext():e,C=this.maxExtent_&&p!=="Image"&&p!=="Text";if(C&&(_.save(),this.clip(_,r)),g.execute(_,n,r,i,o,a),C&&_.restore(),m){m.offset();let v=l[u];this.deferredZIndexContexts_[v]||(this.deferredZIndexContexts_[v]=[]),this.deferredZIndexContexts_[v].push(m)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){let e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(Ot);for(let r=0,i=n.length;r<i;++r)e[n[r]].forEach(o=>{o.draw(this.renderedContext_),o.clear()})}},Ty={};function lF(t){if(Ty[t]!==void 0)return Ty[t];let e=t*2+1,n=t*t,r=new Array(n+1);for(let o=0;o<=t;++o)for(let s=0;s<=t;++s){let a=o*o+s*s;if(a>n)break;let l=r[a];l||(l=[],r[a]=l),l.push(((t+o)*e+(t+s))*4+3),o>0&&l.push(((t-o)*e+(t+s))*4+3),s>0&&(l.push(((t+o)*e+(t-s))*4+3),o>0&&l.push(((t-o)*e+(t-s))*4+3))}let i=[];for(let o=0,s=r.length;o<s;++o)r[o]&&i.push(...r[o]);return Ty[t]=i,i}var wI=My;var Ry=class extends Ud{constructor(e,n,r,i,o,s,a){super(),this.context_=e,this.pixelRatio_=n,this.extent_=r,this.transform_=i,this.transformRotation_=i?hi(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ot()}drawImages_(e,n,r,i){if(!this.image_)return;let o=Vt(e,n,r,i,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,l=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,d=o.length;c<d;c+=2){let h=o[c]-this.imageAnchorX_,f=o[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let g=h+this.imageAnchorX_,y=f+this.imageAnchorY_;Je(a,g,y,1,1,u,-g,-y),s.save(),s.transform.apply(s,a),s.translate(g,y),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=l)}drawText_(e,n,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let o=Vt(e,n,r,i,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<r;n+=i){let l=o[n]+this.textOffsetX_,u=o[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(l-this.textOffsetX_,u-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,l,u),this.textFillState_&&s.fillText(this.text_,l,u))}}moveToLineTo_(e,n,r,i,o){let s=this.context_,a=Vt(e,n,r,i,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let l=a.length;o&&(l-=2);for(let u=2;u<l;u+=2)s.lineTo(a[u],a[u+1]);return o&&s.closePath(),r}drawRings_(e,n,r,i){for(let o=0,s=r.length;o<s;++o)n=this.moveToLineTo_(e,n,r[o],i,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ae(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let n=rx(e,this.transform_,this.pixelCoordinates_),r=n[2]-n[0],i=n[3]-n[1],o=Math.sqrt(r*r+i*i),s=this.context_;s.beginPath(),s.arc(n[0],n[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break;default:}}drawFeature(e,n){let r=n.getGeometryFunction()(e);r&&(this.setStyle(n),this.drawGeometry(r))}drawGeometryCollection(e){let n=e.getGeometriesArray();for(let r=0,i=n.length;r<i;++r)this.drawGeometry(n[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ae(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let n=this.context_,r=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){let n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let n=e.getExtent();if(Ae(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let r=this.context_,i=e.getFlatCoordinates(),o=0,s=e.getEnds(),a=e.getStride();r.beginPath();for(let l=0,u=s.length;l<u;++l)o=this.moveToLineTo_(i,o,s[l],a,!1);r.stroke()}if(this.text_!==""){let r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ae(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){let n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ae(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let n=this.context_,r=e.getOrientedFlatCoordinates(),i=0,o=e.getEndss(),s=e.getStride();n.beginPath();for(let a=0,l=o.length;a<l;++a){let u=o[a];i=this.drawRings_(r,i,u,s)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){let n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){let n=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){let n=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,n.lineCap=e.lineCap),yt(r.lineDash,e.lineDash)||n.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){let n=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:Ci;r?(r.font!=e.font&&(r.font=e.font,n.font=e.font),r.textAlign!=i&&(r.textAlign=i,n.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=i,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{let r=e.getColor();this.fillState_={fillStyle:Ut(r||et)}}if(!n)this.strokeState_=null;else{let r=n.getColor(),i=n.getLineCap(),o=n.getLineDash(),s=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),u=n.getMiterLimit(),c=o||Bt;this.strokeState_={lineCap:i!==void 0?i:hr,lineDash:this.pixelRatio_===1?c:c.map(d=>d*this.pixelRatio_),lineDashOffset:(s||Gt)*this.pixelRatio_,lineJoin:a!==void 0?a:fr,lineWidth:(l!==void 0?l:zr)*this.pixelRatio_,miterLimit:u!==void 0?u:Gr,strokeStyle:Ut(r||Hr)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}let r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=n[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();let s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/r,s[1]*this.pixelRatio_/r],this.imageWidth_=n[0]*r}setTextStyle(e){if(!e)this.text_="";else{let n=e.getFill();if(!n)this.textFillState_=null;else{let f=n.getColor();this.textFillState_={fillStyle:Ut(f||et)}}let r=e.getStroke();if(!r)this.textStrokeState_=null;else{let f=r.getColor(),g=r.getLineCap(),y=r.getLineDash(),p=r.getLineDashOffset(),m=r.getLineJoin(),_=r.getWidth(),C=r.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:hr,lineDash:y||Bt,lineDashOffset:p||Gt,lineJoin:m!==void 0?m:fr,lineWidth:_!==void 0?_:zr,miterLimit:C!==void 0?C:Gr,strokeStyle:Ut(f||Hr)}}let i=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),d=e.getTextAlign(),h=e.getTextBaseline();this.textState_={font:i!==void 0?i:Ad,textAlign:d!==void 0?d:Ci,textBaseline:h!==void 0?h:Do},this.text_=c!==void 0?Array.isArray(c)?c.reduce((f,g,y)=>f+=y%2?" ":g,""):c:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}},DI=Ry;var $n=.5;function xI(t,e,n,r,i,o,s,a,l){let u=l?fi(i,l):i,c=t[0]*$n,d=t[1]*$n,h=Te(c,d);h.imageSmoothingEnabled=!1;let f=h.canvas,g=new DI(h,$n,i,null,s,a,l?mo(jr(),l):null),y=n.length,p=Math.floor((256*256*256-1)/y),m={};for(let C=1;C<=y;++C){let v=n[C-1],E=v.getStyleFunction()||r;if(!E)continue;let w=E(v,o);if(!w)continue;Array.isArray(w)||(w=[w]);let D=(C*p).toString(16).padStart(7,"#00000");for(let I=0,N=w.length;I<N;++I){let T=w[I],O=T.getGeometryFunction()(v);if(!O||!Ae(u,O.getExtent()))continue;let ee=T.clone(),Ie=ee.getFill();Ie&&Ie.setColor(D);let F=ee.getStroke();F&&(F.setColor(D),F.setLineDash(null)),ee.setText(void 0);let L=T.getImage();if(L){let z=L.getImageSize();if(!z)continue;let xe=Te(z[0],z[1],void 0,{alpha:!1}),ge=xe.canvas;xe.fillStyle=D,xe.fillRect(0,0,ge.width,ge.height),ee.setImage(new Al({img:ge,anchor:L.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:L.getOrigin(),opacity:1,size:L.getSize(),scale:L.getScale(),rotation:L.getRotation(),rotateWithView:L.getRotateWithView()}))}let P=ee.getZIndex()||0,G=m[P];G||(G={},m[P]=G,G.Polygon=[],G.Circle=[],G.LineString=[],G.Point=[]);let de=O.getType();if(de==="GeometryCollection"){let z=O.getGeometriesArrayRecursive();for(let xe=0,ge=z.length;xe<ge;++xe){let Ue=z[xe];G[Ue.getType().replace("Multi","")].push(Ue,ee)}}else G[de.replace("Multi","")].push(O,ee)}}let _=Object.keys(m).map(Number).sort(Ot);for(let C=0,v=_.length;C<v;++C){let E=m[_[C]];for(let w in E){let x=E[w];for(let D=0,I=x.length;D<I;D+=2){g.setStyle(x[D+1]);for(let N=0,T=e.length;N<T;++N)g.setTransform(e[N]),g.drawGeometry(x[D])}}}return h.getImageData(0,0,f.width,f.height)}function II(t,e,n){let r=[];if(n){let i=Math.floor(Math.round(t[0])*$n),o=Math.floor(Math.round(t[1])*$n),s=(ye(i,0,n.width-1)+ye(o,0,n.height-1)*n.width)*4,a=n.data[s],l=n.data[s+1],c=n.data[s+2]+256*(l+256*a),d=Math.floor((256*256*256-1)/e.length);c&&c%d===0&&r.push(e[c/d-1])}return r}var uF=.5,bI={Point:mF,LineString:fF,Polygon:_F,MultiPoint:yF,MultiLineString:pF,MultiPolygon:gF,GeometryCollection:hF,Circle:cF};function SI(t,e){return parseInt(J(t),10)-parseInt(J(e),10)}function Ny(t,e){let n=Oy(t,e);return n*n}function Oy(t,e){return uF*t/e}function cF(t,e,n,r,i){let o=n.getFill(),s=n.getStroke();if(o||s){let l=t.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(o,s),l.drawCircle(e,r,i)}let a=n.getText();if(a&&a.getText()){let l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r)}}function Py(t,e,n,r,i,o,s,a){let l=[],u=n.getImage();if(u){let h=!0,f=u.getImageState();f==W.LOADED||f==W.ERROR?h=!1:f==W.IDLE&&u.load(),h&&l.push(u.ready())}let c=n.getFill();c&&c.loading()&&l.push(c.ready());let d=l.length>0;return d&&Promise.all(l).then(()=>i(null)),dF(t,e,n,r,o,s,a),d}function dF(t,e,n,r,i,o,s){let a=n.getGeometryFunction()(e);if(!a)return;let l=a.simplifyTransformed(r,i);if(n.getRenderer())TI(t,l,n,e,s);else{let c=bI[l.getType()];c(t,l,n,e,s,o)}}function TI(t,e,n,r,i){if(e.getType()=="GeometryCollection"){let s=e.getGeometries();for(let a=0,l=s.length;a<l;++a)TI(t,s[a],n,r,i);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,r,n.getRenderer(),n.getHitDetectionRenderer(),i)}function hF(t,e,n,r,i,o){let s=e.getGeometriesArray(),a,l;for(a=0,l=s.length;a<l;++a){let u=bI[s[a].getType()];u(t,s[a],n,r,i,o)}}function fF(t,e,n,r,i){let o=n.getStroke();if(o){let a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,r,i)}let s=n.getText();if(s&&s.getText()){let a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,r,i)}}function pF(t,e,n,r,i){let o=n.getStroke();if(o){let a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,r,i)}let s=n.getText();if(s&&s.getText()){let a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,r,i)}}function gF(t,e,n,r,i){let o=n.getFill(),s=n.getStroke();if(s||o){let l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawMultiPolygon(e,r,i)}let a=n.getText();if(a&&a.getText()){let l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}function mF(t,e,n,r,i,o){let s=n.getImage(),a=n.getText(),l=a&&a.getText(),u=o&&s&&l?{}:void 0;if(s){if(s.getImageState()!=W.LOADED)return;let c=t.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,u),c.drawPoint(e,r,i)}if(l){let c=t.getBuilder(n.getZIndex(),"Text");c.setTextStyle(a,u),c.drawText(e,r,i)}}function yF(t,e,n,r,i,o){let s=n.getImage(),a=s&&s.getOpacity()!==0,l=n.getText(),u=l&&l.getText(),c=o&&a&&u?{}:void 0;if(a){if(s.getImageState()!=W.LOADED)return;let d=t.getBuilder(n.getZIndex(),"Image");d.setImageStyle(s,c),d.drawMultiPoint(e,r,i)}if(u){let d=t.getBuilder(n.getZIndex(),"Text");d.setTextStyle(l,c),d.drawText(e,r,i)}}function _F(t,e,n,r,i){let o=n.getFill(),s=n.getStroke();if(o||s){let l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawPolygon(e,r,i)}let a=n.getText();if(a&&a.getText()){let l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}var Ly=class extends Hd{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ge(),this.wrappedRenderedExtent_=Ge(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,r){let i=n.extent,o=n.viewState,s=o.center,a=o.resolution,l=o.projection,u=o.rotation,c=l.getExtent(),d=this.getLayer().getSource(),h=this.getLayer().getDeclutter(),f=n.pixelRatio,g=n.viewHints,y=!(g[tt.ANIMATING]||g[tt.INTERACTING]),p=this.context,m=Math.round(ie(i)/a*f),_=Math.round(Ne(i)/a*f),C=d.getWrapX()&&l.canWrapX(),v=C?ie(c):null,E=C?Math.ceil((i[2]-c[2])/v)+1:1,w=C?Math.floor((i[0]-c[0])/v):0;do{let x=this.getRenderTransform(s,a,u,f,m,_,w*v);e.execute(p,[p.canvas.width,p.canvas.height],x,u,y,r===void 0?Gs:r?Ay:EI,r?h&&n.declutter[h]:void 0)}while(++w<E)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Te(this.context.canvas.width,this.context.canvas.height,Iy))}resetDrawContext_(){if(this.opacity_!==1){let e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Co(this.context),Iy.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.resetDrawContext_())}renderFrame(e,n){let r=e.pixelRatio,i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;let o=e.extent,s=e.viewState.resolution,a=Math.round(ie(o)/s*r),l=Math.round(Ne(o)/s*r);Je(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/r,1/r,0,-a/2,-l/2),xs(this.inversePixelTransform,this.pixelTransform);let u=td(this.pixelTransform);this.useContainer(n,u,this.getBackground(e));let c=this.context,d=c.canvas,h=this.replayGroup_,f=h&&!h.isEmpty();if(!f&&!(this.getLayer().hasListener(pt.PRERENDER)||this.getLayer().hasListener(pt.POSTRENDER)))return null;d.width!=a||d.height!=l?(d.width=a,d.height=l,d.style.transform!==u&&(d.style.transform=u)):this.containerReused||c.clearRect(0,0,a,l),this.setDrawContext_(),this.preRender(c,e);let g=e.viewState,y=g.projection,p=!1;if(f&&i.extent&&this.clipping){let m=Un(i.extent,y);f=Ae(m,e.extent),p=f&&!Or(m,e.extent),p&&this.clipUnrotated(c,e,m)}return f&&this.renderWorlds(h,e,this.getLayer().getDeclutter()?!1:void 0),p&&c.restore(),this.postRender(c,e),this.renderedRotation_!==g.rotation&&(this.renderedRotation_=g.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let r=[this.context.canvas.width,this.context.canvas.height];ke(this.pixelTransform,r);let i=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],d=r[0]*$n,h=r[1]*$n;c.push(this.getRenderTransform(i,o,s,$n,d,h,0).slice());let f=u.getSource(),g=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Or(g,l)){let p=l[0],m=ie(g),_=0,C;for(;p<g[0];)--_,C=m*_,c.push(this.getRenderTransform(i,o,s,$n,d,h,C).slice()),p+=m;for(_=0,p=l[2];p>g[2];)++_,C=m*_,c.push(this.getRenderTransform(i,o,s,$n,d,h,C).slice()),p-=m}let y=jr();this.hitDetectionImageData_=xI(r,c,this.renderedFeatures_,u.getStyleFunction(),l,o,s,Ny(o,this.renderedPixelRatio_),y?a:null)}n(II(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,r,i,o){if(!this.replayGroup_)return;let s=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),u={},c=function(g,y,p){let m=J(g),_=u[m];if(_){if(_!==!0&&p<_.distanceSq){if(p===0)return u[m]=!0,o.splice(o.lastIndexOf(_),1),i(g,l,y);_.geometry=y,_.distanceSq=p}}else{if(p===0)return u[m]=!0,i(g,l,y);o.push(u[m]={feature:g,layer:l,geometry:y,distanceSq:p,callback:i})}},d,h=[this.replayGroup_],f=this.getLayer().getDeclutter();return h.some(g=>d=g.forEachFeatureAtCoordinate(e,s,a,r,c,f&&n.declutter[f]?n.declutter[f].all().map(y=>y.value):null)),d}handleFontsChanged(){let e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){let n=this.getLayer(),r=n.getSource();if(!r)return!1;let i=e.viewHints[tt.ANIMATING],o=e.viewHints[tt.INTERACTING],s=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!s&&i||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let l=e.extent,u=e.viewState,c=u.projection,d=u.resolution,h=e.pixelRatio,f=n.getRevision(),g=n.getRenderBuffer(),y=n.getRenderOrder();y===void 0&&(y=SI);let p=u.center.slice(),m=Is(l,g*d),_=m.slice(),C=[m.slice()],v=c.getExtent();if(r.getWrapX()&&c.canWrapX()&&!Or(v,e.extent)){let F=ie(v),L=Math.max(ie(m)/2,F);m[0]=v[0]-L,m[2]=v[2]+L,ud(p,c);let P=$g(C[0],c);P[0]<v[0]&&P[2]<v[2]?C.push([P[0]+F,P[1],P[2]+F,P[3]]):P[0]>v[0]&&P[2]>v[2]&&C.push([P[0]-F,P[1],P[2]-F,P[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==f&&this.renderedRenderOrder_==y&&Or(this.wrappedRenderedExtent_,m))return yt(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=p,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let E=new gI(Oy(d,h),m,d,h),w=jr(),x;if(w){for(let F=0,L=C.length;F<L;++F){let P=C[F],G=fi(P,c);r.loadFeatures(G,JD(d,c),w)}x=mo(w,c)}else for(let F=0,L=C.length;F<L;++F)r.loadFeatures(C[F],d,c);let D=Ny(d,h),I=!0,N=(F,L)=>{let P,G=F.getStyleFunction()||n.getStyleFunction();if(G&&(P=G(F,d)),P){let de=this.renderFeature(F,D,P,E,x,this.getLayer().getDeclutter(),L);I=I&&!de}},T=fi(m,c),O=r.getFeaturesInExtent(T);y&&O.sort(y);for(let F=0,L=O.length;F<L;++F)N(O[F],F);this.renderedFeatures_=O,this.ready=I;let ee=E.finish(),Ie=new wI(m,d,h,r.getOverlaps(),ee,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=d,this.renderedRevision_=f,this.renderedRenderOrder_=y,this.renderedExtent_=_,this.wrappedRenderedExtent_=m,this.renderedCenter_=p,this.renderedProjection_=c,this.renderedPixelRatio_=h,this.replayGroup_=Ie,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,r,i,o,s,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let u=0,c=r.length;u<c;++u)l=Py(i,e,r[u],n,this.boundHandleStyleImageChange_,o,s,a)||l;else l=Py(i,e,r,n,this.boundHandleStyleImageChange_,o,s,a);return l}},MI=Ly;var Fy=class extends jd{constructor(e){super(e)}createRenderer(){return new MI(this)}},Ul=Fy;var AI=hv(ty(),1);var ky=class{constructor(e){this.rbush_=new AI.default(e),this.items_={}}insert(e,n){let r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(r),this.items_[J(n)]=r}load(e,n){let r=new Array(n.length);for(let i=0,o=n.length;i<o;i++){let s=e[i],a=n[i],l={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};r[i]=l,this.items_[J(a)]=l}this.rbush_.load(r)}remove(e){let n=J(e),r=this.items_[n];return delete this.items_[n],this.rbush_.remove(r)!==null}update(e,n){let r=this.items_[J(n)],i=[r.minX,r.minY,r.maxX,r.maxY];Lr(i,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){let n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let r;for(let i=0,o=e.length;i<o;i++)if(r=n(e[i]),r)return r;return r}isEmpty(){return kn(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){let n=this.rbush_.toJSON();return bt(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(let n in e.items_)this.items_[n]=e.items_[n]}},Vy=ky;var $d=class t extends _t{constructor(e,n,r){super(),r!==void 0&&n===void 0?this.setFlatCoordinates(r,e):(n=n||0,this.setCenterAndRadius(e,n,r))}clone(){let e=new t(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){let o=this.flatCoordinates,s=e-o[0],a=n-o[1],l=s*s+a*a;if(l<i){if(l===0)for(let u=0;u<this.stride;++u)r[u]=o[u];else{let u=this.getRadius()/Math.sqrt(l);r[0]=o[0]+u*s,r[1]=o[1]+u*a;for(let c=2;c<this.stride;++c)r[c]=o[c]}return r.length=this.stride,l}return i}containsXY(e,n){let r=this.flatCoordinates,i=e-r[0],o=n-r[1];return i*i+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){let n=this.flatCoordinates,r=n[this.stride]-n[0];return bt(n[0]-r,n[1]-r,n[0]+r,n[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){let e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+n*n}getType(){return"Circle"}intersectsExtent(e){let n=this.getExtent();if(Ae(e,n)){let r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:Ss(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){let n=this.stride,r=this.flatCoordinates[n]-this.flatCoordinates[0],i=e.slice();i[n]=i[0]+r;for(let o=1;o<n;++o)i[n+o]=e[o];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(e,n,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);let i=this.flatCoordinates,o=pd(i,0,e,this.stride);i[o++]=i[0]+n;for(let s=1,a=this.stride;s<a;++s)i[o++]=i[s];i.length=o,this.changed()}getCoordinates(){return null}setCoordinates(e,n){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,n){let r=this.getCenter(),i=this.getStride();this.setCenter(Ns(r,0,r.length,i,e,n,r)),this.changed()}};$d.prototype.transform;var RI=$d;var Uy=class t extends fd{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(se),this.changeEventsKeys_.length=0}listenGeometriesChange_(){let e=this.geometries_;for(let n=0,r=e.length;n<r;++n)this.changeEventsKeys_.push(X(e[n],A.CHANGE,this.changed,this))}clone(){let e=new t(jy(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,n,r,i){if(i<Pt(this.getExtent(),e,n))return i;let o=this.geometries_;for(let s=0,a=o.length;s<a;++s)i=o[s].closestPointXY(e,n,r,i);return i}containsXY(e,n){let r=this.geometries_;for(let i=0,o=r.length;i<o;++i)if(r[i].containsXY(e,n))return!0;return!1}computeExtent(e){Pr(e);let n=this.geometries_;for(let r=0,i=n.length;r<i;++r)od(e,n[r].getExtent());return e}getGeometries(){return jy(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[],n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].getType()===this.getType()?e=e.concat(n[r].getGeometriesArrayRecursive()):e.push(n[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;let n=[],r=this.geometries_,i=!1;for(let o=0,s=r.length;o<s;++o){let a=r[o],l=a.getSimplifiedGeometry(e);n.push(l),l!==a&&(i=!0)}return i?new t(n):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){let n=this.geometries_;for(let r=0,i=n.length;r<i;++r)if(n[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,n){let r=this.geometries_;for(let i=0,o=r.length;i<o;++i)r[i].rotate(e,n);this.changed()}scale(e,n,r){r||(r=Lt(this.getExtent()));let i=this.geometries_;for(let o=0,s=i.length;o<s;++o)i[o].scale(e,n,r);this.changed()}setGeometries(e){this.setGeometriesArray(jy(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){let n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].applyTransform(e);this.changed()}translate(e,n){let r=this.geometries_;for(let i=0,o=r.length;i<o;++i)r[i].translate(e,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}};function jy(t){return t.map(e=>e.clone())}var Hs=Uy;var By=class t extends _t{constructor(e,n,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&r)this.setFlatCoordinates(n,e),this.ends_=r;else{let i=e,o=[],s=[];for(let l=0,u=i.length;l<u;++l){let c=i[l];dt(o,c.getFlatCoordinates()),s.push(o.length)}let a=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(e){dt(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let e=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<Pt(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fl(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gl(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,n,r,i))}getCoordinateAtM(e,n,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,r=r!==void 0?r:!1,Rx(this.flatCoordinates,0,this.ends_,this.stride,e,n,r))}getCoordinates(){return gi(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new cr(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){let e=this.flatCoordinates,n=this.ends_,r=this.layout,i=[],o=0;for(let s=0,a=n.length;s<a;++s){let l=n[s],u=new cr(e.slice(o,l),r);i.push(u),o=l}return i}getFlatMidpoints(){let e=[],n=this.flatCoordinates,r=0,i=this.ends_,o=this.stride;for(let s=0,a=i.length;s<a;++s){let l=i[s],u=Eo(n,r,l,o,.5);dt(e,u),r=l}return e}getSimplifiedGeometryInternal(e){let n=[],r=[];return n.length=gd(this.flatCoordinates,0,this.ends_,this.stride,e,n,0,r),new t(n,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return hx(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);let r=ml(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}},Bl=By;var Gy=class t extends _t{constructor(e,n){super(),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendPoint(e){dt(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){let e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){if(i<Pt(this.getExtent(),e,n))return i;let o=this.flatCoordinates,s=this.stride;for(let a=0,l=o.length;a<l;a+=s){let u=Ft(e,n,o[a],o[a+1]);if(u<i){i=u;for(let c=0;c<s;++c)r[c]=o[a+c];r.length=s}}return i}getCoordinates(){return mn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){let n=this.flatCoordinates.length/this.stride;return e<0||n<=e?null:new ft(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){let e=this.flatCoordinates,n=this.layout,r=this.stride,i=[];for(let o=0,s=e.length;o<s;o+=r){let a=new ft(e.slice(o,o+r),n);i.push(a)}return i}getType(){return"MultiPoint"}intersectsExtent(e){let n=this.flatCoordinates,r=this.stride;for(let i=0,o=n.length;i<o;i+=r){let s=n[i],a=n[i+1];if(rl(e,s,a))return!0}return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yo(this.flatCoordinates,0,e,this.stride),this.changed()}},$s=Gy;function zd(t,e,n,r){let i=[],o=Ge();for(let s=0,a=n.length;s<a;++s){let l=n[s];o=bs(t,e,l[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return i}var Hy=class t extends _t{constructor(e,n,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){let i=e,o=[],s=[];for(let a=0,l=i.length;a<l;++a){let u=i[a],c=o.length,d=u.getEnds();for(let h=0,f=d.length;h<f;++h)d[h]+=c;dt(o,u.getFlatCoordinates()),s.push(d)}n=i.length===0?this.getLayout():i[0].getLayout(),e=o,r=s}n!==void 0&&r?(this.setFlatCoordinates(n,e),this.endss_=r):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{let r=this.flatCoordinates.length;dt(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let i=0,o=n.length;i<o;++i)n[i]+=r}this.endss_.push(n),this.changed()}clone(){let e=this.endss_.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=this.endss_[i].slice();let r=new t(this.flatCoordinates.slice(),this.layout,n);return r.applyProperties(this),r}closestPointXY(e,n,r,i){return i<Pt(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ox(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),sx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return dx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,n)}getArea(){return ux(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),pm(n,0,this.endss_,this.stride,e)):n=this.flatCoordinates,_l(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){let e=zd(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=md(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new $s(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;gx(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=pm(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){let n=[],r=[];return n.length=lx(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),n,0,r),new t(n,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let n;if(e===0)n=0;else{let o=this.endss_[e-1];n=o[o.length-1]}let r=this.endss_[e].slice(),i=r[r.length-1];if(n!==0)for(let o=0,s=r.length;o<s;++o)r[o]-=n;return new tn(this.flatCoordinates.slice(n,i),this.layout,r)}getPolygons(){let e=this.layout,n=this.flatCoordinates,r=this.endss_,i=[],o=0;for(let s=0,a=r.length;s<a;++s){let l=r[s].slice(),u=l[l.length-1];if(o!==0)for(let d=0,h=l.length;d<h;++d)l[d]-=o;let c=new tn(n.slice(o,u),e,l);i.push(c),o=u}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return fx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,3),this.flatCoordinates||(this.flatCoordinates=[]);let r=ax(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{let i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}},Gl=Hy;var NI=ot(),Hl=class t{constructor(e,n,r,i,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=o,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?id(this.flatCoordinates_):bs(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){let e=Lt(this.getExtent());this.flatInteriorPoints_=Cl(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){let e=mx(this.flatCoordinates_,this.ends_),n=zd(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=md(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Eo(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];let e=this.flatCoordinates_,n=0,r=this.ends_;for(let i=0,o=r.length;i<o;++i){let s=r[i],a=Eo(e,n,s,2,.5);dt(this.flatMidpoints_,a),n=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Oe(e);let n=e.getExtent(),r=e.getWorldExtent();if(n&&r){let i=Ne(r)/Ne(n);Je(NI,r[0],r[3],i,-i,0,0,0),Vt(this.flatCoordinates_,0,this.flatCoordinates_.length,2,NI,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new t(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Qc((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);let r=this.simplifiedGeometry_.getFlatCoordinates(),i;switch(this.type_){case"LineString":r.length=_o(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=gd(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=yl(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break;default:}return i&&(this.simplifiedGeometry_=new t(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}};Hl.prototype.getFlatCoordinates=Hl.prototype.getOrientedFlatCoordinates;var Ii=Hl;var $y=class extends We{constructor(e){super(),this.projection=Oe(e.projection),this.attributions_=OI(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;let n=this;this.viewPromise_=new Promise(function(r,i){n.viewResolver=r,n.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=OI(e),this.changed()}setState(e){this.state_=e,this.changed()}};function OI(t){return t?Array.isArray(t)?function(e){return t}:typeof t=="function"?t:function(e){return[t]}:null}var Wd=$y;var rn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function PI(t,e){return[[-1/0,-1/0,1/0,1/0]]}var vF=!1;function CF(t,e,n,r,i,o,s){let a=new XMLHttpRequest;a.open("GET",typeof t=="function"?t(n,r,i):t,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=vF,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){let u=e.getType(),c;u=="json"?c=JSON.parse(a.responseText):u=="text"?c=a.responseText:u=="xml"?(c=a.responseXML,c||(c=new DOMParser().parseFromString(a.responseText,"application/xml"))):u=="arraybuffer"&&(c=a.response),c?o(e.readFeatures(c,{extent:n,featureProjection:i}),e.readProjection(c)):s()}else s()},a.onerror=s,a.send()}function zy(t,e){return function(n,r,i,o,s){let a=this;CF(t,e,n,r,i,function(l,u){a.addFeatures(l),o!==void 0&&o(l)},s||Fn)}}var _r=class extends ze{constructor(e,n,r){super(e),this.feature=n,this.features=r}},Wy=class extends Wd{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Fn,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&($(this.format_,"`format` must be set when `url` is set"),this.loader_=zy(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:PI;let n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new Vy:null,this.loadedExtentsRtree_=new Vy,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!n&&r===void 0&&(r=new It(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){let n=J(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);let r=e.getGeometry();if(r){let i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new _r(rn.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof Ii||(this.featureChangeKeys_[e]=[X(n,A.CHANGE,this.handleFeatureChange_,this),X(n,Pn.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let r=!0;if(n.getId()!==void 0){let i=String(n.getId());if(!(i in this.idIndex_))this.idIndex_[i]=n;else if(n instanceof Ii){let o=this.idIndex_[i];o instanceof Ii?Array.isArray(o)?o.push(n):this.idIndex_[i]=[o,n]:r=!1}else r=!1}return r&&($(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){let n=[],r=[],i=[];for(let o=0,s=e.length;o<s;o++){let a=e[o],l=J(a);this.addToIndex_(l,a)&&r.push(a)}for(let o=0,s=r.length;o<s;o++){let a=r[o],l=J(a);this.setupChangeEvents_(l,a);let u=a.getGeometry();if(u){let c=u.getExtent();n.push(c),i.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,i),this.hasListener(rn.ADDFEATURE))for(let o=0,s=r.length;o<s;o++)this.dispatchEvent(new _r(rn.ADDFEATURE,r[o]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(rn.ADDFEATURE,function(r){n||(n=!0,e.push(r.feature),n=!1)}),this.addEventListener(rn.REMOVEFEATURE,function(r){n||(n=!0,e.remove(r.feature),n=!1)}),e.addEventListener(rt.ADD,r=>{n||(n=!0,this.addFeature(r.element),n=!1)}),e.addEventListener(rt.REMOVE,r=>{n||(n=!0,this.removeFeature(r.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(let r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(se);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){let r=i=>{this.removeFeatureInternal(i)};this.featuresRtree_.forEach(r);for(let i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let n=new _r(rn.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){let r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){let o=i.getGeometry();if(o instanceof Ii||o.intersectsCoordinate(e))return n(i)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(r){let i=r.getGeometry();if(i instanceof Ii||i.intersectsExtent(e)){let o=n(r);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),kn(this.nullGeometryFeatures_)||dt(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){let n=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){n.push(r)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);let i=PD(e,n);return[].concat(...i.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){let r=e[0],i=e[1],o=null,s=[NaN,NaN],a=1/0,l=[-1/0,-1/0,1/0,1/0];return n=n||Ln,this.featuresRtree_.forEachInExtent(l,function(u){if(n(u)){let c=u.getGeometry(),d=a;if(a=c instanceof Ii?0:c.closestPointXY(r,i,s,a),a<d){o=u;let h=Math.sqrt(a);l[0]=r-h,l[1]=i-h,l[2]=r+h,l[3]=i+h}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){let n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){let n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){let n=e.target,r=J(n),i=n.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[r]=n);else{let s=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(s,n)):this.featuresRtree_&&this.featuresRtree_.update(s,n)}let o=n.getId();if(o!==void 0){let s=o.toString();this.idIndex_[s]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[s]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[r]=n;this.changed(),this.dispatchEvent(new _r(rn.CHANGEFEATURE,n))}hasFeature(e){let n=e.getId();return n!==void 0?n in this.idIndex_:J(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&kn(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,r){let i=this.loadedExtentsRtree_,o=this.strategy_(e,n,r);for(let s=0,a=o.length;s<a;++s){let l=o[s];i.forEachInExtent(l,function(c){return Or(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new _r(rn.FEATURESLOADSTART)),this.loader_.call(this,l,n,r,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new _r(rn.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new _r(rn.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){let n=this.loadedExtentsRtree_,r;n.forEachInExtent(e,function(i){if(Lr(i.extent,e))return r=i,!0}),r&&n.remove(r)}removeFeatures(e){let n=[];for(let r=0,i=e.length;r<i;++r){let o=e[r],s=this.removeFeatureInternal(o);s&&n.push(s)}n.length>0&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){let n=J(e);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e);let r=this.featureChangeKeys_[n];if(!r)return;r.forEach(se),delete this.featureChangeKeys_[n];let i=e.getId();return i!==void 0&&delete this.idIndex_[i.toString()],delete this.uidIndex_[n],this.hasListener(rn.REMOVEFEATURE)&&this.dispatchEvent(new _r(rn.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let n=!1;for(let r in this.idIndex_){let i=this.idIndex_[r];if(e instanceof Ii&&Array.isArray(i)&&i.includes(e))i.splice(i.indexOf(e),1);else if(this.idIndex_[r]===e){delete this.idIndex_[r],n=!0;break}}return n}setLoader(e){this.loader_=e}setUrl(e){$(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(zy(e,this.format_))}},$l=Wy;var k={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var qy=class extends li{constructor(e,n,r){super(),r=r||{},this.tileCoord=e,this.state=n,this.interimTile=null,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(A.CHANGE)}release(){this.state===k.ERROR&&this.setState(k.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==k.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let n=this;do{if(e.getState()==k.LOADED){e.interimTile=null;break}e.getState()==k.LOADING?n=e:e.getState()==k.IDLE?n.interimTile=e.interimTile:n=e,e=n.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==k.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){j()}getAlpha(e,n){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=n,this.transitionStarts_[e]=r;else if(r===-1)return 1;let i=n-r+1e3/60;return i>=this.transition_?1:Ym(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}},qd=qy;var Yy=class extends qd{constructor(e,n,r,i,o,s){super(e,n,s),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=k.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=k.ERROR,this.unlistenImage_(),this.image_=EF(),this.changed()}handleImageLoad_(){let e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=k.LOADED:this.state=k.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==k.ERROR&&(this.state=k.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==k.IDLE&&(this.state=k.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Mx(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};function EF(){let t=Te(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var Yd=Yy;var Xy=class{constructor(e,n,r){this.decay_=e,this.minVelocity_=n,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;let e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let r=n-3;for(;r>0&&this.points_[r+2]>e;)r-=3;let i=this.points_[n+2]-this.points_[r+2];if(i<1e3/60)return!1;let o=this.points_[n]-this.points_[r],s=this.points_[n+1]-this.points_[r+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},LI=Xy;var Zy=class extends vs{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){j()}calculateMatrices2D(e){let n=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;Je(r,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),xs(i,r)}forEachFeatureAtCoordinate(e,n,r,i,o,s,a,l){let u,c=n.viewState;function d(v,E,w,x){return o.call(s,E,v?w:null,x)}let h=c.projection,f=ud(e.slice(),h),g=[[0,0]];if(h.canWrapX()&&i){let v=h.getExtent(),E=ie(v);g.push([-E,0],[E,0])}let y=n.layerStatesArray,p=y.length,m=[],_=[];for(let v=0;v<g.length;v++)for(let E=p-1;E>=0;--E){let w=y[E],x=w.layer;if(x.hasRenderer()&&Ml(w,c)&&a.call(l,x)){let D=x.getRenderer(),I=x.getSource();if(D&&I){let N=I.getWrapX()?f:e,T=d.bind(null,w.managed);_[0]=N[0]+g[v][0],_[1]=N[1]+g[v][1],u=D.forEachFeatureAtCoordinate(_,n,r,T,m)}if(u)return u}}if(m.length===0)return;let C=1/m.length;return m.forEach((v,E)=>v.distanceSq+=E*C),m.sort((v,E)=>v.distanceSq-E.distanceSq),m.some(v=>u=v.callback(v.feature,v.layer,v.geometry)),u}hasFeatureAtCoordinate(e,n,r,i,o,s){return this.forEachFeatureAtCoordinate(e,n,r,i,Ln,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){j()}scheduleExpireIconCache(e){nn.canExpireCache()&&e.postRenderFunctions.push(wF)}};function wF(t,e){nn.expire()}var FI=Zy;var Ky=class extends FI{constructor(e){super(e),this.fontChangeListenerKey_=X(dr,Pn.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");let n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=vi+" ol-layers";let r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){let r=this.getMap();if(r.hasListener(e)){let i=new Bd(e,void 0,n);r.dispatchEvent(i)}}disposeInternal(){se(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(pt.PRECOMPOSE,e);let n=e.layerStatesArray.sort(function(a,l){return a.zIndex-l.zIndex});n.some(a=>a.layer instanceof jd&&a.layer.getDeclutter())&&(e.declutter={});let i=e.viewState;this.children_.length=0;let o=[],s=null;for(let a=0,l=n.length;a<l;++a){let u=n[a];e.layerIndex=a;let c=u.layer,d=c.getSourceState();if(!Ml(u,i)||d!="ready"&&d!="undefined"){c.unrender();continue}let h=c.render(e,s);h&&(h!==s&&(this.children_.push(h),s=h),o.push(u))}this.declutter(e,o),Tx(this.element_,this.children_),this.dispatchRenderEvent(pt.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){for(let r=n.length-1;r>=0;--r){let i=n[r],o=i.layer;o.getDeclutter()&&o.renderDeclutter(e,i)}n.forEach(r=>r.layer.renderDeferred(e))}},kI=Ky;var zn=class extends ze{constructor(e,n){super(e),this.layer=n}},Qy={LAYERS:"layers"},Jy=class t extends Nd{constructor(e){e=e||{};let n=Object.assign({},e);delete n.layers;let r=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Qy.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new It(r.slice(),{unique:!0}):$(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new It(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(se),this.layersListenerKeys_.length=0;let e=this.getLayers();this.layersListenerKeys_.push(X(e,rt.ADD,this.handleLayersAdd_,this),X(e,rt.REMOVE,this.handleLayersRemove_,this));for(let r in this.listenerKeys_)this.listenerKeys_[r].forEach(se);lr(this.listenerKeys_);let n=e.getArray();for(let r=0,i=n.length;r<i;r++){let o=n[r];this.registerLayerListeners_(o),this.dispatchEvent(new zn("addlayer",o))}this.changed()}registerLayerListeners_(e){let n=[X(e,Pn.PROPERTYCHANGE,this.handleLayerChange_,this),X(e,A.CHANGE,this.handleLayerChange_,this)];e instanceof t&&n.push(X(e,"addlayer",this.handleLayerGroupAdd_,this),X(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[J(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new zn("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new zn("removelayer",e.layer))}handleLayersAdd_(e){let n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new zn("addlayer",n)),this.changed()}handleLayersRemove_(e){let n=e.element,r=J(n);this.listenerKeys_[r].forEach(se),delete this.listenerKeys_[r],this.dispatchEvent(new zn("removelayer",n)),this.changed()}getLayers(){return this.get(Qy.LAYERS)}setLayers(e){let n=this.getLayers();if(n){let r=n.getArray();for(let i=0,o=r.length;i<o;++i)this.dispatchEvent(new zn("removelayer",r[i]))}this.set(Qy.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){let n=e!==void 0?e:[],r=n.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(n)});let i=this.getLayerState(),o=i.zIndex;!e&&i.zIndex===void 0&&(o=0);for(let s=r,a=n.length;s<a;s++){let l=n[s];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=ui(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=o)}return n}getSourceState(){return"ready"}},zl=Jy;var e_=class extends ze{constructor(e,n,r){super(e),this.map=n,this.frameState=r!==void 0?r:null}},bi=e_;var t_=class extends bi{constructor(e,n,r,i,o,s){super(e,n,o),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},vn=t_;var ce={SINGLECLICK:"singleclick",CLICK:A.CLICK,DBLCLICK:A.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Wl={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var n_=class extends li{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;let r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=X(r,Wl.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=X(r,Wl.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(A.TOUCHMOVE,this.boundHandleTouchMove_,Id?{passive:!1}:!1)}emulateClick_(e){let n=new vn(ce.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new vn(ce.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;let r=new vn(ce.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){let n=e,r=n.pointerId;if(n.type==ce.POINTERUP||n.type==ce.POINTERCANCEL){delete this.trackedTouches_[r];for(let i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==ce.POINTERDOWN||n.type==ce.POINTERMOVE)&&(this.trackedTouches_[r]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);let n=new vn(ce.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(se),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);let n=new vn(ce.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){let r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(X(r,ce.POINTERMOVE,this.handlePointerMove_,this),X(r,ce.POINTERUP,this.handlePointerUp_,this),X(this.element_,ce.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(X(this.element_.getRootNode(),ce.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;let n=new vn(ce.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;let n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new vn(ce.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){let n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(se(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(A.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(se(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(se),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},VI=n_;var vr={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var mt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var ql=1/0,r_=class{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,lr(this.queuedElements_)}dequeue(){let e=this.elements_,n=this.priorities_,r=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));let i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){$(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");let n=this.priorityFunction_(e);return n!=ql?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){let n=this.elements_,r=this.priorities_,i=n.length,o=n[e],s=r[e],a=e;for(;e<i>>1;){let l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<i&&r[u]<r[l]?u:l;n[e]=n[c],r[e]=r[c],e=c}n[e]=o,r[e]=s,this.siftDown_(a,e)}siftDown_(e,n){let r=this.elements_,i=this.priorities_,o=r[n],s=i[n];for(;n>e;){let a=this.getParentIndex_(n);if(i[a]>s)r[n]=r[a],i[n]=i[a],n=a;else break}r[n]=o,i[n]=s}reprioritize(){let e=this.priorityFunction_,n=this.elements_,r=this.priorities_,i=0,o=n.length,s,a,l;for(a=0;a<o;++a)s=n[a],l=e(s),l==ql?delete this.queuedElements_[this.keyFunction_(s)]:(r[i]=l,n[i++]=s);n.length=i,r.length=i,this.heapify_()}},jI=r_;var i_=class extends jI{constructor(e,n){super(function(r){return e.apply(null,r)},function(r){return r[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){let n=super.enqueue(e);return n&&e[0].addEventListener(A.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){let n=e.target,r=n.getState();if(r===k.LOADED||r===k.ERROR||r===k.EMPTY){r!==k.ERROR&&n.removeEventListener(A.CHANGE,this.boundHandleTileChange_);let i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let r=0,i,o,s;for(;this.tilesLoading_<e&&r<n&&this.getCount()>0;)o=this.dequeue()[0],s=o.getKey(),i=o.getState(),i===k.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,o.load())}},UI=i_;function BI(t,e,n,r,i){if(!t||!(n in t.wantedTiles))return ql;if(!t.wantedTiles[n][e.getKey()])return ql;let o=t.viewState.center,s=r[0]-o[0],a=r[1]-o[1];return 65536*Math.log(i)+Math.sqrt(s*s+a*a)/i}var o_=class extends We{constructor(e){super();let n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Il(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Il(this.element);for(let n=0,r=this.listenerKeys.length;n<r;++n)se(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Fn&&this.listenerKeys.push(X(e,vr.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}},zs=o_;var s_=class extends zs{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);let n=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:n+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"\u203A",s=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;let a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=i):this.label_=a;let l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(A.CLICK,this.handleClick_.bind(this),!1);let u=n+" "+vi+" "+Ps+(this.collapsed_&&this.collapsible_?" "+Om:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){let n=Array.from(new Set(this.getMap().getAllLayers().flatMap(i=>i.getAttributions(e)))),r=!this.getMap().getAllLayers().some(i=>i.getSource()&&i.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(r),n}updateElement_(e){return wh(this,null,function*(){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let n=yield Promise.all(this.collectSourceAttributions_(e).map(i=>bD(()=>i))),r=n.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!yt(n,this.renderedAttributions_)){Sx(this.ulElement_);for(let i=0,o=n.length;i<o;++i){let s=document.createElement("li");s.innerHTML=n[i],this.ulElement_.appendChild(s)}this.renderedAttributions_=n}})}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Om),this.collapsed_?xm(this.collapseLabel_,this.label_):xm(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},GI=s_;var a_=class extends zs{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});let n=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"\u21E7",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));let o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=n+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(A.CLICK,this.handleClick_.bind(this),!1);let a=n+" "+vi+" "+Ps,l=this.element;l.className=a,l.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Sl)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let n=this.getMap().getView();if(!n)return;let r=n.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:_n}):n.setRotation(0))}render(e){let n=e.frameState;if(!n)return;let r=n.viewState.rotation;if(r!=this.rotation_){let i="rotate("+r+"rad)";if(this.autoHide_){let o=this.element.classList.contains(Sl);!o&&r===0?this.element.classList.add(Sl):o&&r!==0&&this.element.classList.remove(Sl)}this.label_.style.transform=i}this.rotation_=r}},HI=a_;var l_=class extends zs{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});let n=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"\u2013",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof s=="string"?document.createTextNode(s):s),c.addEventListener(A.CLICK,this.handleClick_.bind(this,r),!1);let d=document.createElement("button");d.className=o,d.setAttribute("type","button"),d.title=u,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(A.CLICK,this.handleClick_.bind(this,-r),!1);let h=n+" "+vi+" "+Ps,f=this.element;f.className=h,f.appendChild(c),f.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){let r=this.getMap().getView();if(!r)return;let i=r.getZoom();if(i!==void 0){let o=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:o,duration:this.duration_,easing:_n})):r.setZoom(o)}}},$I=l_;function zI(t){t=t||{};let e=new It;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new $I(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new HI(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new GI(t.attributionOptions)),e}var Yl={ACTIVE:"active"};var u_=class extends We{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Yl.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Yl.ACTIVE,e)}setMap(e){this.map_=e}};function WI(t,e,n){let r=t.getCenterInternal();if(r){let i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:Xx,center:t.getConstrainedCenter(i)})}}function Ws(t,e,n,r){let i=t.getZoom();if(i===void 0)return;let o=t.getConstrainedZoom(i+e),s=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:n,duration:r!==void 0?r:250,easing:_n})}var Cr=u_;var c_=class extends Cr{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==ce.DBLCLICK){let r=e.originalEvent,i=e.map,o=e.coordinate,s=r.shiftKey?-this.delta_:this.delta_,a=i.getView();Ws(a,s,o,this.duration_),r.preventDefault(),n=!0}return!n}},qI=c_;var d_=class extends Cr{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==ce.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==ce.POINTERUP){let r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==ce.POINTERDOWN){let r=this.handleDownEvent(e);this.handlingDownUpSequence=r,n=this.stopDown(r)}else e.type==ce.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function qs(t){let e=t.length,n=0,r=0;for(let i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return{clientX:n/e,clientY:r/e}}var Cn=d_;function Xl(t){let e=arguments;return function(n){let r=!0;for(let i=0,o=e.length;i<o&&(r=r&&e[i](n),!!r);++i);return r}}var YI=function(t){let e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},DF=function(t){let e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)},Xd=function(t){return t.map.getTargetElement().hasAttribute("tabindex")?DF(t):!0},Zl=Ln;var Zd=function(t){let e=t.originalEvent;return e.button==0&&!(bx&&Em&&e.ctrlKey)},XI=pn;var Ys=function(t){let e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};var ZI=function(t){let e=t.originalEvent;return Em?e.metaKey:e.ctrlKey},Kd=function(t){let e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Qd=function(t){let e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},Jd=function(t){let e=t.originalEvent;return $(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"};var KI=function(t){let e=t.originalEvent;return $(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};var h_=class extends Cn{constructor(e){super({stopDown:pn}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let n=e.condition?e.condition:Xl(Ys,KI);this.condition_=e.onFocusOnly?Xl(Xd,n):n,this.noKinetic_=!1}handleDragEvent(e){let n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());let r=this.targetPointers,i=n.getEventPixel(qs(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){let o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();zD(o,a.getResolution()),Rs(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){let n=e.map,r=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let i=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=r.getCenterInternal(),a=n.getPixelFromCoordinateInternal(s),l=n.getCoordinateFromPixelInternal([a[0]-i*Math.cos(o),a[1]-i*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:_n})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){let r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},QI=h_;var f_=class extends Cn{constructor(e){e=e||{},super({stopDown:pn}),this.condition_=e.condition?e.condition:YI,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Jd(e))return;let n=e.map,r=n.getView();if(r.getConstraints().rotation===ks)return;let i=n.getSize(),o=e.pixel,s=Math.atan2(i[1]/2-o[1],o[0]-i[0]/2);if(this.lastAngle_!==void 0){let a=s-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return Jd(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Jd(e)&&Zd(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}},JI=f_;var p_=class extends vs{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let e=this.startPixel_,n=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],n[0])+r,i.top=Math.min(e[1],n[1])+r,i.width=Math.abs(n[0]-e[0])+r,i.height=Math.abs(n[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){let e=this.startPixel_,n=this.endPixel_,i=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new tn([i])}getGeometry(){return this.geometry_}},eb=p_;var eh={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},Kl=class extends ze{constructor(e,n,r){super(e),this.coordinate=n,this.mapBrowserEvent=r}},g_=class extends Cn{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new eb(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Zd,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,r){let i=r[0]-n[0],o=r[1]-n[1];return i*i+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Kl(eh.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);let n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new Kl(n?eh.BOXEND:eh.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Kl(eh.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}},tb=g_;var m_=class extends tb{constructor(e){e=e||{};let n=e.condition?e.condition:Kd;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){let r=this.getMap().getView(),i=this.getGeometry();if(this.out_){let o=r.rotatedExtentForGeometry(i),s=r.getResolutionForExtentInternal(o),a=r.getResolution()/s;i=i.clone(),i.scale(a*a)}r.fitInternal(i,{duration:this.duration_,easing:_n})}},nb=m_;var Si={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};var y_=class extends Cr{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return Ys(n)&&Qd(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==A.KEYDOWN){let r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==Si.DOWN||i==Si.LEFT||i==Si.RIGHT||i==Si.UP)){let s=e.map.getView(),a=s.getResolution()*this.pixelDelta_,l=0,u=0;i==Si.DOWN?u=-a:i==Si.LEFT?l=-a:i==Si.RIGHT?l=a:u=a;let c=[l,u];Rs(c,s.getRotation()),WI(s,c,this.duration_),r.preventDefault(),n=!0}}return!n}},rb=y_;var __=class extends Cr{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!ZI(n)&&Qd(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==A.KEYDOWN||e.type==A.KEYPRESS){let r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){let o=e.map,s=i==="+"?this.delta_:-this.delta_,a=o.getView();Ws(a,s,void 0,this.duration_),r.preventDefault(),n=!0}}return!n}},ib=__;var v_=class extends Cr{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;let n=e.condition?e.condition:Zl;this.condition_=e.onFocusOnly?Xl(Xd,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==A.WHEEL)return!0;let r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let o;if(e.type==A.WHEEL&&(o=i.deltaY,Ix&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=Dd),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),o===0)return!1;this.lastDelta_=o;let s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");let a=r.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=o;let l=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){let n=e.getView();n.getAnimating()&&n.cancelAnimations();let r=-ye(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),Ws(n,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},ob=v_;var C_=class extends Cn{constructor(e){e=e||{};let n=e;n.stopDown||(n.stopDown=pn),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0,r=this.targetPointers[0],i=this.targetPointers[1],o=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){let l=o-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=o;let s=e.map,a=s.getView();a.getConstraints().rotation!==ks&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(qs(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){let n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}},sb=C_;var E_=class extends Cn{constructor(e){e=e||{};let n=e;n.stopDown||(n.stopDown=pn),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1,r=this.targetPointers[0],i=this.targetPointers[1],o=r.clientX-i.clientX,s=r.clientY-i.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;let l=e.map,u=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(qs(this.targetPointers))),l.render(),u.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){let r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){let n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}},ab=E_;function th(t){t=t||{};let e=new It,n=new LI(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new JI),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new qI({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new QI({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new sb),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new ab({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new rb),e.push(new ib({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new ob({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new nb({duration:t.zoomDuration})),e}function lb(t){if(t instanceof xo){t.setMapInternal(null);return}t instanceof zl&&t.getLayers().forEach(lb)}function ub(t,e){if(t instanceof xo){t.setMapInternal(e);return}if(t instanceof zl){let n=t.getLayers().getArray();for(let r=0,i=n.length;r<i;++r)ub(n[r],e)}}var w_=class extends We{constructor(e){super(),e=e||{},this.on,this.once,this.un;let n=xF(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Dd,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ot(),this.pixelToCoordinateTransform_=ot(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||zI(),this.interactions=n.interactions||th({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new UI(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(mt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(mt.VIEW,this.handleViewChanged_),this.addChangeListener(mt.SIZE,this.handleSizeChanged_),this.addChangeListener(mt.TARGET,this.handleTargetChanged_),this.setProperties(n.values);let r=this;e.view&&!(e.view instanceof Ht)&&e.view.then(function(i){r.setView(new Ht(i))}),this.controls.addEventListener(rt.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(rt.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(rt.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(rt.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(rt.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(rt.REMOVE,i=>{let o=i.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){ub(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){let n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,r){if(!this.frameState_||!this.renderer_)return;let i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};let o=r.hitTolerance!==void 0?r.hitTolerance:0,s=r.layerFilter!==void 0?r.layerFilter:Ln,a=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,o,a,n,null,s,null)}getFeaturesAtPixel(e,n){let r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},n),r}getAllLayers(){let e=[];function n(r){r.forEach(function(i){i instanceof zl?n(i.getLayers()):e.push(i)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;let r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};let i=n.layerFilter!==void 0?n.layerFilter:Ln,o=n.hitTolerance!==void 0?n.hitTolerance:0,s=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,o,s,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){let r=this.viewport_.getBoundingClientRect(),i=this.getSize(),o=r.width/i[0],s=r.height/i[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-r.left)/o,(a.clientY-r.top)/s]}getTarget(){return this.get(mt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return cl(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){let n=this.frameState_;return n?ke(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){let n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(mt.LAYERGROUP)}setLayers(e){let n=this.getLayerGroup();if(e instanceof It){n.setLayers(e);return}let r=n.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let e=this.getLayerGroup().getLayerStatesArray();for(let n=0,r=e.length;n<r;++n){let i=e[n];if(!i.visible)continue;let o=i.layer.getRenderer();if(o&&!o.ready)return!0;let s=i.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){let n=kt(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){let n=this.frameState_;return n?ke(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(mt.SIZE)}getView(){return this.get(mt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,r,i){return BI(this.frameState_,e,n,r,i)}handleBrowserEvent(e,n){n=n||e.type;let r=new vn(n,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;let n=e.originalEvent,r=n.type;if(r===Wl.POINTERDOWN||r===A.WHEEL||r===A.KEYDOWN){let i=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():i,s=n.target;if(this.overlayContainerStopEvent_.contains(s)||!(o===i?i.documentElement:o).contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){let i=this.getInteractions().getArray().slice();for(let o=i.length-1;o>=0;o--){let s=i[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){let e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let i=this.maxTilesLoading_,o=i;if(e){let s=e.viewHints;if(s[tt.ANIMATING]||s[tt.INTERACTING]){let a=Date.now()-e.time>8;i=a?0:8,o=a?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(pt.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(pt.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new bi(vr.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new bi(vr.LOADSTART,this,e))));let r=this.postRenderFunctions_;for(let i=0,o=r.length;i<o;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)se(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(A.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(A.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Il(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);let r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}let e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new kI(this)),this.mapBrowserEventHandler_=new VI(this,this.moveTolerance_);for(let o in ce)this.mapBrowserEventHandler_.addEventListener(ce[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(A.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(A.WHEEL,this.boundHandleBrowserEvent_,Id?{passive:!1}:!1);let r=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[X(r,A.KEYDOWN,this.handleBrowserEvent,this),X(r,A.KEYPRESS,this.handleBrowserEvent,this)];let i=n.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(se(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(se(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=X(e,Pn.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=X(e,A.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(se),this.layerGroupPropertyListenerKeys_=null);let e=this.getLayerGroup();e&&(this.handleLayerAdd_(new zn("addlayer",e)),this.layerGroupPropertyListenerKeys_=[X(e,Pn.PROPERTYCHANGE,this.render,this),X(e,A.CHANGE,this.render,this),X(e,"addlayer",this.handleLayerAdd_,this),X(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){let e=this.getLayerGroup().getLayerStatesArray();for(let n=0,r=e.length;n<r;++n){let i=e[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){lb(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){let n=this.getSize(),r=this.getView(),i=this.frameState_,o=null;if(n!==void 0&&Rm(n)&&r&&r.isDef()){let s=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:ol(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:J(this),renderTargets:{}},a.nextCenter&&a.nextResolution){let l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=ol(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),i&&(!this.previousExtent_||!ci(this.previousExtent_)&&!Lr(o.extent,this.previousExtent_))&&(this.dispatchEvent(new bi(vr.MOVESTART,this,i)),this.previousExtent_=Pr(this.previousExtent_)),this.previousExtent_&&!o.viewHints[tt.ANIMATING]&&!o.viewHints[tt.INTERACTING]&&!Lr(o.extent,this.previousExtent_)&&(this.dispatchEvent(new bi(vr.MOVEEND,this,o)),rd(o.extent,this.previousExtent_))),this.dispatchEvent(new bi(vr.POSTRENDER,this,o)),this.renderComplete_=this.hasListener(vr.LOADSTART)||this.hasListener(vr.LOADEND)||this.hasListener(pt.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){let n=this.getLayerGroup();n&&this.handleLayerRemove_(new zn("removelayer",n)),this.set(mt.LAYERGROUP,e)}setSize(e){this.set(mt.SIZE,e)}setTarget(e){this.set(mt.TARGET,e)}setView(e){if(!e||e instanceof Ht){this.set(mt.VIEW,e);return}this.set(mt.VIEW,new Ht);let n=this;e.then(function(r){n.setView(new Ht(r))})}updateSize(){let e=this.getTargetElement(),n;if(e){let i=getComputedStyle(e),o=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(o)&&!isNaN(s)&&(n=[o,s],!Rm(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&cd("No map visible because the map container's width or height are 0."))}let r=this.getSize();n&&(!r||!yt(n,r))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){let n=this.getView();n&&n.setViewportSize(e)}};function xF(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);let n={},r=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new zl({layers:t.layers});n[mt.LAYERGROUP]=r,n[mt.TARGET]=t.target,n[mt.VIEW]=t.view instanceof Ht?t.view:new Ht;let i;t.controls!==void 0&&(Array.isArray(t.controls)?i=new It(t.controls.slice()):($(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=t.controls));let o;t.interactions!==void 0&&(Array.isArray(t.interactions)?o=new It(t.interactions.slice()):($(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=t.interactions));let s;return t.overlays!==void 0?Array.isArray(t.overlays)?s=new It(t.overlays.slice()):($(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=t.overlays):s=new It,{controls:i,interactions:o,keyboardEventTarget:e,overlays:s,values:n}}var D_=w_;var x_=class{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){let r=this.entries_[e];return $(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){let n=this.entries_[e];return $(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){let e=new Array(this.count_),n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.key_;return e}getValues(){let e=new Array(this.count_),n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){let e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){$(!(e in this.entries_),"Tried to set a value for a key that is used already");let r={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}},cb=x_;function I_(t,e,n,r){return r!==void 0?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function Io(t,e,n){return t+"/"+e+"/"+n}function nh(t){return Io(t[0],t[1],t[2])}function db(t){return t.split("/").map(Number)}function hb(t){return(t[1]<<t[0])+t[2]}function fb(t,e){let n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;let o=e.getFullTileRange(n);return o?o.containsXY(r,i):!0}var b_=class extends cb{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;let e=this.peekFirstKey(),r=db(e)[0];this.forEach(i=>{i.tileCoord[0]!==r&&(this.remove(nh(i.tileCoord)),i.release())})}},rh=b_;var ih=class{constructor(e,n,r,i){this.minX=e,this.maxX=n,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}};function bo(t,e,n,r,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new ih(t,e,n,r)}var oh=ih;var S_=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=it,this.supportedMediaTypes=null}getReadOptions(e,n){if(n){let r=n.dataProjection?Oe(n.dataProjection):this.readProjection(e);n.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Oe(r),r.setWorldExtent(n.extent)),n={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return j()}readFeature(e,n){return j()}readFeatures(e,n){return j()}readGeometry(e,n){return j()}readProjection(e){return j()}writeFeature(e,n){return j()}writeFeatures(e,n){return j()}writeGeometry(e,n){return j()}},pb=S_;function T_(t,e,n){let r=n?Oe(n.featureProjection):null,i=n?Oe(n.dataProjection):null,o=t;if(r&&i&&!ur(r,i)){e&&(o=t.clone());let s=e?r:i,a=e?i:r;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(Vr(s,a))}if(e&&n&&n.decimals!==void 0){let s=Math.pow(10,n.decimals),a=function(l){for(let u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*s)/s;return l};o===t&&(o=t.clone()),o.applyTransform(a)}return o}var M_=class extends pb{constructor(){super()}getType(){return"text"}readFeature(e,n){return this.readFeatureFromText(sh(e),this.adaptOptions(n))}readFeatureFromText(e,n){return j()}readFeatures(e,n){return this.readFeaturesFromText(sh(e),this.adaptOptions(n))}readFeaturesFromText(e,n){return j()}readGeometry(e,n){return this.readGeometryFromText(sh(e),this.adaptOptions(n))}readGeometryFromText(e,n){return j()}readProjection(e){return this.readProjectionFromText(sh(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,n){return this.writeFeatureText(e,this.adaptOptions(n))}writeFeatureText(e,n){return j()}writeFeatures(e,n){return this.writeFeaturesText(e,this.adaptOptions(n))}writeFeaturesText(e,n){return j()}writeGeometry(e,n){return this.writeGeometryText(e,this.adaptOptions(n))}writeGeometryText(e,n){return j()}};function sh(t){return typeof t=="string"?t:""}var gb=M_;var IF={POINT:ft,LINESTRING:cr,POLYGON:tn,MULTIPOINT:$s,MULTILINESTRING:Bl,MULTIPOLYGON:Gl},mb="EMPTY",yb="Z",_b="M",bF="ZM",Ce={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},SF={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"},A_=class{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,n){return n=n!==void 0?n:!1,e>="0"&&e<="9"||e=="."&&!n}isWhiteSpace_(e){return e==" "||e=="	"||e=="\r"||e==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){let e=this.nextChar_(),n=this.index_,r=e,i;if(e=="(")i=Ce.LEFT_PAREN;else if(e==",")i=Ce.COMMA;else if(e==")")i=Ce.RIGHT_PAREN;else if(this.isNumeric_(e)||e=="-")i=Ce.NUMBER,r=this.readNumber_();else if(this.isAlpha_(e))i=Ce.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(e==="")i=Ce.EOF;else throw new Error("Unexpected character: "+e)}return{position:n,value:r,type:i}}readNumber_(){let e,n=this.index_,r=!1,i=!1;do e=="."?r=!0:(e=="e"||e=="E")&&(i=!0),e=this.nextChar_();while(this.isNumeric_(e,r)||!i&&(e=="e"||e=="E")||i&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(n,this.index_--))}readText_(){let e,n=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(n,this.index_--).toUpperCase()}},R_=class{constructor(e){this.lexer_=e,this.token_={position:0,type:Ce.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){let n=this.isTokenType(e);return n&&this.consume_(),n}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let e="XY",n=this.token_;if(this.isTokenType(Ce.TEXT)){let r=n.value;r===yb?e="XYZ":r===_b?e="XYM":r===bF&&(e="XYZM"),e!=="XY"&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(Ce.LEFT_PAREN)){let e=[];do e.push(this.parseGeometry_());while(this.match(Ce.COMMA));if(this.match(Ce.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(Ce.LEFT_PAREN)){let e=this.parsePoint_();if(this.match(Ce.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(Ce.LEFT_PAREN)){let e=this.parsePointList_();if(this.match(Ce.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(Ce.LEFT_PAREN)){let e=this.parseLineStringTextList_();if(this.match(Ce.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(Ce.LEFT_PAREN)){let e;if(this.token_.type==Ce.LEFT_PAREN?e=this.parsePointTextList_():e=this.parsePointList_(),this.match(Ce.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(Ce.LEFT_PAREN)){let e=this.parseLineStringTextList_();if(this.match(Ce.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(Ce.LEFT_PAREN)){let e=this.parsePolygonTextList_();if(this.match(Ce.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePoint_(){let e=[],n=this.layout_.length;for(let r=0;r<n;++r){let i=this.token_;if(this.match(Ce.NUMBER))e.push(i.value);else break}if(e.length==n)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){let e=[this.parsePoint_()];for(;this.match(Ce.COMMA);)e.push(this.parsePoint_());return e}parsePointTextList_(){let e=[this.parsePointText_()];for(;this.match(Ce.COMMA);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){let e=[this.parseLineStringText_()];for(;this.match(Ce.COMMA);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){let e=[this.parsePolygonText_()];for(;this.match(Ce.COMMA);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){let e=this.isTokenType(Ce.TEXT)&&this.token_.value==mb;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){let e=this.token_;if(this.match(Ce.TEXT)){let n=e.value;this.layout_=this.parseGeometryLayout_();let r=this.isEmptyGeometry_();if(n=="GEOMETRYCOLLECTION"){if(r)return new Hs([]);let s=this.parseGeometryCollectionText_();return new Hs(s)}let i=IF[n];if(!i)throw new Error("Invalid geometry type: "+n);let o;if(r)n=="POINT"?o=[NaN,NaN]:o=[];else switch(n){case"POINT":{o=this.parsePointText_();break}case"LINESTRING":{o=this.parseLineStringText_();break}case"POLYGON":{o=this.parsePolygonText_();break}case"MULTIPOINT":{o=this.parseMultiPointText_();break}case"MULTILINESTRING":{o=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{o=this.parseMultiPolygonText_();break}default:break}return new i(o,this.layout_)}throw new Error(this.formatErrorMessage_())}},N_=class extends gb{constructor(e){super(),e=e||{},this.splitCollection_=e.splitCollection!==void 0?e.splitCollection:!1}parse_(e){let n=new A_(e);return new R_(n).parse()}readFeatureFromText(e,n){let r=this.readGeometryFromText(e,n),i=new it;return i.setGeometry(r),i}readFeaturesFromText(e,n){let r=[],i=this.readGeometryFromText(e,n);this.splitCollection_&&i.getType()=="GeometryCollection"?r=i.getGeometriesArray():r=[i];let o=[];for(let s=0,a=r.length;s<a;++s){let l=new it;l.setGeometry(r[s]),o.push(l)}return o}readGeometryFromText(e,n){let r=this.parse_(e);return T_(r,!1,n)}writeFeatureText(e,n){let r=e.getGeometry();return r?this.writeGeometryText(r,n):""}writeFeaturesText(e,n){if(e.length==1)return this.writeFeatureText(e[0],n);let r=[];for(let o=0,s=e.length;o<s;++o)r.push(e[o].getGeometry());let i=new Hs(r);return this.writeGeometryText(i,n)}writeGeometryText(e,n){return Eb(T_(e,!0,n))}};function vb(t){let e=t.getCoordinates();return e.length===0?"":e.join(" ")}function TF(t){let e=[],n=t.getPoints();for(let r=0,i=n.length;r<i;++r)e.push("("+vb(n[r])+")");return e.join(",")}function MF(t){let e=[],n=t.getGeometries();for(let r=0,i=n.length;r<i;++r)e.push(Eb(n[r]));return e.join(",")}function O_(t){let e=t.getCoordinates(),n=[];for(let r=0,i=e.length;r<i;++r)n.push(e[r].join(" "));return n.join(",")}function AF(t){let e=[],n=t.getLineStrings();for(let r=0,i=n.length;r<i;++r)e.push("("+O_(n[r])+")");return e.join(",")}function Cb(t){let e=[],n=t.getLinearRings();for(let r=0,i=n.length;r<i;++r)e.push("("+O_(n[r])+")");return e.join(",")}function RF(t){let e=[],n=t.getPolygons();for(let r=0,i=n.length;r<i;++r)e.push("("+Cb(n[r])+")");return e.join(",")}function NF(t){let e=t.getLayout(),n="";return(e==="XYZ"||e==="XYZM")&&(n+=yb),(e==="XYM"||e==="XYZM")&&(n+=_b),n}var OF={Point:vb,LineString:O_,Polygon:Cb,MultiPoint:TF,MultiLineString:AF,MultiPolygon:RF,GeometryCollection:MF};function Eb(t){let e=t.getType(),n=OF[e],r=n(t),i=SF[e];if(typeof t.getFlatCoordinates=="function"){let o=NF(t);o.length>0&&(i+=" "+o)}return r.length===0?i+" "+mb:i+"("+r+")"}var P_=N_;var ah={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},Xs=class extends ze{constructor(e,n){super(e),this.feature=n}};function PF(t,e){let n=[];for(let r=0;r<e.length;++r){let o=e[r].getGeometry();wb(t,o,n)}return n}function lh(t,e){return Ft(t[0],t[1],e[0],e[1])}function Zs(t,e){let n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function uh(t,e,n){let r,i;e<n?(r=e,i=n):(r=n,i=e);let o=Math.ceil(r),s=Math.floor(i);if(o>s){let l=Ks(t,r),u=Ks(t,i);return lh(l,u)}let a=0;if(r<o){let l=Ks(t,r),u=Zs(t,o);a+=lh(l,u)}if(s<i){let l=Zs(t,s),u=Ks(t,i);a+=lh(l,u)}for(let l=o;l<s-1;++l){let u=Zs(t,l),c=Zs(t,l+1);a+=lh(u,c)}return a}function wb(t,e,n){if(e instanceof cr){ch(t,e.getCoordinates(),!1,n);return}if(e instanceof Bl){let r=e.getCoordinates();for(let i=0,o=r.length;i<o;++i)ch(t,r[i],!1,n);return}if(e instanceof tn){let r=e.getCoordinates();for(let i=0,o=r.length;i<o;++i)ch(t,r[i],!0,n);return}if(e instanceof Gl){let r=e.getCoordinates();for(let i=0,o=r.length;i<o;++i){let s=r[i];for(let a=0,l=s.length;a<l;++a)ch(t,s[a],!0,n)}return}if(e instanceof Hs){let r=e.getGeometries();for(let i=0;i<r.length;++i)wb(t,r[i],n);return}}var L_={index:-1,endIndex:NaN};function LF(t,e,n,r){let i=t[0],o=t[1],s=1/0,a=-1,l=NaN;for(let d=0;d<e.targets.length;++d){let h=e.targets[d],f=h.coordinates,g=1/0,y;for(let p=0;p<f.length-1;++p){let m=f[p],_=f[p+1],C=Db(i,o,m,_);C.squaredDistance<g&&(g=C.squaredDistance,y=p+C.along)}g<s&&(s=g,h.ring&&e.targetIndex===d&&(h.endIndex>h.startIndex?y<h.startIndex&&(y+=f.length):h.endIndex<h.startIndex&&y>h.startIndex&&(y-=f.length)),l=y,a=d)}let u=e.targets[a],c=u.ring;if(e.targetIndex===a&&c){let d=Ks(u.coordinates,l),h=n.getPixelFromCoordinate(d);Kg(h,e.startPx)>r&&(c=!1)}if(c){let d=u.coordinates,h=d.length,f=u.startIndex,g=l;if(f<g){let y=uh(d,f,g);uh(d,f,g-h)<y&&(l-=h)}else{let y=uh(d,f,g);uh(d,f,g+h)<y&&(l+=h)}}return L_.index=a,L_.endIndex=l,L_}function ch(t,e,n,r){let i=t[0],o=t[1];for(let s=0,a=e.length-1;s<a;++s){let l=e[s],u=e[s+1],c=Db(i,o,l,u);if(c.squaredDistance===0){let d=s+c.along;r.push({coordinates:e,ring:n,startIndex:d,endIndex:d});return}}}var F_={along:0,squaredDistance:0};function Db(t,e,n,r){let i=n[0],o=n[1],s=r[0],a=r[1],l=s-i,u=a-o,c=0,d=i,h=o;return(l!==0||u!==0)&&(c=ye(((t-i)*l+(e-o)*u)/(l*l+u*u),0,1),d+=l*c,h+=u*c),F_.along=c,F_.squaredDistance=hi(Ft(t,e,d,h),10),F_}function Ks(t,e){let n=t.length,r=Math.floor(e),i=e-r;r>=n?r-=n:r<0&&(r+=n);let o=r+1;o>=n&&(o-=n);let s=t[r],a=s[0],l=s[1],u=t[o],c=u[0]-a,d=u[1]-l;return[a+c*i,l+d*i]}var k_=class extends Cn{constructor(e){let n=e;n.stopDown||(n.stopDown=pn),super(n),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=kF(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Ln,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){let i=this.mode_;if(i==="Circle")r=function(o,s,a){let l=s||new RI([NaN,NaN]),u=kt(o[0],a),c=Zg(u,kt(o[o.length-1],a));l.setCenterAndRadius(u,Math.sqrt(c),this.geometryLayout_);let d=jr();return d&&l.transform(a,d),l};else{let o;i==="Point"?o=ft:i==="LineString"?o=cr:i==="Polygon"&&(o=tn),r=function(s,a,l){return a?i==="Polygon"?s[0].length?a.setCoordinates([s[0].concat([s[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(s,this.geometryLayout_):a=new o(s,this.geometryLayout_),a}}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Ul({source:new $l({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:FF(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Ys,this.freehandCondition_,e.freehand?this.freehandCondition_=Zl:this.freehandCondition_=e.freehandCondition?e.freehandCondition:Kd,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(Yl.ACTIVE,this.updateState_)}setTrace(e){let n;e?e===!0?n=Zl:n=e:n=XI,this.traceCondition_=n}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===A.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let n=e.type===ce.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===ce.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===ce.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===ce.POINTERDOWN?r=!1:n&&this.getPointerCount()<2?(r=e.type===ce.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===ce.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===ce.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new vn(ce.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}let n=this.getMap(),r=n.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),i=n.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),o=nl([r,i]),s=this.traceSource_.getFeaturesInExtent(o);if(s.length===0)return;let a=PF(e.coordinate,s);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,n){let r=e.startIndex<=e.endIndex,i=e.startIndex<=n;r===i?r&&n>e.endIndex||!r&&n<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,n):(r&&n<e.endIndex||!r&&n>e.endIndex)&&this.removeTracedCoordinates_(n,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,n))}removeTracedCoordinates_(e,n){if(e===n)return;let r=0;if(e<n){let i=Math.ceil(e),o=Math.floor(n);o===n&&(o-=1),r=o-i+1}else{let i=Math.floor(e),o=Math.ceil(n);o===n&&(o+=1),r=i-o+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,n,r){if(n===r)return;let i=[];if(n<r){let o=Math.ceil(n),s=Math.floor(r);s===r&&(s-=1);for(let a=o;a<=s;++a)i.push(Zs(e.coordinates,a))}else{let o=Math.floor(n),s=Math.ceil(r);s===r&&(s+=1);for(let a=o;a>=s;--a)i.push(Zs(e.coordinates,a))}i.length&&this.appendCoordinates(i)}updateTrace_(e){let n=this.traceState_;if(!n.active||n.targetIndex===-1&&Kg(n.startPx,e.pixel)<this.snapTolerance_)return;let r=LF(e.coordinate,n,this.getMap(),this.snapTolerance_);if(n.targetIndex!==r.index){if(n.targetIndex!==-1){let l=n.targets[n.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}let a=n.targets[r.index];this.addTracedCoordinates_(a,a.startIndex,r.endIndex)}else{let a=n.targets[n.targetIndex];this.addOrRemoveTracedCoordinates_(a,r.endIndex)}n.targetIndex=r.index;let i=n.targets[n.targetIndex];i.endIndex=r.endIndex;let o=Ks(i.coordinates,i.endIndex),s=this.getMap().getPixelFromCoordinate(o);e.coordinate=o,e.pixel=[Math.round(s[0]),Math.round(s[1])]}handleUpEvent(e){let n=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);let r=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){let i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),n=!1}else this.freehand_&&this.abortDrawing()}return!n&&this.stopClick_&&e.preventDefault(),n}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){let n=this.downPx_,r=e.pixel,i=n[0]-r[0],o=n[1]-r[1],s=i*i+o*o;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,n){let r=!1;if(this.sketchFeature_){let i=!1,o=[this.finishCoordinate_],s=this.mode_;if(s==="Point")r=!0;else if(s==="Circle")r=this.sketchCoords_.length===2;else if(s==="LineString")i=!n&&this.sketchCoords_.length>this.minPoints_;else if(s==="Polygon"){let a=this.sketchCoords_;i=a[0].length>this.minPoints_,o=[a[0][0],a[0][a[0].length-2]],n?o=[a[0][0]]:o=[a[0][0],a[0][a[0].length-2]]}if(i){let a=this.getMap();for(let l=0,u=o.length;l<u;l++){let c=o[l],d=a.getPixelFromCoordinate(c),h=e[0]-d[0],f=e[1]-d[1],g=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(h*h+f*f)<=g,r){this.finishCoordinate_=c;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new it(new ft(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new it);let n=e.getLinearRing(0),r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),r.changed()):(r=new cr(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){let n=this.getMap().getView().getProjection(),r=dl(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new it(new cr(this.sketchLineCoords_)));let i=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new it,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new Xs(ah.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){let n=this.getMap(),r=this.sketchFeature_.getGeometry(),i=n.getView().getProjection(),o=dl(this.geometryLayout_),s,a;for(;e.length<o;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(s=this.sketchCoords_[0],a=s[s.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(s=this.sketchCoords_,a=s[s.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){let n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i,o,s=this.mode_;return s==="LineString"||s==="Circle"?(this.finishCoordinate_=e.slice(),o=this.sketchCoords_,o.length>=this.maxPoints_&&(this.freehand_?o.pop():i=!0),o.push(e.slice()),this.geometryFunction_(o,n,r)):s==="Polygon"&&(o=this.sketchCoords_[0],o.length>=this.maxPoints_&&(this.freehand_?o.pop():i=!0),o.push(e.slice()),i&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;let n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i=this.mode_;for(let o=0;o<e;++o){let s;if(i==="LineString"||i==="Circle"){if(s=this.sketchCoords_,s.splice(-2,1),s.length>=2){this.finishCoordinate_=s[s.length-2].slice();let a=this.finishCoordinate_.slice();s[s.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(s,n,r),n.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(n)}else if(i==="Polygon"){s=this.sketchCoords_[0],s.splice(-2,1);let a=this.sketchLine_.getGeometry();if(s.length>=2){let l=s[s.length-2].slice();s[s.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(s),this.geometryFunction_(this.sketchCoords_,n,r)}if(s.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){let e=this.abortDrawing_();if(!e)return null;let n=this.sketchCoords_,r=e.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(n.pop(),this.geometryFunction_(n,r,i)):this.mode_==="Polygon"&&(n[0].pop(),this.geometryFunction_(n,r,i),n=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new $s([n])):this.type_==="MultiLineString"?e.setGeometry(new Bl([n])):this.type_==="MultiPolygon"&&e.setGeometry(new Gl([n])),this.dispatchEvent(new Xs(ah.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;let e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){let e=this.abortDrawing_();e&&this.dispatchEvent(new Xs(ah.DRAWABORT,e))}appendCoordinates(e){let n=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let i;if(n==="LineString"||n==="Circle")i=this.sketchCoords_;else if(n==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&i.shift(),i.pop();for(let s=0;s<e.length;s++)this.addToDrawing_(e[s]);let o=e[e.length-1];this.sketchFeature_=this.addToDrawing_(o),this.modifyDrawing_(o)}extend(e){let r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();let i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new it(new ft(i)),this.updateSketchFeatures_(),this.dispatchEvent(new Xs(ah.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){let e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);let n=this.overlay_.getSource();n.clear(!0),n.addFeatures(e)}updateState_(){let e=this.getMap(),n=this.getActive();(!e||!n)&&this.abortDrawing(),this.overlay_.setMap(n?e:null)}};function FF(){let t=Bx();return function(e,n){return t[e.getGeometry().getType()]}}function kF(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}var xb=k_;var Ql={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var V_=class extends xo{constructor(e){e=e||{};let n=Object.assign({},e);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(Ql.PRELOAD)}setPreload(e){this.set(Ql.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Ql.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Ql.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}},Ib=V_;var VF=10,bb=.25,j_=class{constructor(e,n,r,i,o,s){this.sourceProj_=e,this.targetProj_=n;let a={},l=Vr(this.targetProj_,this.sourceProj_);this.transformInv_=function(_){let C=_[0]+"/"+_[1];return a[C]||(a[C]=l(_)),a[C]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&ie(i)>=ie(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ie(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ie(this.targetProj_.getExtent()):null;let u=en(r),c=po(r),d=fo(r),h=ho(r),f=this.transformInv_(u),g=this.transformInv_(c),y=this.transformInv_(d),p=this.transformInv_(h),m=VF+(s?Math.max(0,Math.ceil(Math.log2(il(r)/(s*s*256*256)))):0);if(this.addQuad_(u,c,d,h,f,g,y,p,m),this.wrapsXInSource_){let _=1/0;this.triangles_.forEach(function(C,v,E){_=Math.min(_,C.source[0][0],C.source[1][0],C.source[2][0])}),this.triangles_.forEach(C=>{if(Math.max(C.source[0][0],C.source[1][0],C.source[2][0])-_>this.sourceWorldWidth_/2){let v=[[C.source[0][0],C.source[0][1]],[C.source[1][0],C.source[1][1]],[C.source[2][0],C.source[2][1]]];v[0][0]-_>this.sourceWorldWidth_/2&&(v[0][0]-=this.sourceWorldWidth_),v[1][0]-_>this.sourceWorldWidth_/2&&(v[1][0]-=this.sourceWorldWidth_),v[2][0]-_>this.sourceWorldWidth_/2&&(v[2][0]-=this.sourceWorldWidth_);let E=Math.min(v[0][0],v[1][0],v[2][0]);Math.max(v[0][0],v[1][0],v[2][0])-E<this.sourceWorldWidth_/2&&(C.source=v)}})}a={}}addTriangle_(e,n,r,i,o,s){this.triangles_.push({source:[i,o,s],target:[e,n,r]})}addQuad_(e,n,r,i,o,s,a,l,u){let c=nl([o,s,a,l]),d=this.sourceWorldWidth_?ie(c)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1,g=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let p=nl([e,n,r,i]);g=ie(p)/this.targetWorldWidth_>bb||g}!f&&this.sourceProj_.isGlobal()&&d&&(g=d>bb||g)}if(!g&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Ae(c,this.maxSourceExtent_))return;let y=0;if(!g&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)g=!0;else if(y=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),y!=1&&y!=2&&y!=4&&y!=8)return}if(u>0){if(!g){let p=[(e[0]+r[0])/2,(e[1]+r[1])/2],m=this.transformInv_(p),_;f?_=(jn(o[0],h)+jn(a[0],h))/2-jn(m[0],h):_=(o[0]+a[0])/2-m[0];let C=(o[1]+a[1])/2-m[1];g=_*_+C*C>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){let p=[(n[0]+r[0])/2,(n[1]+r[1])/2],m=this.transformInv_(p),_=[(i[0]+e[0])/2,(i[1]+e[1])/2],C=this.transformInv_(_);this.addQuad_(e,n,p,_,o,s,m,C,u-1),this.addQuad_(_,p,r,i,C,m,a,l,u-1)}else{let p=[(e[0]+n[0])/2,(e[1]+n[1])/2],m=this.transformInv_(p),_=[(r[0]+i[0])/2,(r[1]+i[1])/2],C=this.transformInv_(_);this.addQuad_(e,p,_,i,o,m,C,l,u-1),this.addQuad_(p,n,r,_,m,s,a,C,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}y&11||this.addTriangle_(e,r,i,o,a,l),y&14||this.addTriangle_(e,r,n,o,a,s),y&&(y&13||this.addTriangle_(n,i,e,s,l,o),y&7||this.addTriangle_(n,i,r,s,l,a))}calculateSourceExtent(){let e=Ge();return this.triangles_.forEach(function(n,r,i){let o=n.source;co(e,o[0]),co(e,o[1]),co(e,o[2])}),e}getTriangles(){return this.triangles_}},Sb=j_;var U_,So=[];function Tb(t,e,n,r,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,i)),t.restore()}function B_(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function jF(){if(U_===void 0){let t=Te(6,6,So);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Tb(t,4,5,4,0),Tb(t,4,5,0,5);let e=t.getImageData(0,0,3,3).data;U_=B_(e,0)||B_(e,4)||B_(e,8),Co(t),So.push(t.canvas)}return U_}function Mb(t,e,n,r){let i=hd(n,e,t),o=tm(e,r,n),s=e.getMetersPerUnit();s!==void 0&&(o*=s);let a=t.getMetersPerUnit();a!==void 0&&(o/=a);let l=t.getExtent();if(!l||Vn(l,i)){let u=tm(t,o,i)/o;isFinite(u)&&u>0&&(o/=u)}return o}function Ab(t,e,n,r){let i=Lt(n),o=Mb(t,e,i,r);return(!isFinite(o)||o<=0)&&Ss(n,function(s){return o=Mb(t,e,s,r),isFinite(o)&&o>0}),o}function Rb(t,e,n,r,i,o,s,a,l,u,c,d,h,f){let g=Te(Math.round(n*t),Math.round(n*e),So);if(d||(g.imageSmoothingEnabled=!1),l.length===0)return g.canvas;g.scale(n,n);function y(E){return Math.round(E*n)/n}g.globalCompositeOperation="lighter";let p=Ge();l.forEach(function(E,w,x){od(p,E.extent)});let m,_=n/r,C=(d?1:1+Math.pow(2,-24))/_;if(!h||l.length!==1||u!==0){if(m=Te(Math.round(ie(p)*_),Math.round(Ne(p)*_),So),d||(m.imageSmoothingEnabled=!1),i&&f){let E=(i[0]-p[0])*_,w=-(i[3]-p[3])*_,x=ie(i)*_,D=Ne(i)*_;m.rect(E,w,x,D),m.clip()}l.forEach(function(E,w,x){let D=(E.extent[0]-p[0])*_,I=-(E.extent[3]-p[3])*_,N=ie(E.extent)*_,T=Ne(E.extent)*_;E.image.width>0&&E.image.height>0&&m.drawImage(E.image,u,u,E.image.width-2*u,E.image.height-2*u,d?D:Math.round(D),d?I:Math.round(I),d?N:Math.round(D+N)-Math.round(D),d?T:Math.round(I+T)-Math.round(I))})}let v=en(s);return a.getTriangles().forEach(function(E,w,x){let D=E.source,I=E.target,N=D[0][0],T=D[0][1],O=D[1][0],ee=D[1][1],Ie=D[2][0],F=D[2][1],L=y((I[0][0]-v[0])/o),P=y(-(I[0][1]-v[1])/o),G=y((I[1][0]-v[0])/o),de=y(-(I[1][1]-v[1])/o),z=y((I[2][0]-v[0])/o),xe=y(-(I[2][1]-v[1])/o),ge=N,Ue=T;N=0,T=0,O-=ge,ee-=Ue,Ie-=ge,F-=Ue;let S=[[O,ee,0,0,G-L],[Ie,F,0,0,z-L],[0,0,O,ee,de-P],[0,0,Ie,F,xe-P]],Pe=GD(S);if(!Pe)return;if(g.save(),g.beginPath(),jF()||!d){g.moveTo(G,de);let Ze=4,St=L-G,En=P-de;for(let Tt=0;Tt<Ze;Tt++)g.lineTo(G+y((Tt+1)*St/Ze),de+y(Tt*En/(Ze-1))),Tt!=Ze-1&&g.lineTo(G+y((Tt+1)*St/Ze),de+y((Tt+1)*En/(Ze-1)));g.lineTo(z,xe)}else g.moveTo(G,de),g.lineTo(L,P),g.lineTo(z,xe);g.clip(),g.transform(Pe[0],Pe[2],Pe[1],Pe[3],L,P),g.translate(p[0]-ge,p[3]-Ue);let Wt;if(m)Wt=m.canvas,g.scale(C,-C);else{let Ze=l[0],St=Ze.extent;Wt=Ze.image,g.scale(ie(St)/Wt.width,-Ne(St)/Wt.height)}g.drawImage(Wt,0,0),g.restore()}),m&&(Co(m),So.push(m.canvas)),c&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,a.getTriangles().forEach(function(E,w,x){let D=E.target,I=(D[0][0]-v[0])/o,N=-(D[0][1]-v[1])/o,T=(D[1][0]-v[0])/o,O=-(D[1][1]-v[1])/o,ee=(D[2][0]-v[0])/o,Ie=-(D[2][1]-v[1])/o;g.beginPath(),g.moveTo(T,O),g.lineTo(I,N),g.lineTo(ee,Ie),g.closePath(),g.stroke()}),g.restore()),g.canvas}var G_=class extends qd{constructor(e,n,r,i,o,s,a,l,u,c,d,h){super(o,k.IDLE,h),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=i,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let f=i.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent(),y=this.sourceTileGrid_.getExtent(),p=g?ui(f,g):f;if(il(p)===0){this.state=k.EMPTY;return}let m=e.getExtent();m&&(y?y=ui(y,m):y=m);let _=i.getResolution(this.wrappedTileCoord_[0]),C=Ab(e,r,p,_);if(!isFinite(C)||C<=0){this.state=k.EMPTY;return}let v=c!==void 0?c:.5;if(this.triangulation_=new Sb(e,r,p,y,C*v,_),this.triangulation_.getTriangles().length===0){this.state=k.EMPTY;return}this.sourceZ_=n.getZForResolution(C);let E=this.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(E[1]=ye(E[1],y[1],y[3]),E[3]=ye(E[3],y[1],y[3])):E=ui(E,y)),!il(E))this.state=k.EMPTY;else{let w=n.getTileRangeForExtentAndZ(E,this.sourceZ_);for(let x=w.minX;x<=w.maxX;x++)for(let D=w.minY;D<=w.maxY;D++){let I=u(this.sourceZ_,x,D,a);I&&this.sourceTiles_.push(I)}this.sourceTiles_.length===0&&(this.state=k.EMPTY)}}getImage(){return this.canvas_}reproject_(){let e=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==k.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=k.ERROR;else{let n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),i=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],s=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Rb(i,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=k.LOADED}this.changed()}load(){if(this.state==k.IDLE){this.state=k.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{let r=n.getState();if(r==k.IDLE||r==k.LOADING){e++;let i=X(n,A.CHANGE,function(o){let s=n.getState();(s==k.LOADED||s==k.ERROR||s==k.EMPTY)&&(se(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,r,i){n.getState()==k.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(se),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Co(this.canvas_.getContext("2d")),So.push(this.canvas_),this.canvas_=null),super.release()}},Jl=G_;var H_=class extends Hd{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Ge(),this.tmpTileRange_=new oh(0,0,0,0)}isDrawableTile(e){let n=this.getLayer(),r=e.getState(),i=n.getUseInterimTilesOnError();return r==k.LOADED||r==k.EMPTY||r==k.ERROR&&!i}getTile(e,n,r,i){let o=i.pixelRatio,s=i.viewState.projection,a=this.getLayer(),u=a.getSource().getTile(e,n,r,o,s);return u.getState()==k.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(e){let n=this.frameState;if(!n)return null;let r=this.getLayer(),i=ke(n.pixelToCoordinateTransform,e.slice()),o=r.getExtent();if(o&&!Vn(o,i))return null;let s=n.pixelRatio,a=n.viewState.projection,l=n.viewState,u=r.getRenderSource(),c=u.getTileGridForProjection(l.projection),d=u.getTilePixelRatio(n.pixelRatio);for(let h=c.getZForResolution(l.resolution);h>=c.getMinZoom();--h){let f=c.getTileCoordForCoordAndZ(i,h),g=u.getTile(h,f[1],f[2],s,a);if(!(g instanceof Yd||g instanceof Jl)||g instanceof Jl&&g.getState()===k.EMPTY)return null;if(g.getState()!==k.LOADED)continue;let y=c.getOrigin(h),p=Ye(c.getTileSize(h)),m=c.getResolution(h),_=Math.floor(d*((i[0]-y[0])/m-f[1]*p[0])),C=Math.floor(d*((y[1]-i[1])/m-f[2]*p[1])),v=Math.round(d*u.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),_+v,C+v)}return null}loadedTileCallback(e,n,r){return this.isDrawableTile(r)?super.loadedTileCallback(e,n,r):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,n){let r=e.layerStatesArray[e.layerIndex],i=e.viewState,o=i.projection,s=i.resolution,a=i.center,l=i.rotation,u=e.pixelRatio,c=this.getLayer(),d=c.getSource(),h=d.getRevision(),f=d.getTileGridForProjection(o),g=f.getZForResolution(s,d.zDirection),y=f.getResolution(g),p=e.extent,m=e.viewState.resolution,_=d.getTilePixelRatio(u),C=Math.round(ie(p)/m*u),v=Math.round(Ne(p)/m*u),E=r.extent&&Un(r.extent,o);E&&(p=ui(p,Un(r.extent,o)));let w=y*C/2/_,x=y*v/2/_,D=[a[0]-w,a[1]-x,a[0]+w,a[1]+x],I=f.getTileRangeForExtentAndZ(p,g),N={};N[g]={};let T=this.createLoadedTileFinder(d,o,N),O=this.tmpExtent,ee=this.tmpTileRange_;this.newTiles_=!1;let Ie=l?sd(i.center,m,l,e.size):void 0;for(let Ue=I.minX;Ue<=I.maxX;++Ue)for(let S=I.minY;S<=I.maxY;++S){if(l&&!f.tileCoordIntersectsViewport([g,Ue,S],Ie))continue;let Pe=this.getTile(g,Ue,S,e);if(this.isDrawableTile(Pe)){let St=J(this);if(Pe.getState()==k.LOADED){N[g][Pe.tileCoord.toString()]=Pe;let En=Pe.inTransition(St);En&&r.opacity!==1&&(Pe.endTransition(St),En=!1),!this.newTiles_&&(En||!this.renderedTiles.includes(Pe))&&(this.newTiles_=!0)}if(Pe.getAlpha(St,e.time)===1)continue}let Wt=f.getTileCoordChildTileRange(Pe.tileCoord,ee,O),Ze=!1;Wt&&(Ze=T(g+1,Wt)),Ze||f.forEachTileCoordParentTileRange(Pe.tileCoord,T,ee,O)}let F=y/s*u/_;Je(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,l,-C/2,-v/2);let L=td(this.pixelTransform);this.useContainer(n,L,this.getBackground(e));let P=this.getRenderContext(e),G=this.context.canvas;xs(this.inversePixelTransform,this.pixelTransform),Je(this.tempTransform,C/2,v/2,F,F,0,-C/2,-v/2),G.width!=C||G.height!=v?(G.width=C,G.height=v):this.containerReused||P.clearRect(0,0,C,v),E&&this.clipUnrotated(P,e,E),d.getInterpolate()||(P.imageSmoothingEnabled=!1),this.preRender(P,e),this.renderedTiles.length=0;let de=Object.keys(N).map(Number);de.sort(Ot);let z,xe,ge;r.opacity===1&&(!this.containerReused||d.getOpaque(e.viewState.projection))?de=de.reverse():(z=[],xe=[]);for(let Ue=de.length-1;Ue>=0;--Ue){let S=de[Ue],Pe=d.getTilePixelSize(S,u,o),Ze=f.getResolution(S)/y,St=Pe[0]*Ze*F,En=Pe[1]*Ze*F,Tt=f.getTileCoordForCoordAndZ(en(D),S),Js=f.getTileCoordExtent(Tt),Mi=ke(this.tempTransform,[_*(Js[0]-D[0])/y,_*(D[3]-Js[3])/y]),mh=_*d.getGutterForProjection(o),eu=N[S];for(let tu in eu){let on=eu[tu],To=on.tileCoord,nu=Tt[1]-To[1],yh=Math.round(Mi[0]-(nu-1)*St),ru=Tt[2]-To[2],iu=Math.round(Mi[1]-(ru-1)*En),qt=Math.round(Mi[0]-nu*St),wn=Math.round(Mi[1]-ru*En),Wn=yh-qt,Dn=iu-wn,Mo=g===S,Ao=Mo&&on.getAlpha(J(this),e.time)!==1,Zr=!1;if(!Ao)if(z){ge=[qt,wn,qt+Wn,wn,qt+Wn,wn+Dn,qt,wn+Dn];for(let Er=0,_h=z.length;Er<_h;++Er)if(g!==S&&S<xe[Er]){let Ct=z[Er];Ae([qt,wn,qt+Wn,wn+Dn],[Ct[0],Ct[3],Ct[4],Ct[7]])&&(Zr||(P.save(),Zr=!0),P.beginPath(),P.moveTo(ge[0],ge[1]),P.lineTo(ge[2],ge[3]),P.lineTo(ge[4],ge[5]),P.lineTo(ge[6],ge[7]),P.moveTo(Ct[6],Ct[7]),P.lineTo(Ct[4],Ct[5]),P.lineTo(Ct[2],Ct[3]),P.lineTo(Ct[0],Ct[1]),P.clip())}z.push(ge),xe.push(S)}else P.clearRect(qt,wn,Wn,Dn);this.drawTileImage(on,e,qt,wn,Wn,Dn,mh,Mo),z&&!Ao?(Zr&&P.restore(),this.renderedTiles.unshift(on)):this.renderedTiles.push(on),this.updateUsedTiles(e.usedTiles,d,on)}}return this.renderedRevision=h,this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!Lr(this.renderedExtent_,D),this.renderedExtent_=D,this.renderedPixelRatio=u,this.renderedProjection=o,this.manageTilePyramid(e,d,f,u,o,p,g,c.getPreload()),this.scheduleExpireCache(e,d),this.postRender(this.context,e),r.extent&&P.restore(),P.imageSmoothingEnabled=!0,L!==G.style.transform&&(G.style.transform=L),this.container}drawTileImage(e,n,r,i,o,s,a,l){let u=this.getTileImage(e);if(!u)return;let c=this.getRenderContext(n),d=J(this),h=n.layerStatesArray[n.layerIndex],f=h.opacity*(l?e.getAlpha(d,n.time):1),g=f!==c.globalAlpha;g&&(c.save(),c.globalAlpha=f),c.drawImage(u,a,a,u.width-2*a,u.height-2*a,r,i,o,s),g&&c.restore(),f!==h.opacity?n.animate=!0:l&&e.endTransition(d)}getImage(){let e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,n){if(n.canExpireCache()){let r=(function(i,o,s){let a=J(i);a in s.usedTiles&&i.expireCache(s.viewState.projection,s.usedTiles[a])}).bind(null,n);e.postRenderFunctions.push(r)}}updateUsedTiles(e,n,r){let i=J(n);i in e||(e[i]={}),e[i][r.getKey()]=!0}manageTilePyramid(e,n,r,i,o,s,a,l,u){let c=J(n);c in e.wantedTiles||(e.wantedTiles[c]={});let d=e.wantedTiles[c],h=e.tileQueue,f=r.getMinZoom(),g=e.viewState.rotation,y=g?sd(e.viewState.center,e.viewState.resolution,g,e.size):void 0,p=0,m,_,C,v,E,w;for(w=f;w<=a;++w)for(_=r.getTileRangeForExtentAndZ(s,w,_),C=r.getResolution(w),v=_.minX;v<=_.maxX;++v)for(E=_.minY;E<=_.maxY;++E)g&&!r.tileCoordIntersectsViewport([w,v,E],y)||(a-w<=l?(++p,m=n.getTile(w,v,E,i,o),m.getState()==k.IDLE&&(d[m.getKey()]=!0,h.isKeyQueued(m.getKey())||h.enqueue([m,c,r.getTileCoordCenter(m.tileCoord),C])),u!==void 0&&u(m)):n.useTile(w,v,E,o));n.updateCacheSize(p,o)}},Nb=H_;var $_=class extends Ib{constructor(e){super(e)}createRenderer(){return new Nb(this)}},Ob=$_;var dh={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var Qs=[0,0,0],Ti=5,z_=class{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,$(ID(this.resolutions_,(i,o)=>o-i,!0),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let i=0,o=this.resolutions_.length-1;i<o;++i)if(!n)n=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,$(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));let r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=en(r)),$(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,$(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:256,$(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,o)=>{let s=new oh(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){let a=this.getTileRangeForExtentAndZ(r,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,n,r){let i=this.getTileRangeForExtentAndZ(e,n);for(let o=i.minX,s=i.maxX;o<=s;++o)for(let a=i.minY,l=i.maxY;a<=l;++a)r([n,o,a])}forEachTileCoordParentTileRange(e,n,r,i){let o,s,a,l=null,u=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=bo(s,s,a,a,r)):o=this.getTileRangeForExtentAndZ(l,u,r),n(u,o))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){let o=e[1]*2,s=e[2]*2;return bo(o,o+1,s,s+1,n)}let i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,r){if(n>this.maxZoom||n<this.minZoom)return null;let i=e[0],o=e[1],s=e[2];if(n===i)return bo(o,s,o,s,r);if(this.zoomFactor_){let l=Math.pow(this.zoomFactor_,n-i),u=Math.floor(o*l),c=Math.floor(s*l);if(n<i)return bo(u,u,c,c,r);let d=Math.floor(l*(o+1))-1,h=Math.floor(l*(s+1))-1;return bo(u,d,c,h,r)}let a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,r)}getTileRangeForExtentAndZ(e,n,r){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,Qs);let i=Qs[1],o=Qs[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,Qs);let s=Qs[1],a=Qs[2];return bo(i,s,o,a,r)}getTileCoordCenter(e){let n=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=Ye(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*i[0]*r,n[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,n){let r=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=Ye(this.getTileSize(e[0]),this.tmpSize_),s=r[0]+e[1]*o[0]*i,a=r[1]-(e[2]+1)*o[1]*i,l=s+o[0]*i,u=a+o[1]*i;return bt(s,a,l,u,n)}getTileCoordForCoordAndResolution(e,n,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,r)}getTileCoordForXYAndResolution_(e,n,r,i,o){let s=this.getZForResolution(r),a=r/this.getResolution(s),l=this.getOrigin(s),u=Ye(this.getTileSize(s),this.tmpSize_),c=a*(e-l[0])/r/u[0],d=a*(l[1]-n)/r/u[1];return i?(c=ul(c,Ti)-1,d=ul(d,Ti)-1):(c=ll(c,Ti),d=ll(d,Ti)),I_(s,c,d,o)}getTileCoordForXYAndZ_(e,n,r,i,o){let s=this.getOrigin(r),a=this.getResolution(r),l=Ye(this.getTileSize(r),this.tmpSize_),u=(e-s[0])/a/l[0],c=(s[1]-n)/a/l[1];return i?(u=ul(u,Ti)-1,c=ul(c,Ti)-1):(u=ll(u,Ti),c=ll(c,Ti)),I_(r,u,c,o)}getTileCoordForCoordAndZ(e,n,r){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){let r=Cs(this.resolutions_,e,n||0);return ye(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return cm(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){let n=this.resolutions_.length,r=new Array(n);for(let i=this.minZoom;i<n;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}},W_=z_;function hh(t){let e=t.getDefaultTileGrid();return e||(e=BF(t),t.setDefaultTileGrid(e)),e}function Pb(t,e,n){let r=e[0],i=t.getTileCoordCenter(e),o=fh(n);if(!Vn(o,i)){let s=ie(o),a=Math.ceil((o[0]-i[0])/s);return i[0]+=s*a,t.getTileCoordForCoordAndZ(i,r)}return e}function UF(t,e,n,r){r=r!==void 0?r:"top-left";let i=Fb(t,e,n);return new W_({extent:t,origin:AD(t,r),resolutions:i,tileSize:n})}function Lb(t){let e=t||{},n=e.extent||Oe("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Fb(n,e.maxZoom,e.tileSize,e.maxResolution)};return new W_(r)}function Fb(t,e,n,r){e=e!==void 0?e:42,n=Ye(n!==void 0?n:256);let i=Ne(t),o=ie(t);r=r>0?r:Math.max(o/n[0],i/n[1]);let s=e+1,a=new Array(s);for(let l=0;l<s;++l)a[l]=r/Math.pow(2,l);return a}function BF(t,e,n,r){let i=fh(t);return UF(i,e,n,r)}function fh(t){t=Oe(t);let e=t.getExtent();if(!e){let n=180*Fr.degrees/t.getMetersPerUnit();e=bt(-n,-n,n,n)}return e}var q_=class extends Wd{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;let n=[256,256];this.tileGrid&&Ye(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new rh(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,n){let r=this.getTileCacheForProjection(e);r&&r.expireCache(n)}forEachLoadedTile(e,n,r,i){let o=this.getTileCacheForProjection(e);if(!o)return!1;let s=!0,a,l,u;for(let c=r.minX;c<=r.maxX;++c)for(let d=r.minY;d<=r.maxY;++d)l=Io(n,c,d),u=!1,o.containsKey(l)&&(a=o.get(l),u=a.getState()===k.LOADED,u&&(u=i(a)!==!1)),u||(s=!1);return s}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){let n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,r,i,o){return j()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:hh(e)}getTileCacheForProjection(e){let n=this.getProjection();return $(n===null||ur(n,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,r){let i=this.getTileGridForProjection(r),o=this.getTilePixelRatio(n),s=Ye(i.getTileSize(e),this.tmpSize);return o==1?s:Nx(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){n=n!==void 0?n:this.getProjection();let r=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=Pb(r,e,n)),fb(e,r)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,n){let r=this.getTileCacheForProjection(n);e>r.highWaterMark&&(r.highWaterMark=e)}useTile(e,n,r,i){}},ph=class extends ze{constructor(e,n){super(e),this.tile=n}},kb=q_;function GF(t,e){let n=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(s,a,l){if(s)return t.replace(n,s[0].toString()).replace(r,s[1].toString()).replace(i,s[2].toString()).replace(o,function(){let u=s[0],c=e.getFullTileRange(u);if(!c)throw new Error("The {-y} placeholder requires a tile grid with extent");return(c.getHeight()-s[2]-1).toString()})}}function Vb(t,e){let n=t.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=GF(t[i],e);return HF(r)}function HF(t){return t.length===1?t[0]:function(e,n,r){if(!e)return;let i=hb(e),o=jn(i,t.length);return t[o](e,n,r)}}function jb(t){let e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){let r=n[1].charCodeAt(0),i=n[2].charCodeAt(0),o;for(o=r;o<=i;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){let r=parseInt(n[2],10);for(let i=parseInt(n[1],10);i<=r;i++)e.push(t.replace(n[0],i.toString()));return e}return e.push(t),e}var Y_=class t extends kb{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===t.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){let n=e.target,r=J(n),i=n.getState(),o;i==k.LOADING?(this.tileLoadingKeys_[r]=!0,o=dh.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=i==k.ERROR?dh.TILELOADERROR:i==k.LOADED?dh.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new ph(o,n))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){let n=jb(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;let n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Vb(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,r){}useTile(e,n,r){let i=Io(e,n,r);this.tileCache.containsKey(i)&&this.tileCache.get(i)}},Ub=Y_;var X_=class extends Ub{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:$F,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Yd,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(let e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,n){let r=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==r?n:{});for(let i in this.tileCacheForProjection){let o=this.tileCacheForProjection[i];o.expireCache(o==r?n:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!ur(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!ur(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){let n=this.getProjection();if(this.tileGrid&&(!n||ur(n,e)))return this.tileGrid;let r=J(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=hh(e)),this.tileGridForProjection[r]}getTileCacheForProjection(e){let n=this.getProjection();if(!n||ur(n,e))return this.tileCache;let r=J(e);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new rh(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]}createTile_(e,n,r,i,o,s){let a=[e,n,r],l=this.getTileCoordForTileUrlFunction(a,o),u=l?this.tileUrlFunction(l,i,o):void 0,c=new this.tileClass(a,u!==void 0?k.IDLE:k.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=s,c.addEventListener(A.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,n,r,i,o){let s=this.getProjection();if(!s||!o||ur(s,o))return this.getTileInternal(e,n,r,i,s||o);let a=this.getTileCacheForProjection(o),l=[e,n,r],u,c=nh(l);a.containsKey(c)&&(u=a.get(c));let d=this.getKey();if(u&&u.key==d)return u;let h=this.getTileGridForProjection(s),f=this.getTileGridForProjection(o),g=this.getTileCoordForTileUrlFunction(l,o),y=new Jl(s,h,o,f,l,g,this.getTilePixelRatio(i),this.getGutter(),(p,m,_,C)=>this.getTileInternal(p,m,_,C,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=d,u?(y.interimTile=u,y.refreshInterimChain(),a.replace(c,y)):a.set(c,y),y}getTileInternal(e,n,r,i,o){let s=null,a=Io(e,n,r),l=this.getKey();if(!this.tileCache.containsKey(a))s=this.createTile_(e,n,r,i,o,l),this.tileCache.set(a,s);else if(s=this.tileCache.get(a),s.key!=l){let u=s;s=this.createTile_(e,n,r,i,o,l),u.getState()==k.IDLE?s.interimTile=u.interimTile:s.interimTile=u,s.refreshInterimChain(),this.tileCache.replace(a,s)}return s}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(let n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(e,n){let r=Oe(e);if(r){let i=J(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}clear(){super.clear();for(let e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}};function $F(t,e){t.getImage().src=e}var Bb=X_;var Z_=class extends Bb{constructor(e){e=e||{};let n=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:Lb({extent:fh(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}},Gb=Z_;var zF='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',K_=class extends Gb{constructor(e){e=e||{};let n;e.attributions!==void 0?n=e.attributions:n=[zF];let r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}},Q_=K_;var J_=/(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(EAST|WEST|[EW])?/i,ev=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?/i,tv=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?/i,nv=/(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|’’|´´|["″”\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|´´|’’|["″”\.])?\s*(EAST|WEST|[EW])?/i;function WF(t){if(!["DMS","DM","DD"].includes(t))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){if(t=="DD")return this.decimalCoordinates;let e=this.decimalCoordinates.split(",").map(s=>Number(s.trim())),n=Hb(e[0],t,!0),r=Hb(e[1],t,!1);n.endsWith('.0"')&&r.endsWith('.0"')&&(n=n.replace(/\.0"$/,'"'),r=r.replace(/\.0"$/,'"'));let i=e[0]>=0?" N":" S",o=e[1]>=0?" E":" W";return`${n+i}, ${r+o}`}else throw new Error("no decimal coordinates to convert")}function Hb(t,e){let n=Math.abs(t),r=Math.floor(n),i=(n-r)*60;if(e=="DM"){let a=qF(i,3).toFixed(3).padStart(6,"0");return`${r}\xB0 ${a}'`}let o=Math.floor(i),s=((i-o)*60).toFixed(1).padStart(4,"0");return o=o.toString().padStart(2,"0"),`${r}\xB0 ${o}' ${s}"`}function qF(t,e){let n=Math.pow(10,e);return Math.round((t+Number.EPSILON)*n)/n}var $b=WF;function Wb(t,e){e||(e=5),t=t.replace(/\s+/g," ").trim();let n=null,r=null,i="",o="",s=[],a=!1;if(J_.test(t))if(s=J_.exec(t),a=gh(s),a){if(n=s[2],r=s[6],n.includes(",")&&(n=n.replace(",",".")),r.includes(",")&&(r=r.replace(",",".")),Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");if(Number(Math.round(r))==Number(r))throw new Error("integer only coordinate provided");s[1]?(i=s[1],o=s[5]):s[4]&&(i=s[4],o=s[8])}else throw new Error("invalid decimal coordinate format");else if(ev.test(t))if(s=ev.exec(t),a=gh(s),a)n=Math.abs(parseInt(s[2])),s[4]&&(n+=s[4]/60),s[6]&&(n+=s[6].replace(",",".")/3600),parseInt(s[2])<0&&(n=-1*n),r=Math.abs(parseInt(s[9])),s[11]&&(r+=s[11]/60),s[13]&&(r+=s[13].replace(",",".")/3600),parseInt(s[9])<0&&(r=-1*r),s[1]?(i=s[1],o=s[8]):s[7]&&(i=s[7],o=s[14]);else throw new Error("invalid DMS coordinates format");else if(tv.test(t))if(s=tv.exec(t),a=gh(s),a)n=Math.abs(parseInt(s[2])),s[4]&&(n+=s[4]/60),s[6]&&(n+=s[6]/3600),parseInt(s[2])<0&&(n=-1*n),r=Math.abs(parseInt(s[10])),s[12]&&(r+=s[12]/60),s[14]&&(r+=s[14]/3600),parseInt(s[10])<0&&(r=-1*r),s[1]?(i=s[1],o=s[9]):s[8]&&(i=s[8],o=s[16]);else throw new Error("invalid DMS coordinates format");else if(nv.test(t))if(s=nv.exec(t),a=gh(s),a)n=Math.abs(parseInt(s[2])),s[4]&&(n+=s[4]/60),s[6]&&(n+=s[6]/3600),parseInt(s[2])<0&&(n=-1*n),r=Math.abs(parseInt(s[10])),s[12]&&(r+=s[12]/60),s[14]&&(r+=s[14]/3600),parseInt(s[10])<0&&(r=-1*r),s[1]?(i=s[1],o=s[9]):s[8]&&(i=s[8],o=s[16]);else throw new Error("invalid coordinates format");if(a){if(Math.abs(r)>=180)throw new Error("invalid longitude value");if(Math.abs(n)>=90)throw new Error("invalid latitude value");if((i||o)&&(!i||!o))throw new Error("invalid coordinates format");if(i&&i==o)throw new Error("invalid coordinates format");let l=/S|SOUTH/i;l.test(i)&&n>0&&(n=-1*n),l=/W|WEST/i,l.test(o)&&r>0&&(r=-1*r);let u=s[0].trim(),c,d,h=/[,/;\u0020]/g,f=u.match(h);if(f==null){let p=Math.floor(t.length/2);c=u.substring(0,p).trim(),d=u.substring(p).trim()}else{let p;f.length%2==1?p=Math.floor(f.length/2):p=f.length/2-1;let m=0;if(p==0)m=u.indexOf(f[0]),c=u.substring(0,m).trim(),d=u.substring(m+1).trim();else{let _=0,C=0;for(;_<=p;)m=u.indexOf(f[_],C),C=m+1,_++;c=u.substring(0,m).trim(),d=u.substring(m+1).trim()}}let g=c.split(".");if(g.length==2&&g[1]==0&&g[1].length!=2)throw new Error("invalid coordinates format");let y=d.split(".");if(y.length==2&&y[1]==0&&y[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(c)||/^\d+$/.test(d))throw new Error("degree only coordinate/s provided");return isNaN(n)&&n.includes(",")&&(n=n.replace(",",".")),n=Number(Number(n).toFixed(e)),isNaN(r)&&r.includes(",")&&(r=r.replace(",",".")),r=Number(Number(r).toFixed(e)),Object.freeze({verbatimCoordinates:u,verbatimLatitude:c,verbatimLongitude:d,decimalLatitude:n,decimalLongitude:r,decimalCoordinates:`${n},${r}`,closeEnough:YF,toCoordinateFormat:$b})}else throw new Error("coordinates pattern match failed")}function gh(t){if(!isNaN(t[0]))return!1;let e=[...t];if(e.shift(),e.length%2>0)return!1;let n=/^[-+]?\d+([\.,]\d+)?$/,r=/[eastsouthnorthwest]+/i,i=e.length/2;for(let o=0;o<i;o++){let s=e[o],a=e[o+i],l=n.test(s)&&n.test(a),u=r.test(s)&&r.test(a),c=s==a;if(!(s==null&&a==null)){if(s==null||a==null)return!1;if(l||u||c)continue;return!1}}return!0}function zb(t,e){let n=Math.abs(t-e);return Number(n.toFixed(6))<=1e-5}function YF(t){if(t.includes(",")){let e=t.split(",");if(Number(e[0])==NaN||Number(e[1])==NaN)throw new Error("coords are not valid decimals");return zb(this.decimalLatitude,Number(e[0]))&&zb(this.decimalLongitude,e[1])}else throw new Error("coords being tested must be separated by a comma")}var XF=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});Wb.to=XF;var rv=Wb;var ZF=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123\xB0 N 74.123\xB0 W",verbatimLatitude:"40.123\xB0 N",verbatimLongitude:"74.123\xB0 W"},{verbatimCoordinates:"40.123\xB0 N 74.123\xB0 W",verbatimLatitude:"40.123\xB0 N",verbatimLongitude:"74.123\xB0 W"},{verbatimCoordinates:'40\xB0 7\xB4 22.8" N 74\xB0 7\xB4 22.8" W',verbatimLatitude:'40\xB0 7\xB4 22.8" N',verbatimLongitude:'74\xB0 7\xB4 22.8" W'},{verbatimCoordinates:"40\xB0 7.38\u2019 , -74\xB0 7.38\u2019",verbatimLatitude:"40\xB0 7.38\u2019",verbatimLongitude:"-74\xB0 7.38\u2019"},{verbatimCoordinates:"N40\xB07\u201922.8\u2019\u2019, W74\xB07\u201922.8\u2019\u2019",verbatimLatitude:"N40\xB07\u201922.8\u2019\u2019",verbatimLongitude:"W74\xB07\u201922.8\u2019\u2019"},{verbatimCoordinates:'40\xB07\u201922.8"N, 74\xB07\u201922.8"W',verbatimLatitude:'40\xB07\u201922.8"N',verbatimLongitude:'74\xB07\u201922.8"W'},{verbatimCoordinates:`40\xB07'22.8"N, 74\xB07'22.8"W`,verbatimLatitude:`40\xB07'22.8"N`,verbatimLongitude:`74\xB07'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123\xB0,-74.123\xB0",verbatimLatitude:"40.123\xB0",verbatimLongitude:"-74.123\xB0"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40\xB07\u201922.8"N, 74\xB07\u201922.8"W',verbatimLatitude:'40\xB07\u201922.8"N',verbatimLongitude:'74\xB07\u201922.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40\xB07\u201923"N 74\xB07\u201923"W',verbatimLatitude:'40\xB07\u201923"N',verbatimLongitude:'74\xB07\u201923"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40\xB07\u201923"S 74\xB07\u201923"E',verbatimLatitude:'40\xB07\u201923"S',verbatimLongitude:'74\xB07\u201923"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40\xB07\u201923" -74\xB07\u201923"',verbatimLatitude:'40\xB07\u201923"',verbatimLongitude:'-74\xB07\u201923"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7\u2019 23" N 74d 7\u2019 23" W',verbatimLatitude:'40d 7\u2019 23" N',verbatimLongitude:'74d 7\u2019 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40\xB0 7.38, -74\xB0 7.38",verbatimLatitude:"40\xB0 7.38",verbatimLongitude:"-74\xB0 7.38"},{verbatimCoordinates:"40\xB0 7.38, -74\xB0 7.38",verbatimLatitude:"40\xB0 7.38",verbatimLongitude:"-74\xB0 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],KF={decimalLatitude:40.123,decimalLongitude:-74.123},QF=[{verbatimCoordinates:`50\xB04'17.698"south, 14\xB024'2.826"east`,verbatimLatitude:`50\xB04'17.698"south`,verbatimLongitude:`14\xB024'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"40\xB026\u203247\u2033N 79\xB058\u203236\u2033W",verbatimLatitude:"40\xB026\u203247\u2033N",verbatimLongitude:"79\xB058\u203236\u2033W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26\u2032 47\u2033 N 79d 58\u2032 36\u2033 W",verbatimLatitude:"40d 26\u2032 47\u2033 N",verbatimLongitude:"79d 58\u2032 36\u2033 W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195\xB0 79,948862\xB0",verbatimLatitude:"40,446195\xB0",verbatimLongitude:"79,948862\xB0",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40\xB0 26.7717, -79\xB0 56.93172",verbatimLatitude:"40\xB0 26.7717",verbatimLongitude:"-79\xB0 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"18\xB024S 22\xB045E",verbatimLatitude:"18\xB024S",verbatimLongitude:"22\xB045E",decimalLatitude:-18.4,decimalLongitude:22.75}],JF=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245\xB0 S / 28.2344\xB0 E",verbatimLatitude:"-23.3245\xB0 S",verbatimLongitude:"28.2344\xB0 E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40\xB0 26.7717 -79\xB0 56.93172",verbatimLatitude:"40\xB0 26.7717",verbatimLongitude:"-79\xB0 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563 \xB0  E22.45634 \xB0",verbatimLatitude:"S23.43563 \xB0",verbatimLongitude:"E22.45634 \xB0",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372\xB0 S 23,07771\xB0 E",verbatimLatitude:"27,71372\xB0 S",verbatimLongitude:"23,07771\xB0 E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222}];function ek(){let t=[];return ZF.forEach(e=>{e.decimalLatitude?t.push(e):t.push(M(M({},e),KF))}),[...t,...QF,...JF]}var qb=ek();rv.formats=qb.map(t=>t.verbatimCoordinates);var Yb=rv;function Zb(t,e){if(e=typeof e=="number"?e:5,!Array.isArray(t))throw new TypeError("forward did not receive an array");if(typeof t[0]=="string"||typeof t[1]=="string")throw new TypeError("forward received an array of strings, but it only accepts an array of numbers.");let[n,r]=t;if(n<-180||n>180)throw new TypeError("forward received an invalid longitude of "+n);if(r<-90||r>90)throw new TypeError("forward received an invalid latitude of "+r);if(r<-80||r>84)throw new TypeError(`forward received a latitude of ${r}, but this library does not support conversions of points in polar regions below 80\xB0S and above 84\xB0N`);return function(i,o){let s="00000"+i.easting,a="00000"+i.northing;return i.zoneNumber+i.zoneLetter+function(l,u,c){let d=Jb(c),h=Math.floor(l/1e5),f=Math.floor(u/1e5)%20;return function(g,y,p){let m=p-1,_="AJSAJS".charCodeAt(m),C="AFAFAF".charCodeAt(m),v=_+g-1,E=C+y,w=!1;return v>90&&(v=v-90+65-1,w=!0),(v===73||_<73&&v>73||(v>73||_<73)&&w)&&v++,(v===79||_<79&&v>79||(v>79||_<79)&&w)&&(v++,v===73&&v++),v>90&&(v=v-90+65-1),E>86?(E=E-86+65-1,w=!0):w=!1,(E===73||C<73&&E>73||(E>73||C<73)&&w)&&E++,(E===79||C<79&&E>79||(E>79||C<79)&&w)&&(E++,E===73&&E++),E>86&&(E=E-86+65-1),String.fromCharCode(v)+String.fromCharCode(E)}(h,f,d)}(i.easting,i.northing,i.zoneNumber)+s.substr(s.length-5,o)+a.substr(a.length-5,o)}(function(i){let o=i.lat,s=i.lon,a=6378137,l=iv(o),u=iv(s),c;c=Math.floor((s+180)/6)+1,s===180&&(c=60),o>=56&&o<64&&s>=3&&s<12&&(c=32),o>=72&&o<84&&(s>=0&&s<9?c=31:s>=9&&s<21?c=33:s>=21&&s<33?c=35:s>=33&&s<42&&(c=37));let d=iv(6*(c-1)-180+3),h=a/Math.sqrt(1-.00669438*Math.sin(l)*Math.sin(l)),f=Math.tan(l)*Math.tan(l),g=.006739496752268451*Math.cos(l)*Math.cos(l),y=Math.cos(l)*(u-d),p=a*(.9983242984503243*l-.002514607064228144*Math.sin(2*l)+2639046602129982e-21*Math.sin(4*l)-3418046101696858e-24*Math.sin(6*l)),m=.9996*h*(y+(1-f+g)*y*y*y/6+(5-18*f+f*f+72*g-.39089081163157013)*y*y*y*y*y/120)+5e5,_=.9996*(p+h*Math.tan(l)*(y*y/2+(5-f+9*g+4*g*g)*y*y*y*y/24+(61-58*f+f*f+600*g-2.2240339282485886)*y*y*y*y*y*y/720));return o<0&&(_+=1e7),{northing:Math.trunc(_),easting:Math.trunc(m),zoneNumber:c,zoneLetter:tk(o)}}({lat:r,lon:n}),e)}function Kb(t){let e=ov(eS(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function Qb(t){if(t==="")throw new TypeError("toPoint received a blank string");let e=ov(eS(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function iv(t){return t*(Math.PI/180)}function Xb(t){return t/Math.PI*180}function ov(t){let e=t.northing,n=t.easting,{zoneLetter:r,zoneNumber:i}=t;if(i<0||i>60)return null;let o=6378137,s=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),a=n-5e5,l=e;r<"N"&&(l-=1e7);let u=6*(i-1)-180+3,c=l/.9996/6367449145945056e-9,d=c+(3*s/2-27*s*s*s/32)*Math.sin(2*c)+(21*s*s/16-55*s*s*s*s/32)*Math.sin(4*c)+151*s*s*s/96*Math.sin(6*c),h=o/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),f=Math.tan(d)*Math.tan(d),g=.006739496752268451*Math.cos(d)*Math.cos(d),y=.99330562*o/Math.pow(1-.00669438*Math.sin(d)*Math.sin(d),1.5),p=a/(.9996*h),m=d-h*Math.tan(d)/y*(p*p/2-(5+3*f+10*g-4*g*g-.06065547077041606)*p*p*p*p/24+(61+90*f+298*g+45*f*f-1.6983531815716497-3*g*g)*p*p*p*p*p*p/720);m=Xb(m);let _,C=(p-(1+2*f+g)*p*p*p/6+(5-2*g+28*f-3*g*g+.05391597401814761+24*f*f)*p*p*p*p*p/120)/Math.cos(d);if(C=u+Xb(C),typeof t.accuracy=="number"){let v=ov({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});_={top:v.lat,right:v.lon,bottom:m,left:C}}else _={lat:m,lon:C};return _}function tk(t){return t<=84&&t>=72?"X":t<72&&t>=-80?"CDEFGHJKLMNPQRSTUVWX"[Math.floor((t- -80)/8)]:t>84||t<-80?"Z":void 0}function Jb(t){let e=t%6;return e===0&&(e=6),e}function eS(t){if(t&&t.length===0)throw new TypeError("MGRSPoint coverting from nothing");t=t.replace(/ /g,"");let{length:e}=t,n,r=null,i="",o=0;for(;!/[A-Z]/.test(n=t.charAt(o));){if(o>=2)throw new Error("MGRSPoint bad conversion from: "+t);i+=n,o++}let s=parseInt(i,10);if(o===0||o+3>e)throw new Error("MGRSPoint bad conversion from "+t);let a=t.charAt(o++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw new Error(`MGRSPoint zone letter ${a} not handled: ${t}`);r=t.substring(o,o+=2);let l=Jb(s),u=function(_,C){let v="AJSAJS".charCodeAt(C-1),E=1e5,w=!1;for(;v!==_.charCodeAt(0);){if(v++,v===73&&v++,v===79&&v++,v>90){if(w)throw new Error("Bad character: "+_);v=65,w=!0}E+=1e5}return E}(r.charAt(0),l),c=function(_,C){if(_>"V")throw new TypeError("MGRSPoint given invalid Northing "+_);let v="AFAFAF".charCodeAt(C-1),E=0,w=!1;for(;v!==_.charCodeAt(0);){if(v++,v===73&&v++,v===79&&v++,v>86){if(w)throw new Error("Bad character: "+_);v=65,w=!0}E+=1e5}return E}(r.charAt(1),l);for(;c<nk(a);)c+=2e6;let d=e-o;if(d%2!=0)throw new Error(`MGRSPoint has to have an even number
of digits after the zone letter and two 100km letters - front
half for easting meters, second half for
northing meters `+t);let h=d/2,f,g,y,p=0,m=0;return h>0&&(f=1e5/Math.pow(10,h),g=t.substring(o,o+h),p=parseFloat(g)*f,y=t.substring(o+h),m=parseFloat(y)*f),{easting:p+u,northing:m+c,zoneLetter:a,zoneNumber:s,accuracy:f}}function nk(t){let e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw new TypeError("Invalid zone letter: "+t)}var tS=(()=>{let e=class e{constructor(){this.pointToMgrs=Zb}parse(r){return Yb(r)}parseMgrs(r){return{bbox:Kb(r),lonLat:Qb(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rk=["olMapContainer"],ik=(t,e)=>({"opacity-0 translate-x-[200px]":t,"opacity-100 translate-x-[0]":e});QD();var nS=(()=>{let e=class e{constructor(){this.olMapElement=RE.required("olMapContainer"),this.coordinateService=R(tS),this.wktFormGroup=new lo({wkt:new uo("",{nonNullable:!0})}),this.dmsFormGroup=new lo({dms:new uo("",{nonNullable:!0})}),this.latLonFormGroup=new lo({lat:new uo(void 0,{nonNullable:!0}),lon:new uo(void 0,{nonNullable:!0})}),this.mgrsFormGroup=new lo({mgrs:new uo("",{nonNullable:!0})}),this.vectorLayer=new Ul({source:new $l}),this.drawPointLayer=new Ul({source:new $l}),this.drawInteraction=new xb({type:"Point",source:this.drawPointLayer.getSource()}),this.olMap=new D_({layers:[new Ob({source:new Q_}),this.vectorLayer],interactions:th().extend([this.drawInteraction]),view:new Ht({center:[0,0],zoom:2})}),this.result$$=Sp(void 0),Np(()=>{let r=this.olMapElement();this.olMap.setTarget(r.nativeElement)}),this.drawInteraction.on("drawend",r=>{let i=r.feature.getGeometry().getCoordinates();this.setResult(i)})}onSubmitDMS(r){let i=this.coordinateService.parse(r),{decimalLatitude:o,decimalLongitude:s}=i;this.olMap.getView().animate({center:[Number(s),Number(o)],duration:300,zoom:10});let a=new it(new ft([Number(s),Number(o)]));this.vectorLayer.getSource()?.addFeature(a),this.setResult([Number(s),Number(o)])}onSubmitLatLon(r,i){if(r&&i){this.olMap.getView().animate({center:[i,r],duration:300,zoom:10});let o=new it(new ft([i,r]));this.vectorLayer.getSource()?.addFeature(o),this.setResult([i,r])}}onSubmitMGRS(r){let{lonLat:i,bbox:o}=this.coordinateService.parseMgrs(r);if(o){let s=new it(new tn([[[o[0],o[1]],[o[2],o[1]],[o[2],o[3]],[o[0],o[3]],[o[0],o[1]]]]));this.vectorLayer.getSource()?.addFeature(s),this.olMap.getView().fit(o,{duration:300,padding:[100,100,100,100]})}else{let s=new it(new ft(i));this.vectorLayer.getSource()?.addFeature(s),this.olMap.getView().animate({center:i,duration:300,zoom:10})}this.setResult(i,o)}onSubmitWKT(r){let o=new P_().readGeometry(r),s=new it(o);this.vectorLayer.getSource()?.addFeature(s),o.getType()==="Point"?this.olMap.getView().animate({center:o.getCoordinates(),duration:300,zoom:10}):this.olMap.getView().fit(o.getExtent(),{duration:300}),o.getType()==="Point"?this.setResult(o.getCoordinates()):o.getType()==="LineString"?this.setResult(o.getFirstCoordinate(),o.getExtent()):o.getType()==="Polygon"?this.setResult(o.getFirstCoordinate(),o.getExtent()):o.getType()==="MultiPoint"?this.setResult(o.getFirstCoordinate(),o.getExtent()):o.getType()==="MultiLineString"?this.setResult(o.getFirstCoordinate(),o.getExtent()):o.getType()==="MultiPolygon"&&this.setResult(o.getFirstCoordinate(),o.getExtent())}setResult(r,i){let s=new P_().writeGeometry(new ft(r)).trim(),a=WD(r);this.result$$.set({lonLat:r,bbox:i,wkt:s,dms:a,dmsWithoutSpace:a.replaceAll("\xB0","").replaceAll("\u2032","").replaceAll("\u2033","").replaceAll(" ",""),mgrs:this.coordinateService.pointToMgrs(r)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=uc({type:e,selectors:[["app-root"]],viewQuery:function(i,o){i&1&&OE(o.olMapElement,rk,5),i&2&&PE()},standalone:!0,features:[Cc],decls:60,vars:13,consts:[["olMapContainer",""],[1,"w-screen","h-screen","bg-gray-600","relative","overflow-hidden"],["id","ol-map-container",1,"h-full","w-full"],[1,"bg-gray-900","h-full","absolute","left-0","top-0","p-2","prose","prose-invert"],[3,"formGroup"],["type","text","formControlName","dms"],[3,"click"],["type","number","formControlName","lon"],["type","number","formControlName","lat"],["type","text","formControlName","mgrs"],["type","text","formControlName","wkt"],[1,"absolute","right-0","top-0","h-full","p-2","bg-gray-900","prose","prose-invert","transform-gpu","duration-300","transition-all",3,"ngClass"]],template:function(i,o){if(i&1){let s=NE();Se(0,"div",1),or(1,"div",2,0),Se(3,"div",3)(4,"h1"),Re(5,"Input"),Me(),Se(6,"p"),Re(7," Either enter a coordinate in the following forms, or click on the map. "),Me(),Se(8,"form",4)(9,"h2"),Re(10,"DMS"),Me(),or(11,"input",5),Se(12,"button",6),On("click",function(){return Sa(s),Ta(o.onSubmitDMS(o.dmsFormGroup.controls.dms.value))}),Re(13," Submit "),Me()(),Se(14,"form",4)(15,"h2"),Re(16,"LonLat"),Me(),Se(17,"p"),Re(18,"Lon:"),Me(),or(19,"input",7),Se(20,"p"),Re(21,"Lat:"),Me(),or(22,"input",8),Se(23,"button",6),On("click",function(){return Sa(s),Ta(o.onSubmitLatLon(o.latLonFormGroup.controls.lat.value,o.latLonFormGroup.controls.lon.value))}),Re(24," Submit "),Me()(),Se(25,"form",4)(26,"h2"),Re(27,"MGRS"),Me(),or(28,"input",9),Se(29,"button",6),On("click",function(){return Sa(s),Ta(o.onSubmitMGRS(o.mgrsFormGroup.controls.mgrs.value))}),Re(30," Submit "),Me()(),Se(31,"form",4)(32,"h2"),Re(33,"WKT"),Me(),or(34,"input",10),Se(35,"button",6),On("click",function(){return Sa(s),Ta(o.onSubmitMGRS(o.wktFormGroup.controls.wkt.value))}),Re(36," Submit "),Me()()(),Se(37,"div",11)(38,"h1"),Re(39,"Output"),Me(),Se(40,"h2"),Re(41,"HDMS"),Me(),Se(42,"p"),Re(43),Me(),Se(44,"h2"),Re(45,"HDMS Clean"),Me(),Se(46,"p"),Re(47),Me(),Se(48,"h2"),Re(49,"Lon, Lat"),Me(),Se(50,"p"),Re(51),Me(),Se(52,"h2"),Re(53,"MGRS"),Me(),Se(54,"p"),Re(55),Me(),Se(56,"h2"),Re(57,"WKT"),Me(),Se(58,"p"),Re(59),Me()()()}if(i&2){let s,a,l,u,c;Nn(8),Ji("formGroup",o.dmsFormGroup),Nn(6),Ji("formGroup",o.latLonFormGroup),Nn(11),Ji("formGroup",o.mgrsFormGroup),Nn(6),Ji("formGroup",o.wktFormGroup),Nn(6),Ji("ngClass",kE(10,ik,o.result$$()===void 0,o.result$$()!==void 0)),Nn(6),eo((s=o.result$$())==null?null:s.dms),Nn(4),eo((a=o.result$$())==null?null:a.dmsWithoutSpace),Nn(4),eo((l=o.result$$())==null?null:l.lonLat),Nn(4),eo((u=o.result$$())==null?null:u.mgrs),Nn(4),eo((c=o.result$$())==null?null:c.wkt)}},dependencies:[wD,CD,Zc,Pg,pD,gD,Lg,Fg,Lp,ew],styles:["button[_ngcontent-%COMP%]{border-radius:.25rem;--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity));padding:.5rem 1rem;font-size:.75rem;line-height:1rem;font-weight:700;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}input[_ngcontent-%COMP%]{width:100%;border-radius:.25rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity));padding:.5rem}"]});let t=e;return t})();uw(nS,qw).catch(t=>console.error(t));
